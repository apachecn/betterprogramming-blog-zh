# AWS Lambda ä¸Šæ— æœåŠ¡å™¨ï¼Œå¸¦ Kotlin + Micronaut + Graal è™šæ‹Ÿæœº

> åŸæ–‡ï¼š<https://betterprogramming.pub/serverless-on-aws-lambda-with-micronaut-kotlin-7aac485f066e>

## å¿«é€Ÿæµè§ˆ Caribouâ€”â€”SaaS å¼€å‘äººå‘˜å·¥å…·ï¼Œæœ‰åŠ©äºæŠ€æœ¯å€ºåŠ¡åº¦é‡

![](img/4dc43db605f81a8023e0c0bc6e491c15.png)

é©¬å…‹Â·èµ–æ­‡å°”åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šçš„ç…§ç‰‡

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å›é¡¾ [Caribou](http://hellocaribou.com/) çš„æŠ€æœ¯å †æ ˆå†³ç­–ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€å‘å·¥å…·ï¼Œå¸®åŠ©å¼€å‘äººå‘˜ä½¿ç”¨æ•°æ®é©±åŠ¨çš„è§è§£æ¥ç®¡ç†ä»–ä»¬çš„æŠ€æœ¯å€ºåŠ¡ã€‚æˆ‘ä»¬å°†æ¢è®¨æ— æœåŠ¡å™¨æ¶æ„çš„ä¸€äº›ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œä»¥åŠåœ¨ JVM è¯­è¨€ä¸­ä½¿ç”¨æ— æœåŠ¡å™¨æœ‰å¤šå®¹æ˜“ã€‚

å¤§çº¦ä¸€å¹´å‰ï¼Œæˆ‘ä»¬å¼€å§‹è®¨è®ºæˆ‘ä»¬å°†ç”¨æ¥æ„å»º [Caribou](https://www.hellocaribou.com/) çš„ä¸»è¦ç»„ä»¶å’Œè½¯ä»¶å †æ ˆã€‚

Caribou æ˜¯ä¸€ä¸ª SaaS å¼€å‘è€…å·¥å…·ï¼Œå¯ä»¥ä½œä¸º GitHub åº”ç”¨ç¨‹åºå®‰è£…åœ¨ä½ çš„ GitHub å¸æˆ·ä¸Šï¼Œå¹¶æä¾›å…³äºä½ å¦‚ä½•ä»ä»£ç åº“ä¸­ç§»é™¤æŠ€æœ¯å€ºåŠ¡çš„è§è§£ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å°†ä½ çš„é¡¹ç›®ä» Java è¿ç§»åˆ° Kotlinï¼Œå¹¶ä¸”ä½ æƒ³è·Ÿè¸ªè¿™ä¸ªè¿ç§»ï¼Œé‚£ä¹ˆä½ éœ€è¦åšçš„å°±æ˜¯å®šä¹‰ä¸€ä¸ª[è§„åˆ™](https://www.hellocaribou.com/documentation/migrations/#migrating-from-java-to-kotlin)æ¥å‘Šè¯‰ Caribou ä½ æƒ³è·Ÿè¸ªå“ªä¸ªæ–‡ä»¶ã€‚

Caribou ç„¶ååœ¨æ¯ä¸ª pull è¯·æ±‚è¢«åˆå¹¶åè¿è¡Œä¸€ä¸ªåˆ†æï¼Œä¸ºæ‚¨æä¾›å…³äºè¿ç§»è¿›å±•å¦‚ä½•ã€é¢„è®¡å®Œæˆæ—¥æœŸæ˜¯ä»€ä¹ˆæ—¶å€™ã€è°åœ¨åšè´¡çŒ®ç­‰ç­‰çš„å®æ—¶æ•°æ®ï¼

![](img/c5379cb6fe7491a1760b213d3902205f.png)

é©¯é¹¿åœ¨è¡ŒåŠ¨ï¼

Caribou éœ€è¦çš„ä¸»è¦æŠ€æœ¯ç»„ä»¶æœ‰:

*   ä¸€ä¸ª Web åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿå®šä¹‰ä»–ä»¬çš„è¿ç§»ï¼Œå¹¶æŸ¥çœ‹ä»–ä»¬å¼•å…¥çš„ä»£ç æ›´æ”¹çš„æ‰€æœ‰è¿ç§»æŒ‡æ ‡ã€‚
*   ä¸€ä¸ªå¸¦æœ‰ REST API çš„åç«¯ï¼Œä¸º web åº”ç”¨ç¨‹åºæä¾›æœåŠ¡ï¼Œè¿˜æœ‰ä¸€ä¸ªæ•°æ®åº“ï¼Œç”¨äºå­˜å‚¨å…³äºç”¨æˆ·å®šä¹‰çš„è¿ç§»åŠå…¶è¿›å±•æƒ…å†µçš„å…ƒæ•°æ®ã€‚
*   ä¸€ç§ç”¨æˆ·è®¤è¯å’Œæä¾› Caribou è®¿é—®ä»–ä»¬çš„ GitHub å­˜å‚¨åº“çš„æœºåˆ¶ï¼Œè¿™æ ·å®ƒå¯ä»¥ç›‘è§†ä¼ å…¥çš„ pull è¯·æ±‚ï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œåˆ†æã€‚

å½“è®¾è®¡æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå’Œåšå‡ºæŠ€æœ¯å†³ç­–æ—¶ï¼Œæœ€é‡è¦çš„æ ‡å‡†æ˜¯å¼€å‘é€Ÿåº¦ï¼›æˆ‘ä»¬å¸Œæœ›å¿«é€Ÿè·å¾—ä¸€ä¸ª MVPï¼Œç„¶åæ ¹æ®ç”¨æˆ·çš„åé¦ˆè¿›è¡Œè¿­ä»£ã€‚è¿™æ„å‘³ç€é€‰æ‹©æˆ‘ä»¬ç†Ÿæ‚‰çš„æŠ€æœ¯å’Œå·¥å…·ï¼Œä¼˜å…ˆä½¿ç”¨ç°æˆçš„äº§å“è€Œä¸æ˜¯æˆ‘ä»¬è‡ªå·±æ„å»ºçš„ä¸œè¥¿ï¼Œé€‰æ‹©å­¦ä¹ æ›²çº¿æœ€å°æˆ–è€…å‘¨å›´æœ‰è‰¯å¥½æ–‡æ¡£å’Œç¤¾åŒºå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿä¸Šæ‰‹çš„å·¥å…·ã€‚

æœ¬æ–‡å°†å…³æ³¨åç«¯çš„ 3 ä¸ªä¸»è¦å†³ç­–é€‰æ‹©ï¼Œå³:

*   ç”¨ä»€ä¹ˆè¯­è¨€æ¥æ„å»ºå®ƒã€‚
*   æˆ‘ä»¬å°†ä½¿ç”¨ä»€ä¹ˆæ ·çš„æ¡†æ¶æ¥å®Œæˆç¹é‡çš„å·¥ä½œã€‚
*   æˆ‘ä»¬æ˜¯å¦ä¼šåˆ©ç”¨â€œæ— æœåŠ¡å™¨â€è¿™ä¸€æ–°ç”Ÿäº‹ç‰©ï¼Œæˆ–è€…æˆ‘ä»¬æ˜¯å¦ä¼šé‡‡ç”¨ç°æœ‰çš„æ•´ä½“å¼æˆ–å¾®æœåŠ¡æ–¹æ³•ã€‚

æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„æ˜¯ä¸€ä¸ªç”¨ [Kotlin](https://kotlinlang.org/) ç¼–å†™çš„åç«¯ï¼Œåœ¨ [AWS Lambda](https://aws.amazon.com/lambda/) ä¸Šä½¿ç”¨ [Micronaut æ¡†æ¶](https://micronaut.io/)æ„å»ºçš„æ— æœåŠ¡å™¨æ¶æ„ã€‚ç°åœ¨è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°çœ‹ä¸€ä¸‹è¿™ 3 ä¸ªé€‰é¡¹:

## ä¸ºä»€ä¹ˆé€‰æ‹© AWS Lambda

æˆ‘ä»¬ä¸ºè‡ªå·±è®¾å®šçš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬æ˜¯å°†æ— æœåŠ¡å™¨æ¶æ„ç”¨äºæˆ‘ä»¬çš„åç«¯ï¼Œè¿˜æ˜¯åšæŒåœ¨å®¹å™¨å†…éƒ¨ç½²ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡çš„æ›´ä¼ ç»Ÿçš„è§£å†³æ–¹æ¡ˆã€‚

è€ƒè™‘åˆ°æˆ‘ä»¬æœ€åˆå¯¹é€Ÿåº¦çš„è¦æ±‚ï¼Œæ— æœåŠ¡å™¨å¼•èµ·äº†æˆ‘ä»¬çš„å…´è¶£ï¼Œå› ä¸ºè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å¤„ç†çš„äº‹æƒ…ä¼šæ›´å°‘ã€‚å¯¹äºç¬¬ä¸€æ¬¡è¿›å…¥åç«¯å¼€å‘çš„äººæ¥è¯´ï¼Œæ— æ•°çš„ AWS å®¹å™¨æœåŠ¡( [ECS](https://aws.amazon.com/ecs/) ã€ [EKS](https://aws.amazon.com/eks/) ã€ [Fargate](https://aws.amazon.com/fargate/) ã€ [Kubernetes](https://kubernetes.io/) ç­‰ç­‰)æœ‰ä¸€ä¸ªç›¸å½“é™¡å³­çš„å­¦ä¹ æ›²çº¿ã€‚

å¦ä¸€æ–¹é¢ï¼Œå°±åŸºç¡€è®¾æ–½å’Œå¯ä¼¸ç¼©æ€§è€Œè¨€ï¼Œæ— æœåŠ¡å™¨æœ‰ä¸€ä¸ªéå¸¸ç®€å•çš„æ¨¡å‹ï¼Œå…è®¸æ‚¨åªæ‹…å¿ƒæ­£åœ¨æ‰§è¡Œçš„ä»£ç ï¼Œè€Œè®©å¹³å°æœåŠ¡æä¾›å•†æ‹…å¿ƒæ‰€æœ‰å…¶ä»–äº‹æƒ…ã€‚

ä¸ºäº†æµ‹è¯•æˆ‘ä»¬çš„å‡è®¾ï¼Œå³å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œä½¿ç”¨æ— æœåŠ¡å™¨æ¯”ä½¿ç”¨å®¹å™¨æ›´å¿«æ›´ç®€å•ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªç®€å•çš„è™šæ‹Ÿåç«¯ï¼Œå…¶ä¸­ AWS Lambda è¿æ¥åˆ°ä¸€ä¸ª REST API(ä½¿ç”¨ [AWS API ç½‘å…³](https://aws.amazon.com/api-gateway/)),å¹¶è®¾æ³•äº†è§£å“ªä¸€ä¸ªæ˜¯ä¸ºæˆ‘ä»¬æ„å»ºæœ€å¿«çš„ã€‚AWS lambda è½»æ¾è·èƒœã€‚

![](img/6c55507b11d6fe1135c0edd0d967dfc5.png)

åŸºç¡€è®¾æ–½ vs å®¹å™¨ vs åŠŸèƒ½å³æœåŠ¡ï¼Œæ¥è‡ª[https://tinyurl.com/caas-faas](https://tinyurl.com/caas-faas)

é™¤æ­¤ä¹‹å¤–ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯:

*   ç”¨ä¸€ä¸ªæ— æœåŠ¡å™¨çš„æ¶æ„æ¥æ„å»ºä¹Ÿæ„å‘³ç€æˆ‘ä»¬æœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ªæ¨¡å—åŒ–çš„ç³»ç»Ÿï¼Œå…¶ä¸­æ¯ä¸ª lambda å‡½æ•°åªåšä¸€ä»¶äº‹ï¼Œæœ‰ä¸€ä¸ªéå¸¸æ¸…æ™°çš„æ¥å£ï¼Œå¹¶ä¸”å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ã€‚
*   è®¸å¤šå¹³å°æä¾›å•†æä¾›äº†æ…·æ…¨çš„å…è´¹å±‚(ä¾‹å¦‚ AWS æ¯æœˆå…è´¹æä¾› 1ï¼Œ000ï¼Œ000 æ¬¡å‡½æ•°è°ƒç”¨)ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æš‚æ—¶ä¸éœ€è¦ä¸ºæˆ‘ä»¬çš„ lambda æ‰§è¡Œæ”¯ä»˜ä»»ä½•è´¹ç”¨ğŸ™‚ã€‚

ç„¶è€Œï¼Œä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹:

*   æ— æœåŠ¡å™¨æœåŠ¡å‡ºç°çš„æ—¶é—´æ²¡æœ‰å®¹å™¨æœåŠ¡é•¿ï¼Œæˆ‘ä»¬æ‰“ç®—å°†å®ƒä¸ Kotlin ä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ„å‘³ç€ç½‘ä¸Šä¸ä¼šæœ‰å¤ªå¤šå…³äºè¿™ä¸ªä¸»é¢˜çš„å†…å®¹æ¥æŒ‡å¯¼æˆ‘ä»¬ã€‚
*   å¦‚æœæˆ‘ä»¬å°†å®ƒä¸ä»»ä½• JVM è¯­è¨€(å¦‚ Kotlin)ä¸€èµ·ä½¿ç”¨ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸º[å†·å¯åŠ¨é—®é¢˜](https://aws.amazon.com/blogs/compute/operating-lambda-performance-optimization-part-1/)æ‰¾åˆ°ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ:æ‰§è¡ŒåŸºäº JVM çš„è¯­è¨€éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼Œå› ä¸ºåœ¨ç¬¬ä¸€æ¬¡ lambda è°ƒç”¨æ—¶ï¼Œæ‚¨éœ€è¦ç­‰å¾…è¿è¡Œæ—¶ç¯å¢ƒåˆå§‹åŒ–ï¼Œè€Œéšåçš„è°ƒç”¨ä¸ä¼šé¢ä¸´åŒæ ·çš„é—®é¢˜ã€‚è¿™å¬èµ·æ¥å¯èƒ½æ˜¯ä¸ªå°é—®é¢˜ï¼Œä½†æ˜¯è®© REST API åœ¨ 10-15 ç§’å†…è¿”å›ç¡®å®ä¼šæ‰¼æ€ç”¨æˆ·ä½“éªŒï¼Œå³ä½¿è¿™ç§æƒ…å†µå¹¶ä¸ç»å¸¸å‘ç”Ÿã€‚
*   å¦ä¸€ä¸ªæˆ‘ä»¬è®¤ä¸ºæ— æœåŠ¡å™¨å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªå‡½æ•°éœ€è¦æ‰§è¡Œä¸€ä¸ª`git clone`æ“ä½œ(ä¸ºäº†æ‰§è¡Œ [Caribou æä¾›çš„](https://www.hellocaribou.com/documentation/#how-the-tool-works)æŠ€æœ¯å€ºåŠ¡åˆ†æ)ï¼Œè¿™å¯èƒ½ä¼šåœ¨æ— æœåŠ¡å™¨æ¶æ„ä¸­è¶…æ—¶ï¼Œå› ä¸ºæ‰€æœ‰çš„æä¾›è€…å¯¹ä»–ä»¬çš„å‡½æ•°è°ƒç”¨éƒ½æœ‰ç‰¹å®šçš„[è¶…æ—¶é™åˆ¶](https://acloudguru.com/blog/engineering/serverless-showdown-aws-lambda-vs-azure-functions-vs-google-cloud-functions#5b)(ä¾‹å¦‚ AWS Lambda ç›®å‰æœ‰ä¸€ä¸ª [900 ç§’](https://docs.aws.amazon.com/whitepapers/latest/serverless-architectures-lambda/timeout.html)è¶…æ—¶)ã€‚

åœ¨è°ƒæŸ¥äº†ä¸Šé¢æåˆ°çš„è¿™äº›æ½œåœ¨é—®é¢˜åï¼Œæˆ‘ä»¬å†³å®šç»§ç»­ä½¿ç”¨æ— æœåŠ¡å™¨ï¼Œå…·ä½“å¦‚ä¸‹:

*   æˆ‘ä»¬å‘ç° [GraalVM æœ¬åœ°æ˜ åƒ](https://www.graalvm.org/reference-manual/native-image/)æœ‰åŠ©äºå‡å°‘å†·å¯åŠ¨æ—¶é—´ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬æ–‡åé¢çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚
*   åœ¨æµ‹è¯•äº†ç”šè‡³æ›´å¤§çš„ git ä»“åº“çš„`git clone`æ“ä½œåï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒä»¬ä¸å¤ªå¯èƒ½èŠ±è´¹è¶…è¿‡ 15 åˆ†é’Ÿçš„æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶è§†ä¸ºä¸€ç§è¾¹ç¼˜æƒ…å†µã€‚å¦‚æœæˆ‘ä»¬æ›¾ç»é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆ[ç¨€ç–æ ¡éªŒ](https://git-scm.com/docs/git-sparse-checkout)å¯èƒ½æ˜¯å®ƒçš„ç­”æ¡ˆã€‚

![](img/2b6898ba3571ca325f459e120e46390a.png)

æˆ‘ä»¬å°è¯•ç”¨ Caribou å…‹éš†äº†ä¸€äº›ç›¸å½“å¤§çš„ git åº“ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯¹ AWS lambda ä¸Š 900 ç§’çš„è¶…æ—¶é™åˆ¶ç›¸å½“æ»¡æ„ã€‚

æˆ‘ä»¬ç‰¹åˆ«å†³å®šä½¿ç”¨ [AWS Lambda](https://aws.amazon.com/lambda/) è€Œä¸æ˜¯ [Azure](https://azure.microsoft.com/en-gb/solutions/serverless/) æˆ– [GCP](https://cloud.google.com/serverless) ï¼Œä¸»è¦æ˜¯å› ä¸ºå¯¹è¿‡å»çš„ AWS æœ‰äº›ç†Ÿæ‚‰ï¼Œä½†ä¹Ÿæ˜¯å› ä¸ºä¸€ä¸ªäº²å¯†çš„æœ‹å‹åœ¨ AWS å¹³å°æ–¹é¢æœ‰ä¸°å¯Œçš„ç»éªŒï¼Œè¿™æ„å‘³ç€å¦‚æœæœ‰ä»€ä¹ˆå¯æ€•çš„é”™è¯¯ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè·å¾—ä¸€äº›å¸®åŠ©ï¼

å¦å¤–ï¼Œå¦‚æœä½ æƒ³æ·±å…¥äº†è§£æ— æœåŠ¡å™¨æ¶æ„ï¼Œä¸€å®šè¦çœ‹çœ‹è¿™ç¯‡æ–‡ç« ã€‚

## ä¸ºä»€ä¹ˆæ˜¯ç§‘ç‰¹æ—

Kotlin æ˜¯ä¸€ç§ç°ä»£è¯­è¨€ï¼Œä¸ºæ¥è‡ª [JetBrains](https://www.jetbrains.com/) çš„ JVM è€Œæ„å»ºã€‚å®ƒå¤§çº¦åœ¨ 10 å¹´å‰é—®ä¸–ï¼Œä½†åœ¨ 2018 å¹´éšç€å…¶åœ¨ Android å¼€å‘ä¸­çš„[å¼•å…¥è€ŒçœŸæ­£å˜å¾—æ›´åŠ æµè¡Œã€‚](https://developer.android.com/kotlin)

æˆ‘è‡ªå·±ä¹Ÿæœ‰ Android å¼€å‘èƒŒæ™¯ï¼Œçœ‹åˆ°è¿™ç§è¯­è¨€ä½¿ç”¨èµ·æ¥æœ‰å¤šæ£’ï¼Œå®ƒå¦‚ä½•å¸®åŠ©æˆ‘ä»¬ç¼–å†™æ›´ç®€æ´ã€é”™è¯¯æ›´å°‘çš„ä»£ç ï¼Œä»¥åŠå›´ç»•å®ƒçš„å·¥å…·/IDE æœ‰å¤šå®Œå–„(JetBrains åœ¨è¿™æ–¹é¢åšå¾—éå¸¸å¥½ğŸ™‚)ï¼Œæˆ‘è‡ªç„¶ä¹Ÿå€¾å‘äºç”¨å®ƒæ¥é¥²å…»é©¯é¹¿ã€‚ä½¿ç”¨ Kotlin è¿˜æ„å‘³ç€æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ Gradle ä½œä¸ºæˆ‘ä»¬çš„æ„å»ºç³»ç»Ÿï¼Œå¹¶åˆ©ç”¨å¤šå¹´æ¥ä½¿ç”¨ Gradle è¿›è¡Œç§»åŠ¨å¼€å‘çš„ç»éªŒã€‚

ç»è¿‡ä¸€æ®µæ—¶é—´çš„è°ƒæŸ¥ï¼Œå¦‚æœæˆ‘ä»¬è¦èµ°æ— æœåŠ¡å™¨è·¯çº¿ï¼Œä¸»è¦çš„æŒ‘æˆ˜ä¼¼ä¹æ˜¯ä¸Šé¢è®¨è®ºçš„ JVM å¯åŠ¨æ—¶é—´ã€‚ç”¨ Kotlin è¿›è¡Œçš„å¿«é€Ÿæµ‹è¯•(æœ€åˆçš„æµ‹è¯•æ˜¯ç”¨ [Spring Cloud Function](https://spring.io/projects/spring-cloud-function) è¿›è¡Œçš„)æ˜¾ç¤ºï¼Œä¸€ä¸ª AWS Lambda å‡½æ•°æ‰§è¡Œèµ·æ¥ç¡®å®éœ€è¦å¤§çº¦ 15 ç§’ã€‚è°¢å¤©è°¢åœ°ï¼Œå‘ç”Ÿäº†ä¸‰ä»¶äº‹:

*   æˆ‘ä»¬å‘ç°äº†ä¸€äº›å…¶ä»–æ›´è½»é‡çº§çš„æ¡†æ¶ï¼Œå¦‚ [Micronaut](https://micronaut.io/) å’Œ [Quarkus](https://quarkus.io/) ï¼Œå®ƒä»¬ä¸“æ³¨äºæ›´å¿«çš„å¯åŠ¨æ—¶é—´å’Œæ›´å°çš„å†…å­˜å ç”¨ã€‚ç¨åä¼šæœ‰æ›´å¤šçš„ä»‹ç»ã€‚
*   æˆ‘ä»¬å‘ç°äº† [GraalVM æœ¬åœ°å›¾åƒ](https://www.graalvm.org/)çš„å¥‡è¿¹ã€‚
*   æœ‰ä¸€äº›è¿¹è±¡è¡¨æ˜ï¼ŒAWS æœ¬èº«å·²ç»æ‰¿è®¤äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶æå‡ºäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œ[æä¾›å¹¶å‘](https://aws.amazon.com/blogs/aws/new-provisioned-concurrency-for-lambda-functions/)ï¼Œè¿™åŸºæœ¬ä¸Šä¿æŒäº†ä¸€äº› lambda å‡½æ•°éšæ—¶å‡†å¤‡å¯åŠ¨ï¼Œå®Œå…¨æ¶ˆé™¤äº†å†·å¯åŠ¨é—®é¢˜ã€‚

è¿™äº›å‘ç°è®©æˆ‘ä»¬æœ€ç»ˆå†³å®šå»æ‰¾ç§‘ç‰¹æ—ï¼Œä»æ­¤æˆ‘ä»¬å†ä¹Ÿæ²¡æœ‰å›å¤´ã€‚æˆ‘ä»¬æœ€ç»ˆæ²¡æœ‰ä½¿ç”¨æä¾›çš„å¹¶å‘æ€§ï¼Œå› ä¸ºä¿æŒ lambda å‡½æ•°å§‹ç»ˆå‡†å¤‡å¥½å¯åŠ¨æœ¬è´¨ä¸Šæ¨¡æ‹Ÿäº†ä¸€ä¸ªå§‹ç»ˆè¿è¡Œçš„åç«¯ï¼Œè¿™æœ‰ç‚¹è¿èƒŒäº†æ— æœåŠ¡å™¨çš„ç›®çš„(æ›´ä¸ç”¨è¯´å®ƒå®é™…ä¸Šæ›´åŠ æ˜‚è´µ)ã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹© Micronaut

å¦‚ä¸Šæ‰€è¿°ï¼Œç¬¬ä¸€æ¬¡å°è¯•æ˜¯ä½¿ç”¨[å¼¹ç°§](https://spring.io/projects/spring-cloud-function)ï¼Œä½†è¿™è¢«è¯æ˜æ˜¯å›°éš¾çš„ï¼Œå› ä¸º:

*   åŠŸèƒ½çš„å¯åŠ¨æ—¶é—´å¾ˆé•¿ã€‚Spring æ˜¯ä¸€ä¸ªç›¸å½“å¤§çš„æ¡†æ¶ï¼Œå®ƒä¾èµ–äºåå°„æ¥å¯åŠ¨ï¼Œå‡æ…¢å®ƒçš„é€Ÿåº¦ã€‚
*   å½“æ—¶åœ¨ Spring æ¡†æ¶ä¸­å¯¹ AWS lambda çš„æ”¯æŒå¹¶ä¸å¤š(æˆ‘ç›¸ä¿¡ä»é‚£ä»¥åäº‹æƒ…å·²ç»æœ‰æ‰€æ”¹å–„)ã€‚
*   å½“æ—¶æ²¡æœ‰å¯¹ GraalVM åŸç”Ÿæ˜ åƒçš„æ”¯æŒ(æœ€è¿‘ä¼¼ä¹æœ‰ä¸€äº›[å®éªŒæ”¯æŒ](https://github.com/spring-projects-experimental/spring-native))

å› æ­¤ï¼Œé‰´äº Spring ä¸æ‰“ç®—å‰Šå‡å®ƒï¼Œæˆ‘ä»¬å¼€å§‹å¯»æ‰¾ä¸Šé¢æåˆ°çš„å…¶ä»–æ¡†æ¶ï¼Œè¿™äº›æ¡†æ¶ä¸“æ³¨äºå¯åŠ¨æ—¶é—´é€Ÿåº¦ã€‚æˆ‘ä»¬æœ€åˆå†³å®šä» Micronaut å¼€å§‹è¯„ä¼° Quarkus å’Œ Microanutï¼Œä½†æˆ‘ä»¬å¯¹ Micronaut éå¸¸æ»¡æ„ï¼Œæ‰€ä»¥æˆ‘ä»¬å†³å®šç»§ç»­è¿›è¡Œï¼æ€»çš„æ¥è¯´ï¼Œå®ƒä¼¼ä¹æ›´å…³æ³¨æ— æœåŠ¡å™¨åœºæ™¯ï¼Œä»¥åŠå…·ä½“çš„ AWS æ•™ç¨‹ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¾ˆå¿«å°±æœ‰äº†ä¸€ä¸ª lambda å‡½æ•°ï¼ŒMicronaut åœ¨ AWS ä¸Šè¿è¡Œï¼Œå®ƒæ¯” Spring æ›´å¿«(ç„¶è€Œï¼Œåœ¨ä½¿ç”¨ GraalVM ä¹‹å‰ï¼Œå®ƒä»ç„¶æ²¡æœ‰è¾¾åˆ°å¯æ¥å—çš„æ°´å¹³)ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒMicronaut:

*   åœ¨ Gitter ä¸Šæœ‰ä¸€ä¸ªå¾ˆæ£’çš„[æ”¯æŒç¤¾åŒº](https://gitter.im/micronautfw/questions)
*   æœ‰ä¸€å¤§å †å…³äºå¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ¡†æ¶çš„ä¾‹å­çš„æ–‡æ¡£ã€‚
*   å…è®¸ä¸ºå•å…ƒæµ‹è¯•æ„å»ºæ•´ä¸ª Micronaut æ¡†æ¶ï¼Œä½¿å¾—è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•å˜å¾—éå¸¸å®¹æ˜“ï¼Œæ ¹æœ¬ä¸éœ€è¦æ¨¡ä»¿ä»»ä½•ä¸œè¥¿ã€‚è¿™å…è®¸æˆ‘ä»¬æœ‰æ•°ç™¾ä¸ªè¿™æ ·çš„é›†æˆæµ‹è¯•ï¼Œè€Œä¸ä¼šå¯¹æµ‹è¯•æ‰§è¡Œæ—¶é—´äº§ç”Ÿå¤§çš„å½±å“ã€‚æˆ‘ä¸å¾—ä¸è¯´ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¯”åœ¨çœŸæ­£çš„æ¡†æ¶ä¸Šè¿è¡Œæµ‹è¯•æ›´å¥½çš„äº†ï¼Œæ²¡æœ‰ä»»ä½•æ¨¡ä»¿ã€‚
*   æœ‰ä¸€ä¸ªçœŸæ­£ä»¤äººæ•¬ç•çš„ [IntelliJ IDEA æ’ä»¶](https://www.jetbrains.com/help/idea/micronaut.html)(ä»…ç”¨äº [IntelliJ IDEA ç»ˆæç‰ˆ](https://www.jetbrains.com/idea/))ï¼Œå®ƒä½¿å¾—å®šä¹‰[æ•°æ®åº“æŸ¥è¯¢](https://micronaut-projects.github.io/micronaut-data/latest/guide/#querying)å˜å¾—éå¸¸å®¹æ˜“ï¼Œåªéœ€æŒ‰ç…§ç‰¹å®šçš„å‘½åçº¦å®šå®šä¹‰æ¥å£å‡½æ•°åç§°ï¼Œç„¶åè®© Micronaut ç”¨æ‰§è¡Œ SQL æ“ä½œçš„ä»£ç ä¸ºæ‚¨å®ç°è¿™äº›æ¥å£ã€‚
*   å†…ç½®äº†å¯¹ Swagger çš„æ”¯æŒï¼Œè¿™ä½¿å¾—å‘å‰ç«¯å›¢é˜Ÿæä¾›å…³äº API çš„å¿…è¦ç»†èŠ‚å˜å¾—éå¸¸å®¹æ˜“ã€‚

> Micronaut å®ç°å…¶[æ€§èƒ½](https://micronaut.io/2020/04/28/practical-performance-comparison-of-spring-boot-micronaut-1-3-micronaut-2-0/)çš„æ–¹æ³•æ˜¯å®Œå…¨ä¸ä½¿ç”¨åå°„ï¼Œè€Œæ˜¯ä½¿ç”¨[æ³¨é‡Šå¤„ç†](https://medium.com/@jintin/annotation-processing-in-java-3621cb05343a)æ¥ç”Ÿæˆæ¡†æ¶è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰ä»£ç ã€‚

## GraalVM

æˆ‘è®¤ä¸º GraalVM å€¼å¾—ä½œä¸ºæœ¬æ–‡çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒçªç„¶å‡ºç°å¹¶èµ¢å¾—äº†è®¸å¤šå¼€å‘äººå‘˜çš„é’çï¼Œå®ƒæä¾›äº† JVM çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå…·æœ‰æ›´å¥½çš„æ€§èƒ½ç‰¹å¾ï¼Œå¹¶ä½¿æ— æœåŠ¡å™¨è¿è¡Œ JVM è¯­è¨€æˆä¸ºå¯èƒ½ã€‚å®ƒæœ‰å¾ˆå¤šç”¨é€”ï¼Œä»åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨å…¶ä»–è¯­è¨€ç¼–å†™çš„åº“ï¼Œä¸€ç›´åˆ°åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ç»„åˆä½¿ç”¨ JavaScriptã€Javaã€Ruby å’Œ Rã€‚

å°†å®ƒä¸ Micronaut å’Œ AWS lambda é›†æˆçš„ç»å†æ— ç–‘è®©æˆ‘ä»¬åº¦è¿‡äº†å‡ ä¸ªä¸çœ ä¹‹å¤œï¼Œå› ä¸ºåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨[åå°„](https://www.graalvm.org/reference-manual/native-image/Reflection/)æˆ–[åŠ¨æ€ä»£ç†](https://www.graalvm.org/reference-manual/native-image/DynamicProxy/)çš„åº“éœ€è¦å®šåˆ¶é…ç½®ï¼Œä½†æ˜¯ä¸€æ—¦æ‚¨ç†è§£äº† GraalVM åŸç”Ÿæ˜ åƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå®ƒå°±å˜æˆäº†ä¸€ä¸ªéå¸¸ç®€åŒ–çš„è¿‡ç¨‹ï¼Œå¾ˆå°‘éœ€è¦å…³æ³¨ã€‚

é‚£ä¹ˆä½¿ç”¨ GraalVM å€¼å¾—å—ï¼Ÿç»å¯¹çš„ï¼ä½¿ç”¨ Micronaut æ‰§è¡Œå†·å¯åŠ¨çš„ REST API è°ƒç”¨éœ€è¦å¤§çº¦ 10 ç§’é’Ÿæ‰èƒ½è¿”å›ï¼Œè€Œä½¿ç”¨ [Graal VM æœ¬æœºæ˜ åƒ](https://www.graalvm.org/reference-manual/native-image/)æ—¶åªéœ€è¦å¤§çº¦ 2 ç§’é’Ÿï¼(å…¶ä¸­å†·å¯åŠ¨å¤§çº¦ä¸º 800 æ¯«ç§’)

# æœ€ç»ˆç»“æœ

ä»¥ä¸‹æ˜¯æˆ‘ä»¬æœ€ç»ˆæ„å»ºçš„ç³»ç»Ÿçš„ä¸»è¦ç»„ä»¶:

*   æ•´ä¸ªåç«¯ç”¨ [Kotlin](https://kotlinlang.org/) ç¼–å†™ï¼Œä½¿ç”¨ [Micronaut æ¡†æ¶](https://micronaut.io/)å’Œ [GraalVM](https://www.graalvm.org/) ã€‚
*   æˆ‘ä»¬ä½¿ç”¨ [Gradle](https://gradle.org/) æ¥æ„å»ºæˆ‘ä»¬çš„åç«¯ Kotlin é¡¹ç›®
*   é€šè¿‡ [TeamCity Cloud](https://www.jetbrains.com/teamcity/cloud/) çš„ CI/CD:æˆ‘ä»¬æœ€åˆå‚ä¸äº† [TeamCity Cloud Beta](https://blog.jetbrains.com/teamcity/2019/12/sign-up-for-the-teamcity-cloud-beta/) ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬è·å¾—äº†ä¸€ä¸ªç›¸å½“æ…·æ…¨çš„å…è´¹ä¿¡ç”¨åŒ…ï¼Œä»¥æ¢å–è¯•ç”¨ TeamCity çš„äº‘äº§å“ã€‚ä¸€æ—¦æµ‹è¯•ç‰ˆåœ¨ 2021 å¹´ 6 æœˆå®Œæˆï¼Œä½¿ç”¨è¯¥ç³»ç»Ÿçš„ä½“éªŒï¼ŒåŠ ä¸Šä»–ä»¬æ— ä¸ä¼¦æ¯”çš„æ”¯æŒå’Œå¸®åŠ©æ„æ„¿ï¼Œæœ€ç»ˆå°†æˆ‘ä»¬è½¬åŒ–ä¸ºä»˜è´¹å®¢æˆ·ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„ CI/CD é…ç½®å®é™…ä¸Šéƒ½æ˜¯ä½¿ç”¨ä»–ä»¬çš„ [Kotlin DSL](https://www.jetbrains.com/help/teamcity/kotlin-dsl.html) ç¼–å†™çš„ï¼
*   åç«¯æ˜¯ä¸€ä¸ª Rest API(é€šè¿‡ [AWS API ç½‘å…³](https://aws.amazon.com/api-gateway/)æœåŠ¡),æœåŠ¡äºä¸‹ä¸€ä¸ª [React](https://github.com/facebook/react) [ã€‚Js](https://nextjs.org/) Web åº”ç”¨æ‰˜ç®¡åœ¨ [AWS Amplify](https://aws.amazon.com/amplify/) ä¸Šã€‚
*   æ‰€æœ‰ API ç«¯ç‚¹éƒ½è¢«[ä»£ç†](https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-lambda-proxy-integrations.html)åˆ° [AWS lambda](https://aws.amazon.com/lambda/) å‡½æ•°ï¼Œä¸ [MySQL RDS æ•°æ®åº“](https://aws.amazon.com/rds/)å¯¹è¯ã€‚
*   æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª [Cognito](https://aws.amazon.com/cognito/) [ç”¨æˆ·æ± ](https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-user-identity-pools.html)è¿›è¡Œè®¤è¯å’Œç”¨æˆ·ç®¡ç†ï¼Œå®ƒé€šè¿‡ä¸€ä¸ª [Cognito æˆæƒå™¨](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-integrate-with-cognito.html)è¿æ¥åˆ° AWS API ç½‘å…³ã€‚æˆ‘ä»¬è¿˜é€šè¿‡ GitHub ä½¿ç”¨ [Open ID Connect](https://openid.net/connect/) (OIDC ),å¹¶å°†[GitHub-cognito-OpenID-wrapper](https://github.com/TimothyJones/github-cognito-openid-wrapper)åº“ä½œä¸º lambdas éƒ¨ç½²åˆ°æˆ‘ä»¬çš„ AWS åŸºç¡€è®¾æ–½ï¼Œä½¿ GitHub OIDC å…¼å®¹ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥å°†å…¶è¿æ¥åˆ° cogni toã€‚
*   æ‰€æœ‰ AWS åŸºç¡€è®¾æ–½éƒ½é€šè¿‡ [AWS CloudFormation](https://aws.amazon.com/cloudformation/) è¿›è¡Œç®¡ç†ã€‚
*   æˆ‘ä»¬ä½¿ç”¨ [AWS æ— æœåŠ¡å™¨åº”ç”¨æ¨¡å‹](https://aws.amazon.com/serverless/sam)æ¥å¸®åŠ©ç®¡ç†æˆ‘ä»¬çš„æ— æœåŠ¡å™¨åŸºç¡€è®¾æ–½ã€‚
*   3 ä¸ªç¯å¢ƒ:å¼€å‘ã€è¯•è¿è¡Œå’Œç”Ÿäº§ï¼Œç”±ç›¸åŒçš„äº‘å½¢æˆè„šæœ¬é…ç½®ã€‚

# æœ€åçš„æƒ³æ³•

å›é¡¾è¿‡å»ï¼Œæˆ‘ä»¬å¯¹è‡ªå·±åšå‡ºçš„æŠ€æœ¯é€‰æ‹©éå¸¸æ»¡æ„:AWS Lambda ä¸ Kotlin å’Œ Micronaut ä¸€èµ·å¸®åŠ©è¿™ä¸ªé¡¹ç›®å¿«é€Ÿå‘å‰å‘å±•ï¼Œæ›´ä¸ç”¨è¯´æ„å»ºè¿™äº›ç³»ç»ŸçœŸçš„å¾ˆæœ‰è¶£ï¼

æ­£æ˜¯è¿™äº›æŠ€æœ¯åŠ ä¸Š GraalVM çš„ç»“åˆå¯¼è‡´äº†è¿™ä¸ªç»“æœï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆå¹¸è¿ï¼Œå½“æˆ‘ä»¬å¼€å§‹æ„å»º Caribou æ—¶ï¼Œè¿™äº›æŠ€æœ¯å·²ç»è¶³å¤Ÿæˆç†Ÿäº†ã€‚

```
You can help your teams fight the war against technical debt by checking out Caribou [here](https://www.hellocaribou.com/).
```