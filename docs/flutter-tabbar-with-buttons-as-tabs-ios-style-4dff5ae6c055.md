# Flutter:ä»¥æŒ‰é’®ä½œä¸ºæ ‡ç­¾çš„æ ‡ç­¾æ 

> åŸæ–‡ï¼š<https://betterprogramming.pub/flutter-tabbar-with-buttons-as-tabs-ios-style-4dff5ae6c055>

## å°±åƒåœ¨ IOS åº”ç”¨ä¸Šçœ‹åˆ°çš„é‚£æ ·

![](img/9b4c9b02d232dc029b7862b0dd0050a7.png)

å¸¦æœ‰ä¸¤ä¸ªä¸åŒæ´»åŠ¨æ ‡ç­¾çš„ç»“æœæˆªå›¾ã€‚

å½“å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘éœ€è¦ä¸€ä¸ªå¸¦æœ‰æŒ‰é’®çš„æ ‡ç­¾æ ã€‚æ‰¾äº†ä¸€åœˆï¼Œä»€ä¹ˆéƒ½æ²¡æ‰¾åˆ°ï¼›é»˜è®¤çš„ TabBar å°éƒ¨ä»¶æ²¡æœ‰è¿™ä¸ªé€‰é¡¹ï¼Œå› æ­¤ï¼Œæˆ‘å†³å®šè‡ªå·±åˆ¶ä½œå®ƒã€‚

(æˆ‘å¯¹ Flutter è¿˜æ¯”è¾ƒé™Œç”Ÿï¼Œæ‰€ä»¥è¯·è®°ä½è¿™ä¸€ç‚¹ğŸ¤“)

è¿™ç§ç±»å‹çš„ TabBar åœ¨ IOS åº”ç”¨ä¸­ä¼¼ä¹å¾ˆå¸¸è§ï¼Œä½†æˆ‘ç”¨çš„æ˜¯ Androidï¼Œæ‰€ä»¥æˆ‘ä¸ç¡®å®šã€‚æ— è®ºå¦‚ä½•ï¼Œä¸‹é¢æ˜¯æˆ‘æƒ³è¦å®Œæˆçš„ä¸€ä¸ªä¾‹å­(å¸¦æœ‰æŒ‰é’®çš„ TabBar:â€œç”µå½±â€ã€â€œç”µè§†èŠ‚ç›®â€å’Œâ€œä½“è‚²â€):

![](img/13b62660261563dca8b725004ce3c51b.png)

Apple TV åº”ç”¨ç¨‹åºçš„å±å¹•æˆªå›¾ã€‚TabBar é£æ ¼æ˜¯æˆ‘çš„ç›®æ ‡ã€‚

# ç»“æœ

æˆ‘èƒ½å¤Ÿå®ç°è¿™ä¸ªç»“æœï¼Œå®ƒå…·æœ‰æˆ‘é¢„æƒ³çš„è¡Œä¸º:

![](img/fd5b96165e0e2122bc3aa17160f9e3d5.png)

å¼€å‘çš„ TabBar æ¼”ç¤ºã€‚

# **å®Œæ•´ä»£ç **

è¿™æ˜¯å®Œæ•´çš„å·¥ä½œä»£ç ï¼ä½ å¯ä»¥éšæ„ä½¿ç”¨å’Œä¿®æ”¹å®ƒã€‚

**è¯´æ˜:**

å¥½å§ï¼Œæˆ‘å¸Œæœ›æˆ‘èƒ½è§£é‡Šä¸€ä¸‹æˆ‘æ˜¯æ€ä¹ˆåšçš„ã€‚å¦‚æœæœ€åä½ è¿˜æœ‰ä¸€äº›é—®é¢˜ï¼Œæ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºã€‚

é¦–å…ˆï¼Œä¸€ä¸ªäººå¿…é¡»å¯åŠ¨æ‰€æœ‰éœ€è¦çš„å˜é‡å’Œæ§åˆ¶å™¨ï¼Œç”¨äºåº”ç”¨ç¨‹åºçš„åŠ¨ç”»å’Œæ§åˆ¶ã€‚é€‰é¡¹å¡çš„æ•°é‡åŠå…¶å¯¹åº”çš„å›¾æ ‡ä¹Ÿåœ¨è¿™ä¸€éƒ¨åˆ†ä¸­é€‰æ‹©ã€‚

ä¸€åˆ‡éƒ½æœ‰æ³¨é‡Šï¼Œè¿™æ ·æ›´å®¹æ˜“ç†è§£ã€‚

å¯¹äºåº”ç”¨ç¨‹åºçš„ä¸»ä½“ï¼Œæˆ‘ä½¿ç”¨äº†è„šæ‰‹æ¶ã€‚åœ¨`appBar`ã€*ã€*ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªç®€å•çš„æ–‡æœ¬ä½œä¸ºæ ‡é¢˜ï¼Œåœ¨`body`ä¸­ï¼Œä¸€ä¸ª*åˆ—*æœ‰ä¸¤ä¸ªå­©å­:ä¸€ä¸ª`Container`å¯¹åº”äº TabBarï¼Œå¦ä¸€ä¸ª`Flexible`åŒ…å«`TabBarView`(æˆ‘ä»¬å°†æ˜¾ç¤ºä¸åŒè§†å›¾çš„åœ°æ–¹)ã€‚

åœ¨ TabBar ä¸­ï¼Œä¸€ä¸ª`ListView.builder`ç”¨äºåˆ›å»ºé€‰é¡¹å¡æŒ‰é’®ã€‚æ¯ä¸ªé€‰é¡¹å¡æŒ‰é’®éƒ½æœ‰è‡ªå·±çš„`key`ï¼Œç¨åç”¨äºè·å–æ¯ä¸ªæŒ‰é’®çš„ä½ç½®ã€‚æ¯ä¸ªæŒ‰é’®å†…éƒ¨ç”±ä¸€ä¸ª`AnimatedBuilder`å’Œä¸€ä¸ª`FlatButton`æ„æˆã€‚`AnimatedBuilder`å…è®¸æŒ‰é’®é€‰æ‹©åŠ¨ç”»çš„æ·¡å…¥/æ·¡å‡ºã€‚

å½“æŒ‰ä¸‹æŒ‰é’®æ—¶ï¼Œä¼šè§¦å‘åˆ¶è¡¨ç¬¦æ›´æ”¹å’Œæ»šåŠ¨åŠ¨ç”»ï¼Œå¹¶è®¾ç½®å½“å‰ç´¢å¼•ã€‚

ç°åœ¨æ˜¯æ£˜æ‰‹çš„éƒ¨åˆ†:å¤„ç†åŠ¨ç”»ã€‚è¿™éå¸¸å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œä½†æˆ‘ç›¸ä¿¡æˆ‘èƒ½å¤Ÿåˆ›é€ å‡ºä¸€äº›å·¥ä½œè‰¯å¥½çš„ä¸œè¥¿ï¼Œèƒ½å¤Ÿé€‚åº”ä¸åŒæ•°é‡çš„æ ‡ç­¾ã€å±å¹•å¤§å°å’Œæ–¹å‘ã€‚

æˆ‘æ¥åˆ†è§£ä¸€ä¸‹ã€‚ä»æ ‡ç­¾å˜åŒ–åŠ¨ç”»æ—¶è§¦å‘çš„`listener`å¼€å§‹:

å˜é‡`_aniValue`å°†åŒ…å«åŠ¨ç”»å€¼ã€‚æƒ³è±¡ä¸€ä¸‹`TabViews`æ˜¯å¤šå¼ çº¸ï¼Œä¸€å¼ çº¸çš„å®½åº¦å¹¶æ’æ”¾ç½®ï¼Œè¿™å¯¼è‡´ä¸€ä¸ªå®½åº¦ä¸º N çš„å¤§çŸ©å½¢ï¼Œå…¶ä¸­ N å¯¹åº”äºæ ‡ç­¾çš„æ•°é‡ã€‚ä»-0.5 åˆ° 0.5ï¼Œæˆ‘ä»¬æœ‰ç¬¬ä¸€ä¸ªé€‰é¡¹å¡ï¼Œä» 0.5 åˆ° 1.5ï¼Œæˆ‘ä»¬æœ‰ç¬¬äºŒä¸ªï¼Œä¾æ­¤ç±»æ¨ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬ä»ä¸€ä¸ªé€‰é¡¹å¡æ»‘åŠ¨åˆ°å¦ä¸€ä¸ªé€‰é¡¹å¡æ—¶ï¼Œæˆ‘ä»¬å°†åŠ¨ç”»å€¼ä» 0 æ›´æ”¹ä¸º 1ï¼Œ*å³*ï¼Œæˆ‘ä»¬å°†ä»ç¬¬ä¸€ä¸ªé€‰é¡¹å¡æ»‘åŠ¨åˆ°ç¬¬äºŒä¸ªé€‰é¡¹å¡ã€‚

![](img/9a2413214390bb025c2a1ce0d8cb4be5.png)

åˆ·å¡çš„å¤„ç†ã€‚

æˆ‘ä»¬åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­å¤„ç†æŒ‰é’®ç‚¹å‡»ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿å®ƒä¸æ˜¯ä¸€ä¸ª`buttonTap`ã€‚æˆ‘ä»¬è¿˜æ£€æŸ¥å‰ä¸€ä¸ªåŠ¨ç”»å€¼å’Œå½“å‰åŠ¨ç”»å€¼ä¹‹é—´çš„å·®å€¼æ˜¯å¦å°äº 1ã€‚å¦‚æœæ»‘åŠ¨é€Ÿåº¦å¤ªå¿«ï¼Œä¼šå‡ºç°ä¸€ç§å¥‡æ€ªçš„è¡Œä¸ºï¼ŒåŠ¨ç”»å€¼ä¼šè·³åˆ°æ‰€éœ€å€¼çš„æ—è¾¹ã€‚æˆ‘çŸ¥é“ï¼Œè¿™å¾ˆå¥‡æ€ªï¼Œä½†å®ƒå‘ç”Ÿäº†ï¼Œä»¥ä¸Šç¡®ä¿äº†æ»‘åŠ¨åŠ¨ç”»ä¸ä¼šè·³è½¬å€¼ã€‚

ç°åœ¨ï¼Œä¸ºäº†ç¡®ä¿ç‚¹å‡»æŒ‰é’®æ—¶æŒ‰é’®åŠ¨ç”»ä¹Ÿå‘ç”Ÿ:

é€‰é¡¹å¡å˜åŒ–åŠ¨ç”»æ˜¯ç”±`_controller.animateTo(index)`åœ¨æŒ‰é’®`onPress`æ–¹æ³•ä¸­è§¦å‘çš„ï¼Œå› æ­¤ï¼Œæœ¬èŠ‚åªè§¦å‘æŒ‰é’®åŠ¨ç”»ã€‚æŒ‰é’®åŠ¨ç”»åœ¨`_setCurrentIndex()`å†…è§¦å‘:

ç¬¬ä¸€ç§æ–¹æ³•ç”¨æ›´æ–°çš„ç´¢å¼•è®¾ç½®æ–°çš„`State`ï¼Œè§¦å‘æŒ‰é’®çš„æ·¡å…¥/æ·¡å‡ºä»¥åŠæ»šåŠ¨åŠ¨ç”»:

å¦‚æœå¯èƒ½çš„è¯ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯æ»šåŠ¨ç±»å‹çš„ TabBarï¼Œ*å³*ï¼Œå¦‚æœæŒ‰é’®çš„æ•°é‡ä¸é€‚åˆå±å¹•å®½åº¦ï¼ŒTabBar ä¼šå°è¯•å°†æ¯ä¸ªæŒ‰é’®å±…ä¸­ã€‚å¦‚æœä¸éœ€è¦æ»šåŠ¨ï¼Œå°±æ²¡æœ‰æ»šåŠ¨ã€‚

![](img/a36c07eeef7f1f5ce3035c30d68b5470.png)

æŒ‰é’®å¼€å…³çš„æ“ä½œã€‚

ä»£ç é¦–å…ˆæ£€æŸ¥æŒ‰é’®ç¦»å±å¹•ä¸­é—´æœ‰å¤šè¿œã€‚å¦‚æœå®ƒåœ¨å·¦è¾¹ï¼Œå®ƒä¼šæ£€æŸ¥æŒ‰é’®çš„å·¦è¾¹æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥æ»šåŠ¨ TabBar å¹¶ä½¿æŒ‰é’®å±…ä¸­ã€‚ç¬¬ä¸€ä¸ªé€‰é¡¹å¡æŒ‰é’®çš„å·¦ä¾§ä¸ä¼šç¦»å¼€å±å¹•çš„å·¦ä¾§ã€‚å¦‚æœæŒ‰é’®åœ¨ä¸­é—´å±å¹•çš„å³è¾¹ï¼Œä¹Ÿè¦åšåŒæ ·çš„äº‹æƒ…ï¼Œè€Œä¸”è¦ç¡®ä¿æœ€åä¸€ä¸ªæ ‡ç­¾æŒ‰é’®çš„å³è¾¹ä¸ä¼šç¦»å¼€å±å¹•çš„å³è¾¹ã€‚

è¿™å°±æ˜¯æ‰€æœ‰çš„äººï¼æˆ‘å°†åœ¨è¿™é‡Œå†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œè¯´æ˜ TabBar å¦‚ä½•å¤„ç†æ›´å°‘çš„æ ‡ç­¾å¹¶å¯¹æ–¹å‘å˜åŒ–åšå‡ºååº”ã€‚æˆ‘å¸Œæœ›æ‚¨ä¼šå‘ç°è¿™å¾ˆæœ‰ç”¨ï¼Œå¹¶ä¸”å¯ä»¥èŠ‚çœä¸€äº›å·¥ä½œå’Œè°ƒè¯•æ—¶é—´ã€‚

![](img/473422cb43584d0e2cb4af0db7b8564d.png)

TabBar ä½¿ç”¨è¾ƒå°‘æ•°é‡çš„é€‰é¡¹å¡ï¼Œå¹¶å¯¹æ–¹å‘å˜åŒ–åšå‡ºååº”ã€‚

å®Œæ•´ä»£ç :

[](https://github.com/Afonsocraposo/TabBar-with-Button-Tabs-IOS-style-) [## afonscorposo/TabBar-å¸¦æŒ‰é’®æ ‡ç­¾-IOS é£æ ¼-

### åœ¨ GitHub ä¸Šåˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼Œä¸º afonscoproso/TabBar-with Button-Tabs-IOS-style-development åšè´¡çŒ®ã€‚

github.com](https://github.com/Afonsocraposo/TabBar-with-Button-Tabs-IOS-style-) 

> æˆ‘æœ€è¿‘åœ¨ 2020 å¹´ 4 æœˆ 24 æ—¥çš„[https://pub.dev/](https://pub.dev/)ä¸Šå‘å¸ƒäº†è¿™ä¸ªé¡¹ç›®:

[](https://pub.dev/packages/buttons_tabbar) [## buttons_tabbar | Flutter åŒ…

### å¼€æºçš„ Flutter åŒ…ï¼Œtabbarï¼Œå…¶ä¸­æ¯ä¸ªæ ‡ç­¾æŒ‡ç¤ºå™¨éƒ½æ˜¯ä¸€ä¸ªåˆ‡æ¢æŒ‰é’®ã€‚ç”± Afonso Raposo åˆ¶ä½œã€‚æŸ¥çœ‹å®Œæ•´çš„â€¦

å…¬å…±å¼€å‘](https://pub.dev/packages/buttons_tabbar)