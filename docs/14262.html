<html>
<head>
<title>Create a Horizontal Picker View Using UICollectionView in iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨iOSä¸­çš„UICollectionViewåˆ›å»ºæ°´å¹³é€‰å–å™¨è§†å›¾</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://betterprogramming.pub/create-a-simple-horizontal-picker-view-from-scratch-using-swift-5-on-ios-16-a25b1f194426?source=collection_archive---------9-----------------------#2022-11-22">https://betterprogramming.pub/create-a-simple-horizontal-picker-view-from-scratch-using-swift-5-on-ios-16-a25b1f194426?source=collection_archive---------9-----------------------#2022-11-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="69de" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">ä½¿ç”¨Swift 5</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e462d20bcf81b8230866e1ee9540fb87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ihiRM8_hNfc-6MdlYux4cw.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">ä½œè€…å›¾ç‰‡</p></figure><p id="4021" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ç”±äºç”Ÿæ´»ã€è‡ªç”±èŒä¸šã€åšå‰¯ä¸šé¡¹ç›®<a class="ae lr" href="https://apps.apple.com/us/app/nossaflex/id1523558285" rel="noopener ugc nofollow" target="_blank"> NOSSAFLEX </a>ï¼Œå·²ç»å¾ˆä¹…æ²¡æœ‰å†™è¿‡æ•™ç¨‹äº†ã€‚</p><p id="a326" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å°½ç®¡å¦‚æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸Šå·¥ä½œéœ€è¦æˆ‘ä»¬çš„æµ‹å…‰è¡¨æœ‰ä¸€ä¸ªæ°´å¹³çš„é€‰æ‹©å™¨è§†å›¾ã€‚</p><p id="08e3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘èŠ±äº†å¾ˆé•¿æ—¶é—´å¯»æ‰¾åˆ›å»ºæ°´å¹³æ‹¾å–å™¨çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘è¯•ç€æ—‹è½¬UIPickerï¼Œä½†è¿™éå¸¸ä¸åˆ‡å®é™…ï¼Œå®šåˆ¶ä¹Ÿå—åˆ°é™åˆ¶ã€‚æˆ‘è¯•å›¾å¯»æ‰¾åœ¨çº¿è§£å†³æ–¹æ¡ˆï¼Œä½†æ‰¾ä¸åˆ°ä»»ä½•æœ‰ç›Šçš„ä¸œè¥¿ã€‚æˆ‘æ‰¾åˆ°çš„æœ€å¥½ç­”æ¡ˆæ˜¯æ¥è‡ª<a class="ae lr" href="https://iosacademy.io/" rel="noopener ugc nofollow" target="_blank"> iOS Academy </a>çš„<a class="ae lr" href="https://github.com/AfrazCodes/Swift-HorizontalPickerView" rel="noopener ugc nofollow" target="_blank"> AfrazCodes </a>ã€‚è¿™ä¸ªè§£å†³æ–¹æ¡ˆå·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†æ˜¯æˆ‘éœ€è¦ä¸€äº›æ›´é€‚åˆçš„ä¸œè¥¿ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨æ»šåŠ¨å•å…ƒæ ¼åˆ†é¡µã€‚</p><p id="4f9d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">è¿™æ˜¯æˆ‘ç”¨ç®€å•çš„æ°´å¹³é€‰æ‹©å™¨è§†å›¾åˆ›å»ºçš„è§£å†³æ–¹æ¡ˆçš„æ¼”ç¤ºã€‚</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="650f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘å¿…é¡»æ„Ÿè°¢æˆ‘å¯¹AfrazCodesçš„è§£å†³æ–¹æ¡ˆã€‚ä»–çš„è§£å†³æ–¹æ¡ˆå¸®åŠ©æˆ‘å®ç°äº†æˆ‘æ‰€éœ€è¦çš„ã€‚</p><p id="ee45" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">è¿™ä¸ªè§£å†³æ–¹æ¡ˆå¾ˆç®€å•ã€‚å®ƒä½¿ç”¨UICollectionViewï¼Œä¸éœ€è¦æ·»åŠ ä»»ä½•ä¸æ˜ç¡®çš„ä»£ç ã€‚</p><h2 id="5a95" class="lu lv iq bd lw lx ly dn lz ma mb dp mc le md me mf li mg mh mi lm mj mk ml mm bi translated"><strong class="ak">ä¸»è¦åŠŸèƒ½åŒ…æ‹¬</strong></h2><ul class=""><li id="5535" class="mn mo iq kx b ky mp lb mq le mr li ms lm mt lq mu mv mw mx bi translated">å•å…ƒæ ¼çªå‡ºæ˜¾ç¤º/é€‰æ‹©</li><li id="7493" class="mn mo iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">ä½¿ç”¨å‡½æ•°è°ƒç”¨æ»šåŠ¨åˆ°ä¸€ä¸ªå•å…ƒæ ¼</li><li id="9f11" class="mn mo iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">å¸¦/ä¸å¸¦é›†åˆå‡é€Ÿçš„è‡ªåŠ¨æ»šåŠ¨è§†å›¾</li><li id="63a0" class="mn mo iq kx b ky my lb mz le na li nb lm nc lq mu mv mw mx bi translated">æ¯ä¸ªå•å…ƒçš„å®Œå…¨å®šåˆ¶</li></ul><p id="933a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">NOSSAFLEXè®¾è®¡è¦æ±‚é€‰å®šçš„å•å…ƒæ ¼å·¦å¯¹é½ï¼Œä½†æˆ‘å°†åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿é€‰å®šçš„å•å…ƒæ ¼å±…ä¸­ã€‚å¯¹äºæ„Ÿå…´è¶£çš„äººï¼Œæˆ‘å°†åœ¨æœ¬æ–‡æœ«å°¾æ·»åŠ æˆ‘åœ¨NOSSAFLEXä¸­ä½¿ç”¨çš„ä»£ç ï¼Œè¯¥ä»£ç å…è®¸æˆ‘å°†é€‰å®šçš„å•å…ƒæ ¼é å·¦å¯¹é½ã€‚</p><p id="ce99" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¦‚æœä½ æƒ³ä¸‹è½½è¿™ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåˆ°GitHub Repoçš„é“¾æ¥ã€‚</p><p id="44e2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">è®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><h1 id="e1c7" class="nd lv iq bd lw ne nf ng lz nh ni nj mc jw nk jx mf jz nl ka mi kc nm kd ml nn bi translated">å…ˆå†³æ¡ä»¶</h1><p id="b8b0" class="pw-post-body-paragraph kv kw iq kx b ky mp jr la lb mq ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">æœ¬æ•™ç¨‹çš„ä¸€äº›å…ˆå†³æ¡ä»¶æ˜¯å°†<code class="fe nr ns nt nu b">UICollectionViewFlowLayout</code>æ»šåŠ¨æ–¹å‘è®¾ç½®ä¸º. horizontalã€‚</p><p id="4437" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">åœ¨<code class="fe nr ns nt nu b">UICollectionViewCell</code>ä¸­ï¼Œæˆ‘æœ‰ä¸€ä¸ªåä¸º<code class="fe nr ns nt nu b">configure()</code>çš„å…¬å…±å‡½æ•°ã€‚æ­¤åŠŸèƒ½å°†è®¾ç½®é€‰å®šçš„å•å…ƒæ ¼ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="3140" class="nz lv iq nu b be oa ob l oc od">public func configure(with title: String, isSelected: Bool = false) {<br/>    titleLabel.text = title<br/>    backgroundColor = isSelected ? .green : .darkGray<br/>}</span></pre><p id="22ab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¦‚æœå•å…ƒæ ¼è¢«é€‰ä¸­ï¼Œæˆ‘ä»¬å°†æ”¹å˜èƒŒæ™¯ä¸º<code class="fe nr ns nt nu b">.green</code>ï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬å°†è®¾ç½®ä¸º<code class="fe nr ns nt nu b">.darkGray</code>ã€‚</p><p id="cd29" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¦‚æœä½ æ­£åœ¨è·Ÿè¸ªæˆ‘çš„å›è´­ï¼Œè¿™æ˜¯å®ƒç›®å‰çš„æ ·å­ã€‚åªæ˜¯ä¸€ä¸ªç®€å•çš„æ¨ª<code class="fe nr ns nt nu b">collectionview</code>ã€‚</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><h1 id="81c8" class="nd lv iq bd lw ne nf ng lz nh ni nj mc jw nk jx mf jz nl ka mi kc nm kd ml nn bi translated">é€‰æ‹©åŠŸèƒ½</h1><p id="6f6b" class="pw-post-body-paragraph kv kw iq kx b ky mp jr la lb mq ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">è®©æˆ‘ä»¬é¦–å…ˆåˆ›å»º<code class="fe nr ns nt nu b">select()</code>å‡½æ•°ã€‚</p><p id="a2ec" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå˜é‡æ¥è·Ÿè¸ªé€‰ä¸­çš„<code class="fe nr ns nt nu b">IndexPath</code>ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="e685" class="nz lv iq nu b be oa ob l oc od">var selectedCellIndexPath: IndexPath?</span></pre><p id="d6af" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®ç°<code class="fe nr ns nt nu b">select()</code>åŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„è§£å†³æ–¹æ¡ˆ:</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="caea" class="nz lv iq nu b be oa ob l oc od">/// Scrolls to selected cell<br/>/// - Parameters:<br/>///   - row: row index<br/>///   - section: Section index<br/>///   - animated: Animated boolean<br/>public func select(<br/>    row: Int,<br/>    in section: Int = 0,<br/>    animated: Bool = true<br/>) {<br/>    // Ensures selected row isnt more then data count<br/>    guard row &lt; data.count else { return }<br/>    <br/>    // removes any selected item<br/>    cleanupSelection()<br/>    <br/>    // set new selected item<br/>    let indexPath = IndexPath(row: row, section: section)<br/>    selectedCellIndexPath = indexPath<br/>    <br/>    // Update selected cell<br/>    let cell = collectionView.cellForItem(at: indexPath) as? HorizontalPickerViewCell<br/>    cell?.configure(<br/>        with: data[indexPath.row],<br/>        isSelected: true<br/>    )<br/>    <br/>    collectionView.selectItem(<br/>        at: indexPath,<br/>        animated: animated,<br/>        scrollPosition: .centeredHorizontally)<br/>}</span></pre><p id="cf07" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ä¸‹é¢æ˜¯è¯¥å‡½æ•°çš„åˆ†è§£ã€‚</p><p id="f419" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬æ£€æŸ¥é€‰æ‹©çš„<code class="fe nr ns nt nu b">row</code>æ˜¯å¦å°äºæ•°ç»„ä¸­çš„<code class="fe nr ns nt nu b">data</code>çš„æ•°é‡ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="563b" class="nz lv iq nu b be oa ob l oc od">// Ensures selected row isnt more then data count<br/>guard row &lt; data.count else { return }</span></pre><p id="3df3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬å°†åˆ é™¤ä»»ä½•ç°æœ‰çš„é€‰å®šè¡Œã€‚</p><p id="8146" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æ¥ä¸‹æ¥æˆ‘ä»¬å°†è®¨è®º<code class="fe nr ns nt nu b">cleanUpSection()</code>å‡½æ•°ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="72cf" class="nz lv iq nu b be oa ob l oc od">// removes any selected item<br/>cleanupSelection()</span></pre><p id="38e3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬æ›´æ–°<code class="fe nr ns nt nu b">selectedCellIndexPath</code>å˜é‡å¹¶æ›´æ–°<code class="fe nr ns nt nu b">UICollectionView</code>ä¸­çš„å•å…ƒæ ¼ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="a56f" class="nz lv iq nu b be oa ob l oc od">// set new selected item<br/>let indexPath = IndexPath(row: row, section: section)<br/>selectedCellIndexPath = indexPath<br/><br/>// Update selected cell<br/>let cell = collectionView.cellForItem(at: indexPath) as? HorizontalPickerViewCell<br/>cell?.configure(<br/>    with: data[indexPath.row],<br/>    isSelected: true<br/>)</span></pre><p id="5f79" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ç„¶åæˆ‘ä»¬æ»šåŠ¨åˆ°è¯¥é¡¹ç›®ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="89e7" class="nz lv iq nu b be oa ob l oc od">// Use this for horizontal centering<br/>collectionView.selectItem(<br/>        at: indexPath,<br/>        animated: animated,<br/>        scrollPosition: .centeredHorizontally)</span></pre><p id="6fb9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ä»¥ä¸‹æ˜¯<code class="fe nr ns nt nu b">cleanupSelection()</code>åŠŸèƒ½çš„è§£å†³æ–¹æ¡ˆã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="b34f" class="nz lv iq nu b be oa ob l oc od">/// Cleans up prior highlighted selection<br/>private func cleanupSelection() {<br/>    guard let indexPath = selectedCellIndexPath else { return }<br/>    let cell = collectionView.cellForItem(at: indexPath) as? HorizontalPickerViewCell<br/>    cell?.configure(with: data[indexPath.row])<br/>    selectedCellIndexPath = nil<br/>}</span></pre><p id="532b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">è¯¥å‡½æ•°è·å–<code class="fe nr ns nt nu b">selectedCellIndexPath</code>å˜é‡ï¼Œå¹¶å°†<code class="fe nr ns nt nu b">UICollectionView</code>ä¸­çš„å•å…ƒæ ¼è®¾ç½®ä¸ºfalseã€‚</p><p id="58c5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ç°åœ¨è®©æˆ‘ä»¬è°ƒç”¨<code class="fe nr ns nt nu b">didSelect</code>å§”æ‰˜å‡½æ•°ä¸­çš„<code class="fe nr ns nt nu b">select()</code>å‡½æ•°ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="1636" class="nz lv iq nu b be oa ob l oc od">func collectionView(_ collectionView: UICollectionView, didSelectItemAt indexPath: IndexPath) {<br/>    select(row: indexPath.row)<br/>}</span></pre><p id="c358" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">è¿è¡Œåº”ç”¨ç¨‹åºå¹¶æŸ¥çœ‹å…¶è¿è¡Œæƒ…å†µã€‚</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="b178" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ç›®å‰ï¼Œç¬¬ä¸€ä¸ªå’Œæœ€åä¸¤ä¸ªå•å…ƒæ ¼ä¸å±…ä¸­å¯¹é½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ insetsã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="1d54" class="nz lv iq nu b be oa ob l oc od">func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, insetForSectionAt section: Int) -&gt; UIEdgeInsets {<br/>    let inset = view.frame.width/2 - (cellWidth/2)<br/>    return UIEdgeInsets(<br/>        top: 0,<br/>        left: inset,<br/>        bottom: 0,<br/>        right: inset<br/>    )<br/>}</span></pre><p id="416b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ä¸ºäº†ä½¿å•å…ƒæ ¼çš„è¾¹ç¼˜å±…ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°è§†å›¾å®½åº¦çš„ä¸€åŠï¼Œç„¶åå‡å»å•å…ƒæ ¼å®½åº¦çš„ä¸€åŠã€‚ç°åœ¨ï¼Œå½“æˆ‘ä»¬è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œæ‰€æœ‰å•å…ƒæ ¼éƒ½å¯ä»¥æ»šåŠ¨åˆ°ä¸­å¿ƒã€‚</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><h1 id="ca61" class="nd lv iq bd lw ne nf ng lz nh ni nj mc jw nk jx mf jz nl ka mi kc nm kd ml nn bi translated">å‡é€Ÿå’Œæ»šåŠ¨é€‰æ‹©</h1><p id="2157" class="pw-post-body-paragraph kv kw iq kx b ky mp jr la lb mq ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡æ»šåŠ¨æ¥é€‰æ‹©å•å…ƒæ ¼ã€‚</p><p id="5075" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬è¦è°ƒç”¨<code class="fe nr ns nt nu b">scrollViewDidEndDragging</code>å’Œ<code class="fe nr ns nt nu b">scrollViewDidEndDecelerating</code>ã€‚</p><p id="f122" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æ ¹æ®è‹¹æœæ–‡ä»¶:</p><p id="67d6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nr ns nt nu b"><a class="ae lr" href="https://developer.apple.com/documentation/uikit/uiscrollviewdelegate/1619436-scrollviewdidenddragging" rel="noopener ugc nofollow" target="_blank">scrollViewDidEndDragging</a> </code> â€”åœ¨æ»šåŠ¨è§†å›¾ä¸­å‘Šè¯‰ä»£ç†æ‹–åŠ¨ä½•æ—¶ç»“æŸã€‚</p><p id="7a2b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nr ns nt nu b"><a class="ae lr" href="https://developer.apple.com/documentation/uikit/uiscrollviewdelegate/1619417-scrollviewdidenddecelerating" rel="noopener ugc nofollow" target="_blank">scrollViewDidEndDecelerating</a> </code> â€”å‘Šè¯‰ä»£è¡¨æ»šåŠ¨è§†å›¾ç»“æŸï¼Œä½¿æ»šåŠ¨è¿åŠ¨å‡é€Ÿã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="a4bf" class="nz lv iq nu b be oa ob l oc od">func scrollViewDidEndDragging(_ scrollView: UIScrollView, willDecelerate decelerate: Bool) {<br/>    // if decelerate doesnt occur, scrollToCell<br/>    if !decelerate {<br/>        scrollToCell()<br/>    } // else wait until decleration ends to scrollToCell<br/>}<br/><br/>func scrollViewDidEndDecelerating(_ scrollView: UIScrollView) {<br/>    // scroll to cell<br/>    scrollToCell()<br/>}</span></pre><p id="9f60" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">è¿™ä¸¤ä¸ªå§”æ‰˜å‡½æ•°å¯ä»¥å¤„ç†è°ƒç”¨<code class="fe nr ns nt nu b">scrollToCell()</code>çš„ç”¨æˆ·äº¤äº’ã€‚</p><p id="d225" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ä»¥ä¸‹æ˜¯<code class="fe nr ns nt nu b">scrollToCell().</code>çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="c59a" class="nz lv iq nu b be oa ob l oc od">/// Scrolls to visible cell based on `scrollViewDidEndDragging` or `scrollViewDidEndDecelerating` delegate functions<br/>private func scrollToCell() {<br/>    var indexPath = IndexPath()<br/>    var visibleCells = collectionView.visibleCells<br/>    <br/>    /// Gets visible cells<br/>    visibleCells = visibleCells.filter({ cell -&gt; Bool in<br/>        <br/>        let cellRect = collectionView.convert(<br/>            cell.frame,<br/>            to: collectionView.superview<br/>        )<br/>        /// Calculate if at least 50% of the cell is in the boundaries we created<br/>        let viewMidX = view.frame.midX<br/>        let cellMidX = cellRect.midX<br/>        let topBoundary = viewMidX + cellRect.width/2<br/>        let bottomBoundary = viewMidX - cellRect.width/2<br/>        <br/>        /// A print state representating what the return is calculating<br/>        print("topboundary: \(topBoundary) &gt; cellMidX: \(cellMidX) &gt; Bottom Boundary: \(bottomBoundary)")<br/>        return topBoundary &gt; cellMidX  &amp;&amp; cellMidX &gt; bottomBoundary<br/>    })<br/>    <br/>    /// Appends visible cell index to `cellIndexPath`<br/>    visibleCells.forEach({<br/>        if let selectedIndexPath = collectionView.indexPath(for: $0) {<br/>            indexPath = selectedIndexPath<br/>        }<br/>    })<br/>    <br/>    let row = indexPath.row<br/>    // Disables animation on the first and last cell<br/>    if row == 0 || row == data.count - 1 {<br/>        self.select(row: row, animated: false)<br/>        return<br/>    }<br/>    <br/>    self.select(row: row)<br/>}<br/></span></pre><p id="b06f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬æ­£åœ¨æŠ“å–<code class="fe nr ns nt nu b">UICollectionView</code>ä¸Šæ‰€æœ‰å½“å‰å¯è§çš„å•å…ƒæ ¼ã€‚</p><p id="45d8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æˆ‘ä»¬é€šè¿‡æŠ“å–ä¸Šä¸‹è¾¹ç•Œä¹‹é—´çš„å•å…ƒæ ¼æ¥è¿‡æ»¤å®ƒä»¬ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="e5f7" class="nz lv iq nu b be oa ob l oc od">/// Gets visible cells<br/>visibleCells = visibleCells.filter({ cell -&gt; Bool in<br/>    <br/>    let cellRect = collectionView.convert(<br/>        cell.frame,<br/>        to: collectionView.superview<br/>    )<br/>    /// Calculate if at least 50% of the cell is in the boundaries we created<br/>    let viewMidX = view.frame.midX<br/>    let cellMidX = cellRect.midX<br/>    let topBoundary = viewMidX + cellRect.width/2<br/>    let bottomBoundary = viewMidX - cellRect.width/2<br/>    <br/>    /// A print state representating what the return is calculating<br/>    print("topboundary: \(topBoundary) &gt; cellMidX: \(cellMidX) &gt; Bottom Boundary: \(bottomBoundary)")<br/>    return topBoundary &gt; cellMidX  &amp;&amp; cellMidX &gt; bottomBoundary<br/>})</span></pre><p id="b21e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ä¹‹åï¼Œæˆ‘ä»¬å°†è¯¥å•å…ƒæ ¼çš„<code class="fe nr ns nt nu b">indexPath </code>è®¾ç½®ä¸ºæˆ‘ä»¬åœ¨å‡½æ•°ä¸­åˆ›å»ºçš„indexPathã€‚</p><p id="664a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">ç¦ç”¨ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå•å…ƒæ ¼çš„åŠ¨ç”»æ»šåŠ¨å¯ä»¥é˜²æ­¢åŠ¨ç”»å¤±çœŸã€‚è¿™æ˜¯å› ä¸ºå®ƒè¯•å›¾åŒæ—¶åšä¸¤ä¸ªåŠ¨ç”»ã€‚å•å…ƒæ ¼æ»šåŠ¨çš„å»æŠ–å’Œæ»šåŠ¨åŠ¨ç”»ã€‚</p><p id="57d6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">è°ƒç”¨<code class="fe nr ns nt nu b">select()</code>å‡½æ•°ï¼Œå¹¶æ»šåŠ¨åˆ°è¯¥è¡Œã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="b84f" class="nz lv iq nu b be oa ob l oc od">/// Appends visible cell index to `cellIndexPath`<br/>visibleCells.forEach({<br/>    if let selectedIndexPath = collectionView.indexPath(for: $0) {<br/>        indexPath = selectedIndexPath<br/>    }<br/>})<br/>let row = indexPath.row<br/>// Disables animation on the first and last cell<br/>if row == 0 || row == data.count - 1 {<br/>    self.select(row: row, animated: false)<br/>    return<br/>}<br/><br/>self.select(row: row)</span></pre><p id="03a1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å½“æ‚¨è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨ç°åœ¨åº”è¯¥æ‹¥æœ‰æ–°çš„åŠŸèƒ½ã€‚</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="b7bd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å°±æ˜¯è¿™æ ·ï¼å¦‚æœä½ æƒ³ä¸‹è½½è¿™ä¸ªé¡¹ç›®ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªGitHubå›è´­çš„é“¾æ¥ã€‚</p><h1 id="d7ad" class="nd lv iq bd lw ne nf ng lz nh ni nj mc jw nk jx mf jz nl ka mi kc nm kd ml nn bi translated">å·¦å¯¹é½è§£å†³æ–¹æ¡ˆ</h1><p id="b70e" class="pw-post-body-paragraph kv kw iq kx b ky mp jr la lb mq ju ld le no lg lh li np lk ll lm nq lo lp lq ij bi translated">å¦‚æœæ‚¨æœ‰å…´è¶£åƒæˆ‘åœ¨NOSSALFEXä¸­æ‰€åšçš„é‚£æ ·ï¼Œå°†æ°´å¹³é€‰å–å™¨é…ç½®ä¸ºå·¦å¯¹é½ï¼Œè¿™é‡Œæ˜¯æ‚¨éœ€è¦å®ç°çš„è§£å†³æ–¹æ¡ˆå·®å¼‚ã€‚å½“æ‚¨è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨ç°åœ¨åº”è¯¥æ‹¥æœ‰æ–°çš„åŠŸèƒ½ã€‚</p><p id="11d1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æ›´æ–°è¾¹ç¼˜æ’å›¾ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="ba85" class="nz lv iq nu b be oa ob l oc od">func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, insetForSectionAt section: Int) -&gt; UIEdgeInsets {<br/>    return UIEdgeInsets(<br/>        top: 0,<br/>        left: 0,<br/>        bottom: 0,<br/>        right: view.frame.width - cellWidth<br/>    )<br/>}</span></pre><p id="1d65" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">æ›´æ–°æ»šåŠ¨æ–¹å‘ã€‚</p><pre class="kg kh ki kj gt nv nu nw bn nx ny bi"><span id="f71f" class="nz lv iq nu b be oa ob l oc od">collectionView.selectItem(<br/>        at: indexPath,<br/>     the scrollToCell() function.</span></pre><pre class="oe nv nu nw bn nx ny bi"><span id="ecc1" class="nz lv iq nu b be oa ob l oc od"><br/>/// Scrolls to visible cell based on `scrollViewDidEndDragging` or `scrollViewDidEndDecelerating` delegate functions<br/>private func scrollToCell() {<br/>    var cellIndexPath = [IndexPath]()<br/>    var visibleCells = collectionView.visibleCells<br/>    <br/>    /// Gets visible cells<br/>    visibleCells = visibleCells.filter({ cell -&gt; Bool in<br/>        let cellRect = collectionView.convert(<br/>            cell.frame,<br/>            to: collectionView.superview<br/>        )<br/>        /// Checks if at least 50% of the cell is visible on the `collectionView`<br/>        return cellRect.minX &gt; -((cellWidth)/2)<br/>    })<br/>    <br/>    /// Appends visible cell index to `cellIndexPath`<br/>    visibleCells.forEach({<br/>        if let indexPath = collectionView.indexPath(for: $0) {<br/>            cellIndexPath.append(indexPath)<br/>        }<br/>    })<br/>    <br/>    /// Sorts cell IndexPaths by row<br/>    let sortedIndexPath = cellIndexPath.sorted()<br/>    <br/>    /// Gets first index of cell<br/>    let row = sortedIndexPath[0].row<br/>    // Disables animation on the first and last cell<br/>    if row == 0 || row == data.count - 1 {<br/>        self.select(row: row, animated: false)<br/>        return<br/>    }<br/>    self.select(row: row)<br/>}</span></pre><p id="d1c0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">å¹²æ¯ğŸ»ã€‚</p></div></div>    
</body>
</html>