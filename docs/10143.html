<html>
<head>
<title>Build a Machine Learning Model API Using YOLOv5 With FAST API In 5 steps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨YOLOv5å’ŒFAST APIåˆ†5æ­¥æ„å»ºæœºå™¨å­¦ä¹ æ¨¡å‹API</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://betterprogramming.pub/machine-learning-model-api-using-yolov5-with-fast-api-192f1290a982?source=collection_archive---------0-----------------------#2021-12-04">https://betterprogramming.pub/machine-learning-model-api-using-yolov5-with-fast-api-192f1290a982?source=collection_archive---------0-----------------------#2021-12-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1371" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½ å¥½ã€‚ä»Šå¤©æˆ‘ä»¬å°†åˆ©ç”¨YOLOv5å’ŒFAST apiæ¥æ„å»ºä¸€ä¸ªæœºå™¨å­¦ä¹ APIã€‚</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/fd8c20a09da32d1bb6cfb5a6e142bcc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CX1gFJHknRzvRZ7c"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">jet dela cruz åœ¨<a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</p></figure><p id="cd13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœæ‚¨ä»¥å‰ä½¿ç”¨è¿‡Flaskï¼Œæ‚¨ä¼šå‘ç°ä½¿ç”¨FAST APIå¾ˆå®¹æ˜“ï¼Œå› ä¸ºå®ƒæä¾›äº†ç”Ÿäº§å°±ç»ªä»£ç ï¼Œåªéœ€è¿›è¡Œå°‘é‡è°ƒæ•´ã€‚</p><p id="ca05" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">FAST APIè¿˜é™„å¸¦äº†ä¸OpenAPIçš„è‡ªåŠ¨äº¤äº’æ–‡æ¡£ã€‚é™¤äº†æ›´å¥½çš„å¼€å‘è€…ä½“éªŒä¹‹å¤–ï¼ŒASGI(å¼‚æ­¥æœåŠ¡å™¨ç½‘å…³æ¥å£)ä½¿å¾—FAST APIæˆä¸ºå¯ç”¨çš„æœ€å¿«çš„Pythonæ¡†æ¶ä¹‹ä¸€<a class="ae lb" href="https://www.techempower.com/benchmarks/#section=test&amp;runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&amp;hw=ph&amp;test=query&amp;l=zijzen-7" rel="noopener ugc nofollow" target="_blank">ã€‚</a></p><h2 id="a2f0" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">YOLOv5æ˜¯ä»€ä¹ˆï¼Ÿ</h2><blockquote class="lv lw lx"><p id="3b6a" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">YOLOv5æ˜¯åœ¨COCOæ•°æ®é›†ä¸Šé¢„å…ˆè®­ç»ƒçš„ä¸€ç³»åˆ—å¯¹è±¡æ£€æµ‹æ¶æ„å’Œæ¨¡å‹ï¼Œä»£è¡¨äº†å¯¹æœªæ¥è§†è§‰äººå·¥æ™ºèƒ½æ–¹æ³•çš„<a class="ae lb" href="https://ultralytics.com/" rel="noopener ugc nofollow" target="_blank"> Ultralytics </a>å¼€æºç ”ç©¶ï¼Œèåˆäº†ç»è¿‡æ•°åƒå°æ—¶çš„ç ”ç©¶å’Œå¼€å‘è€Œè·å¾—çš„ç»éªŒæ•™è®­å’Œæœ€ä½³å®è·µã€‚</p></blockquote><div class="mc md gp gr me mf"><a href="https://ultralytics.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">è¶…lytics</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">YOLOv5ğŸš€å’Œè§†è§‰äººå·¥æ™ºèƒ½â­</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">ultralytics.com</p></div></div><div class="mo l"><div class="mp l mq mr ms mo mt kv mf"/></div></div></a></div><p id="aa6c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">YOLOä»£è¡¨â€œä½ åªçœ‹ä¸€æ¬¡â€ï¼Œè¿™æ˜¯ä¸€ç§å¿«é€Ÿé«˜æ•ˆçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå› ä¸ºå®ƒä½¿ç”¨å•é•œå¤´æ£€æµ‹å™¨(SSD)å’ŒYOLOå¯¹è±¡æ£€æµ‹å™¨æ¥å°†è¾“å…¥å›¾åƒåˆ’åˆ†åˆ°SxSç½‘æ ¼ç³»ç»Ÿä¸­ã€‚</p><p id="a879" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å¯èƒ½ä¼šçœ‹åˆ°ä»¥ä¸‹YOLOv5çš„ä»¤äººå°è±¡æ·±åˆ»çš„å¯¹æ¯”:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mu"><img src="../Images/adf804b32f0347b36078dcb0baaf2801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bpnCPnatSx8mlHqs.png"/></div></div><p class="kx ky gj gh gi kz la bd b be z dk translated">æ¥è‡ª<a class="ae lb" href="https://github.com/ultralytics/yolov5" rel="noopener ugc nofollow" target="_blank">https://github.com/ultralytics/yolov5</a></p></figure></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="34a2" class="nc ld iq bd le nd ne nf lh ng nh ni lk nj nk nl ln nm nn no lq np nq nr lt ns bi translated">ä½¿ç”¨çš„æŠ€æœ¯</h1><ol class=""><li id="d029" class="nt nu iq jp b jq nv ju nw jy nx kc ny kg nz kk oa ob oc od bi translated"><a class="ae lb" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank"> FastAPI </a>ç”¨äºä»¥å¼‚æ­¥æ¨¡å¼æä¾›è®¤è¯APIã€‚</li><li id="6af4" class="nt nu iq jp b jq oe ju of jy og kc oh kg oi kk oa ob oc od bi translated"><a class="ae lb" href="https://github.com/OAI/OpenAPI-Specification" rel="noopener ugc nofollow" target="_blank"> OpenAPI </a>(ä»¥å‰ç§°ä¸ºswagger)ç”¨äºè®°å½•APIè§„èŒƒã€‚</li><li id="9510" class="nt nu iq jp b jq oe ju of jy og kc oh kg oi kk oa ob oc od bi translated"><a class="ae lb" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>ç”¨äºæ„å»ºå®¹å™¨å›¾åƒã€‚</li></ol></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="5aef" class="nc ld iq bd le nd ne nf lh ng nh ni lk nj nk nl ln nm nn no lq np nq nr lt ns bi translated">æ­¥éª¤0:å‡†å¤‡æ‚¨å®šåˆ¶çš„YOLOv5æ¨¡å‹</h1><p id="4fe5" class="pw-post-body-paragraph jn jo iq jp b jq nv js jt ju nw jw jx jy oj ka kb kc ok ke kf kg ol ki kj kk ij bi translated">è¦ä½¿ç”¨YOLOv5è®­ç»ƒè‡ªå®šä¹‰å¯¹è±¡è¯†åˆ«ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„é“¾æ¥:</p><div class="mc md gp gr me mf"><a href="https://colab.research.google.com/drive/1gDZ2xcTOgR39tGGs-EZ6i3RTs16wmzZQ" rel="noopener  ugc nofollow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">è°·æ­Œè”åˆå®éªŒå®¤</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">ç¼–è¾‘æè¿°</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">colab.research.google.co</p></div></div><div class="mo l"><div class="om l mq mr ms mo mt kv mf"/></div></div></a></div><blockquote class="lv lw lx"><p id="8e50" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">æ‚¨å¯ä»¥ä½¿ç”¨æˆ‘è‡ªå·±çš„å®šåˆ¶MLæ¨¡å‹ï¼Œè€Œä¸éœ€è¦è¿™ä¸€æ­¥ã€‚è¯¥æ¨¡å‹æ”¯æŒæ£€æµ‹6ç§é£Ÿå“ï¼ŒåŒ…æ‹¬é¸¡ç¿…ã€ç”œç”œåœˆã€è–¯æ¡ã€gyozaã€çƒ­ç‹—å’Œåå¤«é¥¼ã€‚</p></blockquote><h1 id="5a23" class="nc ld iq bd le nd on nf lh ng oo ni lk nj op nl ln nm oq no lq np or nr lt ns bi translated">æ­¥éª¤1:å…‹éš†æˆ–ä¸‹è½½Githubé¡¹ç›®</h1><p id="fdb5" class="pw-post-body-paragraph jn jo iq jp b jq nv js jt ju nw jw jx jy oj ka kb kc ok ke kf kg ol ki kj kk ij bi translated">å»<a class="ae lb" href="https://github.com/DanielChuDC/yolov5-fastapi" rel="noopener ugc nofollow" target="_blank">https://github.com/DanielChuDC/yolov5-fastapi</a>å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®ã€‚è§£å‹ä¸‹è½½çš„zipæ–‡ä»¶ã€‚</p><h2 id="957e" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">ç›®å½•è§£é‡Š:</h2><pre class="km kn ko kp gt os ot ou ov aw ow bi"><span id="e8aa" class="lc ld iq ot b gy ox oy l oz pa">.<br/>â”œâ”€â”€ Dockerfile # For containerised this application<br/>â”œâ”€â”€ README.md<br/>â”œâ”€â”€ main.py # The entry point of the program<br/>â”œâ”€â”€ model<br/>â”‚   â”œâ”€â”€ __init__.py<br/>â”‚   â””â”€â”€ best.pt # Where you custom training model place<br/>â”œâ”€â”€ requirements.in # To generate requirements.txt<br/>â”œâ”€â”€ requirements.txt # Usage: pip install -r requirements.txt<br/>â”œâ”€â”€ segmentation.py # for import local yolov5 and scale image<br/>â””â”€â”€ yolov5 # Get from <a class="ae lb" href="https://github.com/ultralytics/yolov5" rel="noopener ugc nofollow" target="_blank">https://github.com/ultralytics/yolov5</a></span></pre><p id="6a84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe pb pc pd ot b">main.py</code>æ˜¯åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†å®šä¹‰3ä¸ªç«¯ç‚¹ï¼Œå¹¶å…è®¸åœ¨FAST APIä¸­ä»¥å­—èŠ‚ä¸ºå•ä½ä¸Šä¼ æ–‡ä»¶:</p><pre class="km kn ko kp gt os ot ou ov aw ow bi"><span id="68f0" class="lc ld iq ot b gy ox oy l oz pa">from fastapi import FastAPI, File<br/>from segmentation import get_yolov5, get_image_from_bytes<br/>from starlette.responses import Response<br/>import io<br/>from PIL import Image<br/>import json<br/>from fastapi.middleware.cors import CORSMiddleware</span><span id="347f" class="lc ld iq ot b gy pe oy l oz pa">model = get_yolov5()</span><span id="9e25" class="lc ld iq ot b gy pe oy l oz pa">app = FastAPI(<br/>    title="Custom YOLOV5 Machine Learning API",<br/>    description="""Obtain object value out of image<br/>    and return image and json result""",<br/>    version="0.0.1",<br/>)</span><span id="c65c" class="lc ld iq ot b gy pe oy l oz pa">origins = [<br/>    "http://localhost",<br/>    "http://localhost:8000",<br/>    "*"<br/>]</span><span id="d7e2" class="lc ld iq ot b gy pe oy l oz pa">app.add_middleware(<br/>     CORSMiddleware,<br/>     allow_origins=origins,<br/>     allow_credentials=True,<br/>     allow_methods=["*"],<br/>     allow_headers=["*"],<br/>)</span><span id="abec" class="lc ld iq ot b gy pe oy l oz pa"><br/>@app.get('/notify/v1/health')<br/>def get_health():<br/>    return dict(msg='OK')</span><span id="5549" class="lc ld iq ot b gy pe oy l oz pa"><br/>@app.post("/object-to-json")<br/>async def detect_food_return_json_result(file: bytes = File(...)):<br/>    input_image = get_image_from_bytes(file)<br/>    results = model(input_image)<br/>    detect_res = results.pandas().xyxy[0].to_json(orient="records")<br/>    detect_res = json.loads(detect_res)<br/>    return {"result": detect_res}</span><span id="69b1" class="lc ld iq ot b gy pe oy l oz pa"><br/>@app.post("/object-to-img")<br/>async def detect_food_return_base64_img(file: bytes = File(...)):<br/>    input_image = get_image_from_bytes(file)<br/>    results = model(input_image)<br/>    results.render()  # updates results.imgs with boxes and labels<br/>    for img in results.imgs:<br/>        bytes_io = io.BytesIO()<br/>        img_base64 = Image.fromarray(img)<br/>        img_base64.save(bytes_io, format="jpeg")<br/>    return Response(content=bytes_io.getvalue(),<br/>media_type="image/jpeg")</span></pre><p id="d6d4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe pb pc pd ot b">segmentation.py</code>å®šä¹‰äº†ä¸¤ç§æ–¹æ³•:</p><ol class=""><li id="dfe2" class="nt nu iq jp b jq jr ju jv jy pf kc pg kg ph kk oa ob oc od bi translated"><code class="fe pb pc pd ot b">get_yolov5()</code>:è¿™å°±æ˜¯yolov5å¯ä»¥ä½¿ç”¨å®šåˆ¶æ¨¡å‹çš„åœ°æ–¹ã€‚è¯·æ³¨æ„<code class="fe pb pc pd ot b">model.conf=0.5</code>ï¼Œå®ƒæ„å‘³ç€åªæœ‰ç½®ä¿¡åº¦å¤§äº0.5çš„è¢«æ£€æµ‹å¯¹è±¡æ‰ä¼šå‡ºç°åœ¨è¿”å›ç»“æœä¸­ã€‚</li><li id="5a02" class="nt nu iq jp b jq oe ju of jy og kc oh kg oi kk oa ob oc od bi translated"><code class="fe pb pc pd ot b">get_image_from_bytes()</code>:æ˜¯è°ƒæ•´å›¾åƒå¤§å°çš„åœ°æ–¹ã€‚</li></ol><pre class="km kn ko kp gt os ot ou ov aw ow bi"><span id="4ab4" class="lc ld iq ot b gy ox oy l oz pa">import torch<br/>from PIL import Image<br/>import io</span><span id="2415" class="lc ld iq ot b gy pe oy l oz pa">def get_yolov5():<br/>    model = torch.hub.load('./yolov5', 'custom', path='./model/best.pt', source='local')<br/>    model.conf = 0.5<br/>    return model</span><span id="cf39" class="lc ld iq ot b gy pe oy l oz pa">def get_image_from_bytes(binary_image, max_size=1024):<br/>    input_image =Image.open(io.BytesIO(binary_image)).convert("RGB")<br/>    width, height = input_image.size<br/>    resize_factor = min(max_size / width, max_size / height)<br/>    resized_image = input_image.resize((<br/>        int(input_image.width * resize_factor),<br/>        int(input_image.height * resize_factor)<br/>    ))<br/>    return resized_image</span></pre><h1 id="cd93" class="nc ld iq bd le nd on nf lh ng oo ni lk nj op nl ln nm oq no lq np or nr lt ns bi translated">ç¬¬2æ­¥:å°†è‡ªå®šä¹‰çš„best.ptæ”¾åˆ°é¡¹ç›®ç›®å½•ä¸‹çš„modelæ–‡ä»¶å¤¹ä¸­</h1><p id="7bf9" class="pw-post-body-paragraph jn jo iq jp b jq nv js jt ju nw jw jx jy oj ka kb kc ok ke kf kg ol ki kj kk ij bi translated">åœ¨ä½ è®­ç»ƒå¥½ä½ çš„å®šåˆ¶æ¨¡å‹ä¹‹åï¼Œä½ å°±æœ‰äº†åä¸º<code class="fe pb pc pd ot b">best.pt</code>çš„å®šåˆ¶æ¨¡å‹ã€‚æ›¿æ¢<code class="fe pb pc pd ot b">model</code>æ–‡ä»¶å¤¹ä¸­çš„best.ptã€‚</p><h1 id="c39f" class="nc ld iq bd le nd on nf lh ng oo ni lk nj op nl ln nm oq no lq np or nr lt ns bi translated">æ­¥éª¤3:é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨é¡¹ç›®</h1><p id="043f" class="pw-post-body-paragraph jn jo iq jp b jq nv js jt ju nw jw jx jy oj ka kb kc ok ke kf kg ol ki kj kk ij bi translated">åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤</p><pre class="km kn ko kp gt os ot ou ov aw ow bi"><span id="65a7" class="lc ld iq ot b gy ox oy l oz pa">uvicorn main:app --reload --host 0.0.0.0 --port 8000</span></pre><blockquote class="lv lw lx"><p id="f451" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">å¦‚æœæ‚¨çœ‹åˆ°ä¸‹é¢ç±»ä¼¼çš„ç»“æœï¼Œè¿™æ„å‘³ç€æˆåŠŸåœ°å¯åŠ¨äº†é¡¹ç›®ã€‚</p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pi"><img src="../Images/1acb3d7440e96637cd5188df6c3f9e93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mySpB5mXEZRCi4rK44leMw.png"/></div></div></figure><blockquote class="lv lw lx"><p id="ba12" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">å¦‚æœæ‚¨é‡åˆ°ä»»ä½•å…³äºè½¯ä»¶åŒ…ä¸¢å¤±çš„é”™è¯¯ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ<code class="fe pb pc pd ot b">pip install -r requirements.txt</code>æ¥å®‰è£…æ‰€éœ€çš„è½¯ä»¶åŒ…ã€‚</p></blockquote><h1 id="d297" class="nc ld iq bd le nd on nf lh ng oo ni lk nj op nl ln nm oq no lq np or nr lt ns bi translated">ç¬¬å››æ­¥:æµ‹è¯•ç»“æœ</h1><p id="c86c" class="pw-post-body-paragraph jn jo iq jp b jq nv js jt ju nw jw jx jy oj ka kb kc ok ke kf kg ol ki kj kk ij bi translated">åœ¨æµè§ˆå™¨ä¸­å¯¼èˆªè‡³<a class="ae lb" href="http://0.0.0.0:8000/docs#/" rel="noopener ugc nofollow" target="_blank">http://0 . 0 . 0 . 0:8000/docs #/</a>ã€‚æ‚¨åº”è¯¥çœ‹åˆ°å¼€æ”¾APIæ–¹æ¡ˆæœ‰3ä¸ªç«¯ç‚¹:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pj"><img src="../Images/b650da614808cb2d7c31c7dca2127e81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fPcjaRTvM0bRJJWxto8JKA.png"/></div></div></figure><ol class=""><li id="b82b" class="nt nu iq jp b jq jr ju jv jy pf kc pg kg ph kk oa ob oc od bi translated"><code class="fe pb pc pd ot b">/notify/v1/health </code> â€”è¯¥ç«¯ç‚¹ç”¨äºæ£€æŸ¥Kubernetesçš„<code class="fe pb pc pd ot b">readinessProbe</code>å’Œ<code class="fe pb pc pd ot b">livenessProbe</code>ã€‚</li></ol><p id="1aa0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å¯ä»¥é€šè¿‡ç‚¹å‡»<code class="fe pb pc pd ot b">try it out</code>æŒ‰é’®æ¥æ‰§è¡Œç«¯ç‚¹ã€‚</p><blockquote class="lv lw lx"><p id="8cae" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">é¢„æœŸç»“æœæ˜¯çŠ¶æ€ä»£ç ä¸º200çš„<code class="fe pb pc pd ot b">{"msg": "OK"}</code>ã€‚</p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pk"><img src="../Images/3f74209620c7772e745d2e119e8ea07f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*idMW1GgtWg2qs4xSDKFLrQ.png"/></div></div></figure><p id="7af1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.<code class="fe pb pc pd ot b">/object-to-json </code> â€”æ­¤ç«¯ç‚¹ç”¨äºä»¥JSONæ ¼å¼è¿”å›æ£€æµ‹åˆ°çš„å¯¹è±¡å€¼</p><p id="a5d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å¯ä»¥ç‚¹å‡»<code class="fe pb pc pd ot b">try it out</code>æŒ‰é’®æ‰§è¡Œç«¯ç‚¹å¹¶ä¸Šä¼ å›¾åƒã€‚</p><blockquote class="lv lw lx"><p id="03ee" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">é¢„æœŸç»“æœæ˜¯å¸¦æœ‰200çŠ¶æ€ä»£ç çš„<code class="fe pb pc pd ot b"><em class="iq">{"result": []}</em></code>ã€‚å¦‚æœæ¨¡å‹æ£€æµ‹åˆ°å¤§äº0.5çš„ä¸œè¥¿ï¼Œå®ƒå°†è¿½åŠ åˆ°æ•°ç»„ä¸­ã€‚</p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pl"><img src="../Images/6cf3179b686ec74bb4c7cab4969c256a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dblMeyO9hZVdqRYT1BaByA.png"/></div></div></figure><blockquote class="lv lw lx"><p id="b7be" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">æ³¨æ„:å¦‚æœæ‚¨ä½¿ç”¨äº†æ‚¨çš„æµ·å…³<code class="fe pb pc pd ot b"><em class="iq">best.pt</em></code>ï¼Œæ£€æµ‹çš„å¯¹è±¡å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚</p></blockquote><p id="97c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.<em class="ly"> </em> <code class="fe pb pc pd ot b">/object-to-img</code> <em class="ly"> â€” </em>æ­¤ç«¯ç‚¹ç”¨äºè¿”å›å›¾åƒæ ¼å¼çš„æ£€æµ‹å¯¹è±¡å€¼</p><p id="ef5e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å¯ä»¥ç‚¹å‡»<code class="fe pb pc pd ot b">try it out</code>æŒ‰é’®æ‰§è¡Œç«¯ç‚¹å¹¶ä¸Šä¼ å›¾åƒã€‚</p><blockquote class="lv lw lx"><p id="e8e8" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">é¢„æœŸçš„ç»“æœæ˜¯å¸¦æœ‰200çŠ¶æ€ä»£ç çš„æ£€æµ‹åˆ°çš„é£Ÿç‰©å¯¹è±¡çš„æ ‡ç­¾å›¾åƒã€‚å¦‚æœæ¨¡å‹æ£€æµ‹åˆ°å¤§äº0.5çš„ä¸œè¥¿ï¼Œå®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªæ ‡ç­¾å’Œæ–¹æ¡†ã€‚</p></blockquote><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pm"><img src="../Images/fd3a17c844e4ddcf47d0417e1b937b6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GjiFrb84mzoohMBFOEQvdA.png"/></div></div></figure><blockquote class="lv lw lx"><p id="f85d" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">æ³¨æ„:å¦‚æœæ‚¨ä½¿ç”¨äº†æ‚¨çš„æµ·å…³<code class="fe pb pc pd ot b">best.pt</code>ï¼Œæ£€æµ‹åˆ°çš„å¯¹è±¡å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚</p></blockquote><h1 id="1d11" class="nc ld iq bd le nd on nf lh ng oo ni lk nj op nl ln nm oq no lq np or nr lt ns bi translated">æ­¥éª¤5:å°†è¯¥é¡¹ç›®æ„å»ºä¸ºå¾®æœåŠ¡çš„å®¹å™¨æ˜ åƒ</h1><p id="2d85" class="pw-post-body-paragraph jn jo iq jp b jq nv js jt ju nw jw jx jy oj ka kb kc ok ke kf kg ol ki kj kk ij bi translated">æˆ‘ä»¬å·²ç»èµ°äº†è¿™ä¹ˆè¿œï¼è®©æˆ‘ä»¬å°†è¿™ä¸ªé¡¹ç›®æ„å»ºæˆä¸€ä¸ªå®¹å™¨æ˜ åƒã€‚</p><p id="b177" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‰“å¼€<code class="fe pb pc pd ot b">docker desktop</code>å¹¶ç­‰å¾…å…¶å‡†å¤‡å°±ç»ªã€‚</p><h2 id="593e" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">Dockerfileæ–‡ä»¶</h2><pre class="km kn ko kp gt os ot ou ov aw ow bi"><span id="82da" class="lc ld iq ot b gy ox oy l oz pa">FROM tiangolo/uvicorn-gunicorn:python3.9-slim<br/>LABEL maintainer="danielchu"ENV WORKERS_PER_CORE=4<br/>ENV MAX_WORKERS=24<br/>ENV LOG_LEVEL="warning"<br/>ENV TIMEOUT="200"<br/>RUN mkdir /yolov5-fastapi<br/>COPY requirements.txt /yolov5-fastapi<br/>COPY . /yolov5-fastapi<br/>WORKDIR /yolov5-fastapi<br/>EXPOSE 8000<br/>CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]</span></pre><p id="604a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ„å»ºæ˜ åƒ</p><pre class="km kn ko kp gt os ot ou ov aw ow bi"><span id="9b4a" class="lc ld iq ot b gy ox oy l oz pa">docker build -t yolov5-fastapi:0.0.1 .</span></pre><p id="7ef5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">å¦‚æœçœ‹åˆ°ç±»ä¼¼ä¸‹é¢æˆªå›¾çš„ç»“æœï¼Œå›¾åƒå·²ç»æ„å»ºæˆåŠŸäº†ï¼</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pn"><img src="../Images/1c92d60025bbbc895b7d3fb21a27a47c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rmMBU0xHABcEIy-Tar0AtQ.png"/></div></div></figure><p id="1849" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿è¡Œå®¹å™¨æ˜ åƒ</p><pre class="km kn ko kp gt os ot ou ov aw ow bi"><span id="6670" class="lc ld iq ot b gy ox oy l oz pa">docker run -p 8080:8000 yolov5-fastapi:0.0.1</span></pre></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><h1 id="5047" class="nc ld iq bd le nd ne nf lh ng nh ni lk nj nk nl ln nm nn no lq np nq nr lt ns bi translated">ç»“è®º</h1><p id="903f" class="pw-post-body-paragraph jn jo iq jp b jq nv js jt ju nw jw jx jy oj ka kb kc ok ke kf kg ol ki kj kk ij bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨YOLOv5å’ŒFAST APIåˆ›å»ºäº†ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹APIã€‚è¿™ä¸ªåº”ç”¨ç¨‹åºå°†é€‚åˆå¯¹è±¡æ£€æµ‹ï¼Œå…è®¸ä½ ä¸Šä¼ å›¾åƒï¼Œå¹¶ä»¥JSONæˆ–imageæ ¼å¼è¿”å›ç»“æœã€‚</p><p id="85f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™ä¸ªåº”ç”¨ç¨‹åºä¹Ÿé€‚åˆä½¿ç”¨å®¹å™¨æ˜ åƒè¿›è¡Œäº‘éƒ¨ç½²ã€‚</p><p id="10c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†æ£€æµ‹ç»“æœå­˜å‚¨åˆ°æ•°æ®åº“ä¸­æ¥è¿›ä¸€æ­¥å¢å¼ºè¿™ä¸ªé¡¹ç›®ï¼Œä»¥ç”¨äºæœºå™¨å­¦ä¹ æ”¹è¿›ã€‚ä½†é‚£æ˜¯ä»¥åçš„äº‹äº†ã€‚</p></div><div class="ab cl mv mw hu mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ij ik il im in"><blockquote class="lv lw lx"><p id="86ad" class="jn jo ly jp b jq jr js jt ju jv jw jx lz jz ka kb ma kd ke kf mb kh ki kj kk ij bi translated">å¦‚æœæ‚¨å¯¹ä½¿ç”¨FAST apiæ„å»ºèº«ä»½éªŒè¯APIæ„Ÿå…´è¶£ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„é“¾æ¥:</p></blockquote><div class="mc md gp gr me mf"><a href="https://dc1888.medium.com/build-simple-authentication-api-using-fast-api-with-es256-encryption-in-10-mins-f8c0113937a" rel="noopener follow" target="_blank"><div class="mg ab fo"><div class="mh ab mi cl cj mj"><h2 class="bd ir gy z fp mk fr fs ml fu fw ip bi translated">ä½¿ç”¨å¸¦ES256åŠ å¯†çš„FAST APIåœ¨10åˆ†é’Ÿå†…æ„å»ºç®€å•çš„èº«ä»½éªŒè¯API</h2><div class="mm l"><h3 class="bd b gy z fp mk fr fs ml fu fw dk translated">å¤§å®¶å¥½ï¼åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£å¦‚ä½•ä½¿ç”¨FAST APIåˆ›å»ºä¸€ä¸ªèº«ä»½éªŒè¯APIâ€¦</h3></div><div class="mn l"><p class="bd b dl z fp mk fr fs ml fu fw dk translated">dc1888.medium.com</p></div></div><div class="mo l"><div class="po l mq mr ms mo mt kv mf"/></div></div></a></div></div></div>    
</body>
</html>