# æ¢ç´¢ Jetpack å¯¼èˆªç»„ä»¶çš„å®æ—¶ç”¨ä¾‹

> åŸæ–‡ï¼š<https://betterprogramming.pub/exploring-real-time-use-cases-of-jetpack-navigation-component-e58dd8dfba5>

## å¯¹è¯ç›®çš„åœ°ã€æ·±å±‚é“¾æ¥å’ŒåµŒå¥—å›¾å½¢

![](img/fc2a05947705e7c1f54dc95cf9c5ff00.png)

ç…§ç‰‡ç”±[æ ¼ä¼¦Â·å¡æ–¯æ»•æ–¯-å½¼å¾—æ–¯](https://unsplash.com/@glenncarstenspeters?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) æ‹æ‘„ã€‚

Jetpack çš„å¯¼èˆªç»„ä»¶æ˜¯ä¸€ä¸ªè½¬æ¢åº“ï¼Œå°†å¯¹å¼€å‘äººå‘˜å¦‚ä½•ç¼–å†™ä»£ç ä»¥åœ¨å±å¹•ä¹‹é—´å¯¼èˆªäº§ç”Ÿå·¨å¤§å½±å“ã€‚

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å·²ç»çœ‹åˆ°äº†å¾ˆå¤šä¸“æ³¨äºæ´»åŠ¨å’Œç‰‡æ®µçš„æ•™ç¨‹ã€‚ä½†æ˜¯ Android ä¸ä»…ä»…æ˜¯ä¸€å †å±å¹•ã€‚å®ƒç¡®å®æœ‰å¸å¼•äººçš„å¯¹è¯ã€‚æ­¤å¤–ï¼Œæ·±å±‚é“¾æ¥æ˜¯å¯¼èˆªçš„å¦ä¸€ä¸ªæ ¸å¿ƒæ–¹é¢ã€‚æœ€åï¼Œéšç€äº§å“çš„å¢é•¿ï¼Œæˆ‘ä»¬æ— æ³•å°†æ‰€æœ‰å±å¹•éƒ½æ”¾åœ¨ä¸€ä¸ªå›¾å½¢ä¸­ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å­¦ä¹ å¦‚ä½•å°†ç›®çš„åœ°åˆ†ç»„åˆ°å¤šä¸ªå›¾å½¢ä¸­ã€‚

åœ¨ä»Šå¤©çš„æ–‡ç« ä¸­ï¼Œæˆ‘å°†é‡ç‚¹ä»‹ç»è¿™ä¸‰ä¸ªæ¦‚å¿µã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰ Jetpack å¯¼èˆªç»„ä»¶ï¼Œæˆ‘å»ºè®®ä½ å…ˆé˜…è¯»[è¿™ç¯‡æ–‡ç« ](https://medium.com/better-programming/jitpack-navigation-component-in-android-944165c35f54)å¹¶å­¦ä¹ åŸºç¡€çŸ¥è¯†ã€‚

è¯è™½å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¼€å§‹å§ã€‚

# å¯¹è¯ç›®çš„åœ°

ä¸ºäº†è§£é‡Šå¯¹è¯ç›®çš„åœ°ï¼Œæˆ‘ä»¬å°†ä»¥`BottomSheetDialogFragment`ä¸ºä¾‹ã€‚å‡è®¾å½“ä½ ç‚¹å‡»ä¸€éƒ¨ç”µå½±æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç”µå½±åˆ—è¡¨ã€‚æˆ‘ä»¬éœ€è¦æ˜¾ç¤ºåº•éƒ¨å·¥ä½œè¡¨å¯¹è¯æ¡†çš„ç»†èŠ‚ã€‚

æˆ‘å°†åˆ›å»ºåº•éƒ¨çš„ sheen å¯¹è¯æ¡†ç‰‡æ®µï¼Œå¹¶è§£é‡Šä½¿ç”¨å¯¼èˆªç»„ä»¶è§¦å‘å®ƒæ‰€éœ€å®ç°çš„ä»£ç ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ•´ä¸ªåº”ç”¨ç¨‹åºå¹¶æ‹–åŠ¨æœ¬æ–‡ã€‚

æ²¡æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„å»¶è¿Ÿï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º`MovieDetailsDialog`çš„åº•éƒ¨è¡¨å•å¯¹è¯æ¡†ç‰‡æ®µ:

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„åº•éƒ¨è¡¨å•å¯¹è¯æ¡†ï¼Œæˆ‘ä»¬ä½¿ç”¨`[viewBinding](https://medium.com/better-programming/everything-you-should-know-about-viewbinding-in-android-52552af9e8ba)`æ¥é“¾æ¥å¸ƒå±€ã€‚ä¸‹ä¸€æ­¥æ˜¯åœ¨å¯¼èˆªå›¾ä¸­ä¸ºè¿™ä¸ªå¯¹è¯æ¡†åˆ›å»ºä¸€ä¸ªç›®çš„åœ°ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ª`dialog`æ ‡ç­¾ï¼Œè€Œä¸æ˜¯åœ¨è¿™é‡Œä½¿ç”¨ä¸€ä¸ªæ™®é€šçš„ç‰‡æ®µ:

ç°åœ¨æˆ‘ä»¬åœ¨å¯¼èˆªå›¾ä¸­æœ‰äº†å¯¹è¯ç‰‡æ®µå’Œå®ƒçš„ç›®çš„åœ°ã€‚ä¸‹ä¸€æ­¥æ˜¯ä½¿ç”¨å¯¼èˆªç»„ä»¶è§¦å‘å®ƒã€‚è¿™ç±»ä¼¼äºè°ƒç”¨æ™®é€šç‰‡æ®µã€‚çœ‹ä¸€çœ‹:

ä»…æ­¤è€Œå·²ã€‚ç°åœ¨ï¼Œæ‚¨ç¦»å°†åº”ç”¨ç¨‹åºä»ä¼ ç»Ÿçš„å¯¼èˆªç³»ç»Ÿè½¬ç§»åˆ°å…¨æ–°çš„ Jetpack å¯¼èˆªç»„ä»¶åˆè¿‘äº†ä¸€æ­¥ã€‚

# æ·±å±‚é“¾æ¥

æˆ‘ä»¬å°†è®¨è®ºæœ¬æ–‡çš„ç¬¬äºŒä¸ªæ¦‚å¿µ:æ·±å±‚é“¾æ¥ã€‚è®©æˆ‘ä»¬ä»åŸºç¡€å¼€å§‹ï¼Œè€Œä¸æ˜¯å˜å¾—æå®¢ã€‚

## ä»€ä¹ˆæ˜¯æ·±åº¦é“¾æ¥ï¼Ÿ

æ·±åº¦é“¾æ¥ç±»ä¼¼äºæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„é“¾æ¥æˆ–ç½‘å€ã€‚æ¯ä¸ªé“¾æ¥æˆ– URL ç”¨äºå°†ç”¨æˆ·å¯¼èˆªåˆ°ç‰¹å®šçš„ç›®çš„åœ°ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„ URL:

```
https://www.examplemovies.com/avengers?part=3
```

é€šå¸¸åœ¨ç½‘ç»œä¸Šï¼Œè¿™ä¸ªç½‘å€ä¼šåŠ è½½`avengers part3`ç”µå½±è¯¦æƒ…ã€‚åœ¨ç§»åŠ¨åº”ç”¨ç¨‹åºä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚åœ¨ Android ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨*æ„å›¾è¿‡æ»¤å™¨*çš„æ¦‚å¿µå°†ç‰¹å®šçš„å±å¹•ä¸ç‰¹å®šçš„é“¾æ¥è”ç³»èµ·æ¥ã€‚è¦å­¦ä¹ æ·±å±‚é“¾æ¥çš„åŸºç¡€çŸ¥è¯†ï¼Œè¯·é˜…è¯»æœ¬æ–‡ã€‚

ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ä»€ä¹ˆæ˜¯æ·±å±‚é“¾æ¥ï¼Œè®©æˆ‘ä»¬æ¥æ¢ç´¢å¦‚ä½•åœ¨ Jetpack å¯¼èˆªç»„ä»¶ä¸­ä½¿ç”¨å®ƒä»¬ã€‚æˆ‘ä»¬ä¸¾ä¸ªåŒæ ·çš„ä¾‹å­:`MovieDetailsDialog`ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ·±åº¦é“¾æ¥æ¥è§¦å‘ä¸€ä¸ªç”µå½±ç»†èŠ‚å¯¹è¯æ¡†ä»¥åŠå¸¸è§„çš„å¯¼èˆªåŠ¨ä½œã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯¼èˆªç¼–è¾‘å™¨åˆ›å»ºä¸€ä¸ªåˆ°ç›®çš„åœ°çš„æ·±å±‚é“¾æ¥ã€‚åˆ‡æ¢åˆ°è®¾è®¡é€‰é¡¹å¡ï¼Œå¹¶ç‚¹å‡»å·¥ä½œå®¤å³ä¾§çš„å±æ€§é¢æ¿ã€‚ç„¶åï¼Œæ‚¨å°†çœ‹åˆ°å¸¦æœ‰åŠ å·çš„æ·±å±‚é“¾æ¥é€‰é¡¹ï¼Œç”¨äºåˆ›å»ºæŒ‡å‘æ‚¨é€‰æ‹©çš„ç›®çš„åœ°çš„æ·±å±‚é“¾æ¥:

![](img/95ea062a01072be96033ae34ffdd1362.png)

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ˜¾å¼çš„æ·±åº¦é“¾æ¥ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ª`PendingIntent`å°†ç”¨æˆ·å¸¦åˆ°åº”ç”¨ç¨‹åºä¸­çš„ä¸€ä¸ªç‰¹å®šä½ç½®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç”µå½±ç»†èŠ‚å¯¹è¯æ¡†ã€‚

æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ˜ç¡®çš„æ·±å±‚é“¾æ¥ï¼Œä½œä¸ºé€šçŸ¥æˆ–åº”ç”¨ç¨‹åºå¿«æ·æ–¹å¼çš„ä¸€éƒ¨åˆ†ã€‚ä¸€æ—¦æˆ‘ä»¬åˆ›å»ºäº†æ·±å±‚é“¾æ¥ï¼Œå›¾ä¸­çš„å¯¹è¯ç›®çš„åœ°å°†å¦‚ä¸‹æ‰€ç¤º:

è¦å¯¼èˆªåˆ°åº”ç”¨ç¨‹åºä¸­çš„ç”µå½±ç»†èŠ‚å¯¹è¯æ¡†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯¼èˆªæ“ä½œï¼Œä½†æ˜¯å½“æ‚¨éœ€è¦ä»å¿«æ·æ–¹å¼ã€é€šçŸ¥æˆ–æŸç§å¤–éƒ¨èµ„æºå¯¼èˆªæ—¶ï¼Œæ·±å±‚é“¾æ¥ä¼šå¾ˆæ–¹ä¾¿ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`NavDeepLinkBuilder`æ¥åˆ›å»ºä¸€ä¸ªå¾…å®šçš„æ„å›¾ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å¯¼èˆª:

# åµŒå¥—å›¾

ç°åœ¨ä»‹ç»æœ¬æ–‡çš„æœ€åä¸€ä¸ªæ¦‚å¿µ:åµŒå¥—å›¾ã€‚å¦‚å‰æ‰€è¿°ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œä»£ç åº“ä¼šéšç€äº§å“è€Œå¢é•¿ã€‚å¾ˆéš¾åœ¨å•ä¸ªå›¾å½¢ä¸­ç»´æŠ¤æ¯ä¸ªå±å¹•ã€‚

åˆ†ç¦»ç›®çš„åœ°å¹¶ä¿æŒæ¸…æ™°çš„å¯¼èˆªå›¾ç»“æ„çš„ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡åµŒå¥—å›¾ã€‚

> ä¸€ç³»åˆ—çš„ç›®çš„åœ°å¯ä»¥è¢«åˆ†ç»„åˆ°è¢«ç§°ä¸º*æ ¹å›¾*çš„çˆ¶å¯¼èˆªå›¾å†…çš„*åµŒå¥—å›¾*ä¸­ã€‚åµŒå¥—å›¾å½¢æœ‰åŠ©äºç»„ç»‡å’Œé‡ç”¨åº”ç”¨ç¨‹åº UI çš„å„ä¸ªéƒ¨åˆ†ï¼Œä¾‹å¦‚è‡ªåŒ…å«çš„ç™»å½•æµç¨‹ã€‚â€â€” [å®‰å“å¼€å‘è€…](https://developer.android.com/guide/navigation/navigation-nested-graphs)

æˆ‘ä»¬å¯ä»¥ä¸ºåº”ç”¨ç¨‹åºä¸­çš„æ¯ä¸ªæ¨¡å—åˆ›å»ºå•ç‹¬çš„å›¾è¡¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¨±ä¹åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç™»å½•æµã€å…¥èŒã€ç”µè§†èŠ‚ç›®ã€ç”µå½±ç­‰åˆ›å»ºå•ç‹¬çš„å›¾è¡¨ã€‚åŸºäºå›¾è¡¨çš„åŠŸèƒ½ã€‚

å°½ç®¡çœ‹èµ·æ¥å¾ˆæœ‰ç”¨ï¼Œä½†æˆ‘ä»¬éœ€è¦éµå¾ªä¸€äº›è§„åˆ™æ¥ä½¿ç”¨åµŒå¥—å›¾ã€‚ç¬¬ä¸€ä¸ªä¹Ÿæ˜¯æœ€é‡è¦çš„è§„åˆ™æ˜¯åµŒå¥—å›¾åº”è¯¥å°è£…åœ¨æ ¹å›¾ä¸­ã€‚å®ƒä»¬ä¸èƒ½å•ç‹¬ä½¿ç”¨ã€‚

ç¬¬äºŒæ¡è§„åˆ™æ˜¯ï¼Œä»»ä½•å¯¼èˆªå›¾éƒ½åº”è¯¥æœ‰ä¸€ä¸ªèµ·å§‹ç›®çš„åœ°ã€‚è¿™ä¹Ÿé€‚ç”¨äºåµŒå¥—å›¾ã€‚å¯¼èˆªç»„ä»¶åªèƒ½é€šè¿‡å…¶èµ·å§‹ç›®çš„åœ°è¿›å…¥ä»»ä½•åµŒå¥—å›¾ã€‚

## å°†ç›®çš„åœ°åˆ†ç»„åˆ°åµŒå¥—å›¾å½¢ä¸­

*   åœ¨å¯¼èˆªç¼–è¾‘å™¨ä¸­ï¼Œæ‚¨é¦–å…ˆéœ€è¦é€‰æ‹©æƒ³è¦æ”¾å…¥åµŒå¥—å›¾ä¸­çš„æ‰€æœ‰ç›®çš„åœ°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‰ä½ Shift é”®å¹¶ç‚¹å‡»ç›®çš„åœ°æ¥å®ç°ã€‚
*   ç„¶åæˆ‘ä»¬éœ€è¦å³é”®å•å‡»å¹¶é€‰æ‹©ç§»åŠ¨åˆ°åµŒå¥—å›¾å½¢>æ–°å»ºå›¾å½¢ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ªåµŒå¥—å›¾å½¢å¹¶ç§»åŠ¨æ‰€é€‰ç›®çš„åœ°ã€‚çœ‹ä¸€çœ‹:

![](img/3b951e5ce73b72b41b3c11e7dae4242c.png)

*   åŒå‡»åµŒå¥—å›¾å½¢ä»¥æ˜¾ç¤ºå…¶ç›®çš„åœ°ã€‚
*   æˆ‘ä»¬å¯ä»¥ä»æ ¹å›¾ä¸­è§¦å‘åµŒå¥—å›¾ç›®æ ‡ï¼Œå¦‚ä¸‹æ‰€ç¤º:

# å¥–é‡‘

è¦äº†è§£æœ‰å…³ Jetpack åº“çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯»ä»¥ä¸‹æ–‡ç« :

*   [â€œå·¥ä½œç®¡ç†å™¨åŸºç¡€çŸ¥è¯†ï¼Œå¦‚ä½•å°†å·¥ä½œç®¡ç†å™¨ä¸ Rxjava2 ä¸€èµ·ä½¿ç”¨& Kotlin ååŒç¨‹åºâ€](https://medium.com/swlh/workmanager-basics-how-to-use-workmanager-with-rxjava2-kotlin-coroutines-c2a317197038)
*   [â€œå®‰å“æˆ¿é—´æŒä¹…æ€§åº“ğŸ”—ç§‘ç‰¹æ—åç¨‹](https://medium.com/@sgkantamani/android-room-persistence-library-kotlin-coroutines-26d53a09d384)
*   **[â€œApp å¯åŠ¨â€”æ–°æ¶æ„ç»„ä»¶â€](https://medium.com/@sgkantamani/app-startup-new-architecture-component-d115b062a701)**

**è¦äº†è§£æœ‰å…³ Android é«˜çº§å¼€å‘çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯»ä»¥ä¸‹æ–‡ç« :**

*   **[â€œäº†è§£å¦‚ä½•åœ¨ Android ä¸­åˆ›å»ºçŸ¢é‡èµ„æºâ€](https://levelup.gitconnected.com/vector-asserts-in-android-f0774ba8bf92)**
*   **[â€œå®‰å“äº§å“å£å‘³â€](https://medium.com/@sgkantamani/android-product-flavors-eb526e35f9f1)**
*   **[â€œå¦‚ä½•åˆ›å»ºå’Œå‘å¸ƒ Android åº“â€](https://medium.com/@sgkantamani/how-to-create-and-publish-an-android-library-f37bf715932)**
*   **[â€œåœ¨æ‚¨çš„ Android åº”ç”¨ä¸­å®ç°å¹¿å‘Šâ€](https://medium.com/android-dev-hacks/implementing-ads-in-your-android-application-28ac676024aa)**

**ç›®å‰å°±è¿™äº›ã€‚å¸Œæœ›ä½ å­¦åˆ°äº†æœ‰ç”¨çš„ä¸œè¥¿ã€‚æ„Ÿè°¢é˜…è¯»ã€‚**