# ç”¨åŠ¨æ€è¡¨æ ¼æ„å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„è‡ªåŠ¨å®Œæˆæœç´¢è§’åº”ç”¨ç¨‹åº

> åŸæ–‡ï¼š<https://betterprogramming.pub/angular-custom-autocomplete-7ffb479477e7>

## [è½¯ä»¶å·¥ç¨‹](https://rakiabensassi.medium.com/list/software-engineering-7a179a23ebfd)

## ç© CSS è¦†ç›–å’Œæœ‰è§’åº¦çš„ææ–™ç»„ä»¶

![](img/0d50f419d17012379d7b469b690a0e45.png)

[æ–¯ç§‘ç‰¹Â·æ ¼é›·å„å§†](https://unsplash.com/@homajob?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹ç…§

å› ä¸ºæˆ‘ä»¬é¢ä¸´çš„æŒ‘æˆ˜æ°¸è¿œä¸ä¼šç»“æŸã€‚

å› ä¸ºï¼Œä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»¬æ°¸è¿œä¸ä¼šåœæ­¢å­¦ä¹ å’Œæ”¹è¿›ã€‚

å› ä¸º web å¼€å‘æ˜¯ä¸€ç§åˆ›é€ æ€§çš„è‰ºæœ¯ï¼Œä¹Ÿæ˜¯ä¸€ç§æ¸¸æˆâ€”â€”ä¸€ç§æˆ‘ä»¬å¯ä»¥ç©è§„åˆ™çš„æ¸¸æˆã€‚

ç”±äºè¿™äº›åŸå› ï¼Œä»Šå¤©æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªå¯å®šåˆ¶çš„è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼Œåœ¨å…¶è¦†ç›–å›¾ä¸­å‘ˆç°ä¸€ä¸ªåŠ¨æ€è¡¨æ ¼ï¼Œå¹¶å°†å®ƒå¯¼å‡ºä¸ºä¸€ä¸ªè§’åº¦åº“ï¼Œå¦‚ä¸‹é¢çš„è§†é¢‘æ‰€ç¤º:

[å¸¦æœ‰åŠ¨æ€è¡¨æ ¼çš„è‡ªå®šä¹‰è‡ªåŠ¨å®ŒæˆåŠŸèƒ½](https://www.youtube.com/watch?v=tRLu-EbGAI0)

*   åˆ—çš„æ•°é‡ã€ç±»å‹å’Œåç§°ä½œä¸ºè¾“å…¥ä¼ é€’ç»™åŠ¨æ€è¡¨
*   æ‰¿è½½è‡ªå®šä¹‰è‡ªåŠ¨å®ŒæˆåŠŸèƒ½çš„ç»„ä»¶ä¸ºè¡¨æä¾›æ•°æ®åˆ—è¡¨ã€‚è¿™ä¸ªåˆ—è¡¨å¯ä»¥æ˜¯é™æ€çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€çš„(ä¸€ä¸ªå¯è§‚å¯Ÿçš„åˆ—è¡¨)ã€‚
*   ç”¨æˆ·å¯ä»¥é€šè¿‡é¼ æ ‡ç‚¹å‡»æˆ–é€šè¿‡[ä½¿ç”¨é”®ç›˜ç®­å¤´](/angular-keyboard-listeners-good-practices-b208edc6bf89)å¯¼èˆªå¹¶æŒ‰ä¸‹`Enter`é”®ä»æ˜¾ç¤ºçš„é€‰é¡¹åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ã€‚å½“æŒ‰ä¸‹å‘ä¸‹ç®­å¤´æˆ–å‘ä¸Šç®­å¤´æ—¶ï¼Œåˆ—è¡¨ä¸­å…·æœ‰ç„¦ç‚¹çš„é€‰é¡¹ä¼šçªå‡ºæ˜¾ç¤ºï¼Œä»¥å¢å¼ºç”¨æˆ·ä½“éªŒã€‚
*   æ¯å½“é€‰æ‹©ä¸€ä¸ªé€‰é¡¹æ—¶ï¼Œéƒ½ä¼šå‘å®¿ä¸»ç»„ä»¶è¿”å›ä¸€ä¸ªäº‹ä»¶
*   æ¯å½“ç”¨æˆ·æ›´æ”¹æœç´¢æŸ¥è¯¢æ—¶ï¼Œä¹Ÿä¼šæœ‰ä¸€ä¸ªäº‹ä»¶è¿”å›ç»™æ‰˜ç®¡ç»„ä»¶ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä» HTTP æœåŠ¡å™¨è·å–ä¸€ä¸ªæ–°çš„æ•°æ®åˆ—è¡¨ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚

æœ¬æ–‡æ˜¯ä¸Šä¸€ç¯‡æ–‡ç« çš„ç¬¬äºŒéƒ¨åˆ†:"[æ„å»ºä¸€ä¸ªå¯é‡ç”¨çš„æ­¥è¿›å™¨ä½œä¸ºè§’åº¦åº“](/angular-library-dynamic-stepper-2ba05ab40228)"ä»Šå¤©çš„åº“ç‹¬ç«‹äºæ—§çš„åº“ï¼Œä½†æ˜¯å‡ºäºæ¼”ç¤ºçš„ç›®çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®šåˆ¶çš„è‡ªåŠ¨å®ŒæˆåŠŸèƒ½æ‰©å±• create-order æ¨¡æ¿ï¼Œä½œä¸ºä¸€ä¸ªæ–°çš„å­—æ®µï¼Œçœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒã€‚

æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹å§ã€‚

# ç”Ÿæˆæ–°åº“

æˆ‘ä»¬çš„è‡ªå®šä¹‰è‡ªåŠ¨å®Œæˆæ¨¡å—å°†ä½œä¸ºåº“åˆ›å»ºåœ¨`projects`æ–‡ä»¶å¤¹ä¸‹ã€‚ä½ å¯ä»¥ç‚¹å‡»æŸ¥çœ‹ GitHub ä¸Šçš„æºä»£ç [ã€‚å¯¼èˆªåˆ°é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨ç»ˆç«¯ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤:](https://github.com/rakia/ng-dynamic-stepper)

```
ng generate library custom-autocomplete
```

# ç”Ÿæˆåº“çš„ç»„ä»¶

å½“ç”Ÿæˆæˆ‘ä»¬çš„ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‡å®š`--project`æ ‡å¿—æ¥å‘Šè¯‰ Angular CLI åœ¨é€‚å½“çš„åº“æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆå®ƒä»¬ã€‚æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªç»„ä»¶æ¥å®ç°ä»Šå¤©çš„ç›®æ ‡:

```
ng generate component components/option-search-overlay **--project**=custom-autocomplete **--export**ng generate component components/mat-dynamic-table **--project**=custom-autocomplete **--export**ng generate directive directives/click-outside **--project**=custom-autocompleteng generate pipe pipes/get-total **--project**=custom-autocomplete
```

![](img/246197106d6c8995da91ab6d18f20066.png)

è‡ªå®šä¹‰è‡ªåŠ¨å®Œæˆåº“é¡¹ç›®ç»“æ„

# é€‰é¡¹-æœç´¢-è¦†ç›–ç»„ä»¶

ç¬¬ä¸€ä¸ªç»„ä»¶`option-search-overlay`ï¼Œå‘ˆç°ä¸€ä¸ªè¾“å…¥å­—æ®µâ€”â€”ç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­è¾“å…¥æœç´¢æŸ¥è¯¢â€”â€”å¹¶è‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªè¦†ç›–å›¾ï¼Œæ˜¾ç¤ºç»™å®šè¿‡æ»¤å™¨çš„æ­£ç¡®ç»“æœã€‚æ¨¡æ¿çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:

option-search-overlay.component.html

æ‰“å­—ç¨¿éƒ¨åˆ†:

é€‰é¡¹-æœç´¢-è¦†ç›–å›¾.ç»„ä»¶. ts

æœ‰äº”ç§é”®ç›˜ç›‘å¬å™¨:

*   ä¸¤ä¸ªç›‘å¬å™¨ç”¨äº`keydown.arrowdown`å’Œ`keydown.arrowup`åœ¨é€‰é¡¹åˆ—è¡¨ä¸­å¯¼èˆª
*   ä¸€ä¸ªç”¨äºé€‰æ‹©é€‰é¡¹çš„`keydown.enter`é”®ç›‘å¬å™¨
*   ä¸€ä¸ªç”¨äº`keydown.esc`é”®çš„ç›‘å¬å™¨ï¼Œç”¨äºå…³é—­æ‰“å¼€çš„è¦†ç›–å›¾
*   ä¸€ä¸ªç”¨äº`input`è¡¨å•åŸŸä¸Šçš„`keydown`çš„ç›‘å¬å™¨ï¼Œå½“ç”¨æˆ·å¯åŠ¨ t

æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œç¬¬äºŒä¸ªç»„ä»¶`mat-dynamic-table`æ˜¯ç¬¬ä¸€ä¸ªç»„ä»¶`option-search-overlay`çš„å­ç»„ä»¶ã€‚

å½“ç”¨æˆ·å¼€å§‹åœ¨`input`å­—æ®µä¸­è¾“å…¥å†…å®¹æ—¶ï¼Œæˆ‘ä»¬å‘ˆç° DOM å…ƒç´ `ng-template`â€”â€”åŒ…å«åŠ¨æ€è¡¨æ ¼ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åˆ©ç”¨äº† Angular CDK çš„`overlay`åŒ…ï¼Œå®ƒæä¾›äº†ä¸€ç§åœ¨å±å¹•ä¸Šæ‰“å¼€æµ®åŠ¨é¢æ¿çš„æ–¹æ³•:

```
import { OverlayModule } from '@angular/cdk/overlay';
```

ä¸‹é¢æ˜¯ javatpoint.com çš„ä¸€æ®µæ‘˜å½•ï¼Œè§£é‡Šäº†ä»€ä¹ˆæ˜¯å åŠ ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬:

> â€œè¦†ç›–â€çš„æ„æ€æ˜¯ç”¨æ¶‚å±‚è¦†ç›–æŸç‰©çš„è¡¨é¢ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒæ˜¯ç”¨æ¥æŠŠä¸€ä»¶ä¸œè¥¿æ”¾åœ¨å¦ä¸€ä»¶ä¸œè¥¿çš„ä¸Šé¢ã€‚è¦†ç›–å±‚ä½¿ç½‘é¡µæ›´æœ‰å¸å¼•åŠ›ï¼Œå¹¶ä¸”æ˜“äºè®¾è®¡ã€‚
> 
> åˆ›å»ºå åŠ æ•ˆæœæ„å‘³ç€å°†ä¸¤ä¸ª **div** æ”¾åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œä½†æ˜¯ä¸¤ä¸ª div éƒ½å°†åœ¨éœ€è¦æ—¶å‡ºç°ã€‚è¦ä½¿ç¬¬äºŒä¸ª div å‡ºç°ï¼Œæˆ‘ä»¬å¯ä»¥æ‚¬åœæˆ–å•å‡»ä¸€ä¸ª divã€‚"

è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ›´ç›´è§‚çš„å åŠ å›¾ï¼Œçœ‹çœ‹å¦‚ä½•ç”¨[è§’åº¦æè´¨](/angular-10-new-features-dbc779061dc8)æ¥å®ç°å®ƒ:

![](img/3100873fa773dcfcd3eb8cef4ab64e4e.png)

ç”¨äºå®ç°è‡ªå®šä¹‰è‡ªåŠ¨å®Œæˆçš„è§’åº¦ CDK è¦†ç›–å›¾

æˆ‘å·²ç»å‘`input`è¡¨å•å­—æ®µæ·»åŠ äº†ä»¥ä¸‹å±æ€§:

```
cdkOVerlayOrigin #trigger=â€cdkOverlayOriginâ€
```

å¯¹äº`ng-template`æ ‡ç­¾ï¼Œæˆ‘æ·»åŠ äº†ä¸€ä¸ªå±æ€§å’Œä¸¤ä¸ªè¾“å…¥:

```
cdkConnectedOverlay
[cdkConnectedOverlayOrigin]=â€triggerâ€ [cdkConnectedOverlayOpen]=â€isOverlayOpenâ€ 
```

*   å€¼`trigger`å°†`ng-template` DOM å…ƒç´ è¿æ¥åˆ°`input`è¡¨å•å­—æ®µ
*   å€¼`isOverlayOpen`ç”±`option-search-overlay.component.ts`ä¸­çš„`false`åˆå§‹åŒ–ï¼Œç„¶åæ ¹æ®è¦†ç›–å›¾çš„çŠ¶æ€è¿›è¡Œæ›´æ–°:

æ‰“å¼€ï¼Œå…³é—­è¦†ç›–

ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå½“ç”¨æˆ·æ²¡æœ‰é€‰æ‹©é€‰é¡¹å°±ç¦»å¼€æ—¶ï¼Œè¦†ç›–å›¾ä¿æŒæ‰“å¼€ã€‚æˆ‘ä½¿ç”¨äº†ä¸€ä¸ªæŒ‡ä»¤`clickOutside`ï¼Œå®ƒæ£€æµ‹åœ¨ä½¿ç”¨è¯¥æŒ‡ä»¤çš„ DOM å…ƒç´ ä¹‹å¤–çš„`document`ä¸Šçš„ä»»ä½•ç‚¹å‡»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†æ‰§è¡Œ`closeOverlay()`æ–¹æ³•:

æ£€æµ‹ç‰¹å®š DOM å…ƒç´ å¤–çš„å•å‡»çš„è§’åº¦æŒ‡ä»¤

# åŠ¨æ€è¡¨ç»„ä»¶

ç¬¬äºŒä¸ªç»„ä»¶`mat-dynamic-table`æ˜¯ä¸€ä¸ªåŠ¨æ€ææ–™è¡¨ï¼Œè¿™æ„å‘³ç€å®ƒç‹¬ç«‹äºå®ƒçš„åˆ—åˆ—è¡¨ã€‚åœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé€šè¿‡`displayColumnDefs`åˆ—è¡¨çš„å¾ªç¯æ¥ç¡®å®šæ¯ä¸€åˆ—çš„åç§°ã€æ ‡ç­¾ã€å€¼å’Œç±»å‹:

mat-dynamic-table.component.html

ä»¥ä¸‹æ˜¯æ‰“å­—ç¨¿éƒ¨åˆ†:

mat-åŠ¨æ€è¡¨.ç»„ä»¶. ts

ä¸ºäº†è®¡ç®—è¡¨å°¾ä¸­ç±»å‹ä¸º`number`çš„åˆ—çš„æ€»å’Œï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªç®¡é“`getTotal`ã€‚å¯¹äº[æ€§èƒ½](/build-me-an-angular-app-with-memory-leaks-please-36302184e658)æ¥è¯´ï¼Œç®¡é“æ¯”ä½¿ç”¨æ–¹æ³•å¥½å¾—å¤šã€‚ä»…å½“åˆ—å®šä¹‰ä¸­çš„å‚æ•°`hasFooter`ä¸º`true`æ—¶ï¼Œæˆ‘æ‰æ˜¾ç¤ºé¡µè„š:

get-total.pipe.ts

# åœ¨åˆ›å»ºè®¢å•è§†å›¾ä¸­ä½¿ç”¨åº“

æˆ‘ä»¬ç°åœ¨æ‰€éœ€è¦çœ‹åˆ°çš„æ˜¯æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢æ‰€å®ç°çš„ç»“æœï¼Œå³åœ¨è®¢å•åˆ›å»ºçš„ç¬¬ä¸€æ­¥ä¸­é€šè¿‡æ’å…¥`option-search-overlay`ä½œä¸ºä¸€ä¸ªæ–°å­—æ®µæ¥æ›´æ–°è¡¨å•:

create-order-step1.component.html

æˆ‘ä»¬å¿…é¡»é€šè¿‡æ·»åŠ ä¸€ä¸ªæ•°ç»„`displayColumnDefs`æ¥è°ƒæ•´ T [ypeScript](/typescript-new-release-19f1238c6a68) ç»„ä»¶ï¼Œè¯¥æ•°ç»„ä¸ºè‡ªåŠ¨å®Œæˆçš„è¦†ç›–å®šä¹‰äº†åˆ—åˆ—è¡¨ã€‚æˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰`optionSearchConfig`:

[åˆ›å»ºè®¢å•æ­¥éª¤ 1.component.ts](https://gist.github.com/rakia/31f72531518690e9c53aba20fd1c9ef1#file-create-order-step1-component-ts)

æœ‰äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±æœ‰äº†éƒ¨ç½²å’Œä½¿ç”¨åº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ï¼Œå¦‚ä¸Šé¢çš„è§†é¢‘æ‰€ç¤ºã€‚

æƒ³è‡ªå·±å°è¯•ä¸€ä¸‹å—ï¼Ÿ

ç»§ç»­å…‹éš† GitHub åº“[ä¸Šå¯ç”¨çš„æœ€ç»ˆå’Œå®Œå…¨æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆ](https://github.com/rakia/ng-dynamic-stepper)ã€‚

é‚£é‡Œçš„æºä»£ç æ”¯æŒåœ¨`mat-dynamic-table`ä¸­æ˜¾ç¤ºä¸€ä¸ª`checkbox`åˆ—ã€‚å¯¹äºæˆ‘ä»¬çš„è‡ªåŠ¨å®Œæˆæœç´¢æ¥è¯´ï¼Œå¤šé€‰åŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚

æ­¤åº”ç”¨ç¨‹åºçš„ä¸‹ä¸€éƒ¨åˆ†å¯åœ¨æ­¤å¤„è·å¾—:

[](/build-a-hand-pose-detector-web-app-powered-by-machine-learning-62131ec43db5) [## æ„å»ºç”±æœºå™¨å­¦ä¹ é©±åŠ¨çš„æ‰‹éƒ¨å§¿åŠ¿æ£€æµ‹å™¨ Web åº”ç”¨ç¨‹åº

### ç»“åˆæœºå™¨å­¦ä¹ å’Œç½‘ç»œå¼€å‘

better ç¼–ç¨‹. pub](/build-a-hand-pose-detector-web-app-powered-by-machine-learning-62131ec43db5) 

æ„Ÿè°¢é˜…è¯»ï¼æˆ‘å¸Œæœ›è¿™å¯¹æ‚¨çš„ç¼–ç ä¹‹æ—…æœ‰æ‰€å¸®åŠ©å’Œå¯å‘ã€‚

ğŸ§ ğŸ’¡æˆ‘ä¸ºä¸€ç¾¤èªæ˜ã€å¥½å¥‡çš„äººå†™å…³äºå·¥ç¨‹ã€æŠ€æœ¯å’Œé¢†å¯¼åŠ›çš„æ–‡ç« ã€‚ [**åŠ å…¥æˆ‘çš„å…è´¹ç”µå­é‚®ä»¶ç®€è®¯ï¼Œç‹¬å®¶è·å–**](https://rakiabensassi.substack.com/) æˆ–åœ¨æ­¤æ³¨å†Œ Medium [ã€‚](https://rakiabensassi.medium.com/membership)