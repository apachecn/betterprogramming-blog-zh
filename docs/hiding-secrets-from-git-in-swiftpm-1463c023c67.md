# åœ¨ SwiftPM ä¸­å¯¹ Git éšè—ç§˜å¯†

> åŸæ–‡ï¼š<https://betterprogramming.pub/hiding-secrets-from-git-in-swiftpm-1463c023c67>

## æ¨¡å—åŒ–æ‚¨çš„åº”ç”¨

![](img/1bc1d39422c0194ac5c84da96089306d.png)

ç…§ç‰‡ç”±[é£:D](https://unsplash.com/@flyd2069) ä¸Š[çš„ Unsplash](https://unsplash.com)

ä½ å¯èƒ½çŸ¥é“ä¸€äº›éšè—ç§˜å¯†çš„ä¼ ç»Ÿæ–¹æ³•ï¼Œæ¯”å¦‚ä½ çš„åº”ç”¨ç¨‹åºéœ€è¦çš„ API å¯†é’¥æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡ä»¤ç‰Œã€‚ä½†æ˜¯ç°åœ¨ä½¿ç”¨ SwiftPM æ¨¡å—åŒ–åº”ç”¨ç¨‹åºçš„æ–¹æ³•å˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚

ä¾‹å¦‚ï¼ŒPoint-Free æœ‰ä¸€ä¸ªå…³äºè¿™ä¸ªä¸»é¢˜çš„å¾ˆæ£’çš„[å…è´¹å‰§é›†](https://www.pointfree.co/episodes/ep171-modularization-part-1)ï¼ŒMajid Jabrayilov æœ€è¿‘å†™äº†ä¸€ä¸ªå…³äºâ€œå¾®åº”ç”¨æ¶æ„â€çš„ 4 é›†ç³»åˆ—(ç¬¬ [1](https://swiftwithmajid.com/2022/01/12/microapps-architecture-in-swift-spm-basics/) ã€ [2](https://swiftwithmajid.com/2022/01/19/microapps-architecture-in-swift-feature-modules/) ã€ [3](https://swiftwithmajid.com/2022/01/26/microapps-architecture-in-swift-resources-and-localization/) ã€ [4](https://swiftwithmajid.com/2022/02/02/microapps-architecture-in-swift-dependency-injection/) )ï¼Œæˆ‘éƒ½å¯ä»¥æ¨èå¼€å§‹ã€‚

æ­¤å¤–ï¼Œæ‚¨ç”šè‡³å¯èƒ½å¸Œæœ›åœ¨å…¬å…±å¼€æºåº“ä¸­éšè—ç§˜å¯†ï¼Œä¾‹å¦‚ï¼Œåœ¨ä¸€äº›ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆçš„å•å…ƒæµ‹è¯•ä¸­ï¼Œåº“çš„ç”¨æˆ·å°†æä¾›ä»–ä»¬è‡ªå·±çš„ä»¤ç‰Œï¼Œä½†æ˜¯æ‚¨å¸Œæœ›[æ‚¨çš„æµ‹è¯•ä¸æ‚¨è‡ªå·±çš„](https://github.com/Flinesoft/BartyCrouch/blob/baece7f4786bc805358f35ba5fd60d6259d5c8b9/Tests/BartyCrouchTranslatorTests/MicrosoftTranslatorApiTests.swift#L8)ä¸€èµ·è¿è¡Œã€‚

è¿™äº›æƒ…å†µçš„å…±åŒç‚¹æ˜¯å®ƒä»¬åŸºäºè‡ªå®šä¹‰ç»´æŠ¤çš„`Package.swift`æ–‡ä»¶â€”â€”è€Œä¸æ˜¯ Xcode ä¸ºæ‚¨ç»´æŠ¤çš„æ–‡ä»¶(å¦‚æœæ‚¨åªæ˜¯å°†ä¾èµ–é¡¹æ·»åŠ åˆ°åº”ç”¨ç¨‹åºé¡¹ç›®)ã€‚app æˆ–è€…é¡¹ç›®è¢«æ‹†åˆ†æˆå¾ˆå¤šå°æ¨¡å—ï¼Œæ²¡æœ‰å¯¹åº”çš„`.xcodeproj`æ–‡ä»¶ï¼ŒXcode åªæ˜¯ç›´æ¥æ‰“å¼€`Package.swift`æ–‡ä»¶ï¼Œä¸éœ€è¦é¡¹ç›®ã€‚

è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¯¹äºå•ç‹¬çš„æ¨¡å—ï¼Œæ²¡æœ‰åŠæ³•åœ¨ Xcode ä¸­æŒ‡å®šä»»ä½•æ„å»ºè®¾ç½®æˆ–æ„å»ºè„šæœ¬ï¼Œæ‰€æœ‰è¿™äº›éƒ½éœ€è¦åœ¨`Package.swift`æ¸…å•æ–‡ä»¶ä¸­å®Œæˆã€‚

è™½ç„¶åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ï¼Œè¶Šæ¥è¶Šå¤šçš„æ­¤ç±»åŠŸèƒ½è¢«æ·»åŠ åˆ° SwiftPM ä¸­(å¦‚ [SE-303](https://github.com/apple/swift-evolution/blob/main/proposals/0303-swiftpm-extensible-build-tools.md) ã€ [SE-325](https://github.com/apple/swift-evolution/blob/main/proposals/0325-swiftpm-additional-plugin-apis.md) ã€ [SE-332](https://github.com/apple/swift-evolution/blob/main/proposals/0332-swiftpm-command-plugins.md) )ï¼Œä½†æ²¡æœ‰è¿¹è±¡è¡¨æ˜å®ƒä»¬å°†æ”¯æŒä»»ä½• Xcode ç‰¹æœ‰çš„åŠŸèƒ½ï¼Œå¦‚`.xcconfig`æ–‡ä»¶ã€‚

æˆ‘ä»¬å¦‚ä½•éšè—æäº¤ç»™ Git çš„ç§˜å¯†ï¼Œä»¥ç¡®ä¿ä¸ä¼šæ³„éœ²ç»™æˆ‘ä»¬çš„ Git æä¾›å•†æˆ–ä»»ä½•èƒ½å¤Ÿè®¿é—®æˆ‘ä»¬çš„å›è´­*çš„äººï¼Ÿ*

# SwiftPM èµ„æºå’Œ JSONDecoder åŠ©æ‚¨ä¸€è‡‚ä¹‹åŠ›

æˆ‘ç¡®ä¿¡è¿™ä¸ªé—®é¢˜æ²¡æœ‰å”¯ä¸€çš„â€œæœ€ä½³â€ç­”æ¡ˆï¼Œå…¶ä»–äººå¯èƒ½æœ‰æ¯”æˆ‘æ›´èªæ˜çš„æƒ³æ³•ã€‚ä½†æ˜¯æˆ‘å–œæ¬¢[ä¿æŒäº‹æƒ…ç®€å•](https://en.wikipedia.org/wiki/KISS_principle)å¹¶ä¸”æˆ‘ä¹Ÿå–œæ¬¢ä½¿ç”¨åŸºæœ¬åŠŸèƒ½ï¼Œå› ä¸ºæˆ‘å¾ˆäº†è§£å®ƒä»¬&å¦‚æœéœ€è¦çš„è¯ï¼Œæˆ‘å¸Œæœ›å…¶ä»–å¼€å‘äººå‘˜èƒ½å¾ˆå¿«ç†è§£å®ƒä»¬ã€‚å¦å¤–ï¼Œæˆ‘å¯ä»¥è‚¯å®šå®ƒä»¬æ˜¯ç»å¾—èµ·æœªæ¥è€ƒéªŒçš„ã€‚

æˆ‘æƒ³ä½¿ç”¨çš„æ–¹æ³•æ˜¯ web å¼€å‘ä¸­å¸¸è§çš„ç»å…¸çš„æ–‡ä»¶æ–¹æ³•ã€‚ä½†æ˜¯æˆ‘ä¸æƒ³è¦ä¸€ä¸ªå®šåˆ¶æ ¼å¼çš„`.env`æ–‡ä»¶ï¼Œæˆ‘åªæƒ³æœ‰ä¸€ä¸ª`.json`æ–‡ä»¶ï¼Œé‡Œé¢æœ‰æˆ‘çš„ç§˜å¯†ï¼Œå› ä¸º JSON æ–‡ä»¶æ˜¯è®¸å¤š iOS å¼€å‘è€…æ‰€ç†Ÿæ‚‰çš„ï¼Œå¹¶ä¸”ç”±äº`[JSONDecoder](https://developer.apple.com/documentation/foundation/jsondecoder)`ï¼Œæˆ‘ä»¬å·²ç»å†…ç½®äº†å¯¹ Swift è§£æå®ƒä»¬çš„æ”¯æŒã€‚ä» Swift 5.3 å¼€å§‹ï¼ŒSwiftPM ä¹Ÿæ”¯æŒåŠ è½½æ–‡ä»¶æˆ–æ›´ä¸€èˆ¬çš„â€œèµ„æºâ€( [SE-271](https://github.com/apple/swift-evolution/blob/main/proposals/0271-package-manager-resources.md) )ã€‚

ä»¥ä¸‹æ˜¯æˆ‘æƒ³å¦‚ä½•å¯¹ Git éšè—ç§˜å¯†çš„åŸºæœ¬æƒ³æ³•:

1.  å°†ä¸€ä¸ª`secrets.json.sample`æ–‡ä»¶ç­¾å…¥åˆ° Git ä¸­ï¼Œå¸¦æœ‰é”®ï¼Œä½†æ˜¯æ²¡æœ‰å€¼
2.  è®©å¼€å‘äººå‘˜å¤åˆ¶å®ƒï¼Œåˆ é™¤`.sample`æ‰©å±•&æ·»åŠ å€¼
3.  é€šè¿‡`.gitignore`å¿½ç•¥`secrets.json`æ–‡ä»¶ï¼Œè¿™æ ·å®ƒå°±æ°¸è¿œä¸ä¼šè¢«æ£€å…¥
4.  æä¾›ä¸€ä¸ªç®€å•çš„ç¬¦åˆ`Decodable`çš„`struct`æ¥è¯»å–ç§˜å¯†

æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†æ˜¯å¦‚ä½•åº”ç”¨è¿™ç§æ–¹æ³•çš„åˆ†æ­¥æŒ‡å—ã€‚ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œæˆ‘å°†ä½¿ç”¨æˆ‘çš„å¼€æºç¿»è¯‘å·¥å…· [BartyCrouch](https://github.com/Flinesoft/BartyCrouch) çš„å•å…ƒæµ‹è¯•ï¼Œå®ƒé›†æˆäº†ä¸¤ä¸ªç¬¬ä¸‰æ–¹ç¿»è¯‘æœåŠ¡ã€‚

> âš ï¸è¯·æ³¨æ„ï¼Œå¦‚æœä½ è®¡åˆ’å°†è¿™ç§æ–¹æ³•åº”ç”¨äºä½ å°†äº¤ä»˜ç»™ç”¨æˆ·çš„**åº”ç”¨ç›®æ ‡**ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä¸è¿™ç¯‡ NSHipster æ–‡ç« ä¸­çš„`.xcconfig`æ–¹æ³•æ‰€æè¿°çš„ç›¸åŒçš„é—®é¢˜ã€‚æˆ‘çš„æ–¹æ³•åªæ˜¯å¸®åŠ©éšè— Git çš„ç§˜å¯†ï¼Œå¦‚æœä½ æ‰“ç®—å‘å¸ƒç»™ç”¨æˆ·ï¼Œä½ å°†éœ€è¦é¢å¤–çš„æ··æ·†ã€‚

# æ·»åŠ `secrets.json`èµ„æºæ–‡ä»¶

é¦–å…ˆï¼Œè®©æˆ‘ä»¬å°†`secrets.json`æ–‡ä»¶æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚ç”±äºå°†æœ‰ä¸€ä¸ªç›¸åº”çš„`secrets.json.sample`å’Œä¸€ä¸ª`Secrets.swift`æ–‡ä»¶ï¼Œæˆ‘é€‰æ‹©å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹`Secrets`ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå‘½åä¸º`secrets.json`ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªç®€å•çš„ JSON å­—å…¸ç»“æ„ï¼ŒåŒ…å«ä¸¤ä¸ªé”®:

![](img/a8e7374f66b037493cdad6fb29c335fb.png)

æ·»åŠ åˆ°é¡¹ç›®ä¸­çš„å¸¦æœ‰ä¸¤ä¸ªå®é™…ç§˜å¯†çš„â€œsecrets.jsonâ€æ–‡ä»¶ã€‚

å…¶æ¬¡ï¼Œè®©æˆ‘ä»¬é€šè¿‡å°†`secrets.json`é™„åŠ åˆ°æˆ‘ä»¬çš„`.gitignore`æ–‡ä»¶æ¥ç¡®ä¿æˆ‘ä»¬ä¸ä¼šæ„å¤–æäº¤è¯¥æ–‡ä»¶ã€‚å¦‚æœæ‚¨çš„é¡¹ç›®ä¸­è¿˜æ²¡æœ‰ä¸€ä¸ª`.gitignore`æ–‡ä»¶ï¼Œåªéœ€åœ¨æ‚¨çš„åº“çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªï¼Œä¾‹å¦‚é€šè¿‡è¿è¡Œ`touch .gitignore`ã€‚å¦‚æœæ‚¨åœ¨ Finder ä¸­çœ‹ä¸åˆ°è¯¥æ–‡ä»¶ï¼Œåªéœ€é€šè¿‡`Cmd+Shift+.`æ‰“å¼€æ˜¾ç¤ºéšè—æ–‡ä»¶ã€‚ç»“æœåº”è¯¥æ˜¯è¿™æ ·çš„:

![](img/323fa8dfcdb43cefda5366cf1c1d91da.png)

â€œ. gitignoreâ€æ–‡ä»¶ä¸­çš„â€œsecrets.jsonâ€æ¡ç›®ç»“æŸã€‚æ–‡ä»¶åœ¨ [Atom](https://atom.io) æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€ã€‚

> é¡ºä¾¿è¯´ä¸€ä¸‹:`.gitignore`æ–‡ä»¶ä¸­ä¸Šé¢çš„å…¶ä»–æ¡ç›®éƒ½æ˜¯ä»[è¿™ä¸ª](https://github.com/github/gitignore) GitHub ç¤¾åŒºé¡¹ç›®ï¼Œç‰¹åˆ«æ˜¯ä» [macOS](https://github.com/github/gitignore/blob/main/Global/macOS.gitignore) å’Œ [Swift](https://github.com/github/gitignore/blob/main/Swift.gitignore) æ–‡ä»¶ä¸­å¤åˆ¶è¿‡æ¥çš„ã€‚

ç¬¬ä¸‰ï¼Œè®©æˆ‘ä»¬åœ¨ Finder ä¸­å¤åˆ¶æˆ‘ä»¬çš„`secrets.json`æ–‡ä»¶(Xcode ä¸æ”¯æŒå¤åˆ¶æ–‡ä»¶ AFAIK)å¹¶å‘½åä¸º`secrets.json.sample`ã€‚è¿™ä¸ªæ–‡ä»¶å°†è¢«ç­¾å…¥ Gitï¼Œå› æ­¤ç­¾å‡ºé¡¹ç›®çš„å…¶ä»–äººå¯ä»¥è½»æ¾åœ°å¤åˆ¶å®ƒå¹¶åˆ é™¤`.sample`æ‰©å±•ï¼Œè€Œä¸å¿…æŸ¥æ‰¾å®é™…éœ€è¦å“ªäº›é”®ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¿…é¡»åˆ é™¤æ–‡ä»¶ä¸­çš„ç§˜å¯†ï¼Œæˆ‘å°†ç”¨ä¸€äº›æœ‰ç”¨çš„æç¤ºæ¥ä»£æ›¿å®ƒï¼Œæ¯”å¦‚`<add secret here after duplicating this file & removing .sample ext>`:

![](img/f76a7bd12233cf9cd620030867cfd279.png)

æ·»åŠ åˆ°é¡¹ç›®ä¸­çš„ä¸å¸¦ä»»ä½•ç§˜å¯†å€¼çš„â€œsecrets.json.sampleâ€æ–‡ä»¶ã€‚

ç¬¬å››ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ SwiftPM åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°æˆ‘ä»¬çš„æ–° JSON æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬ä»¥åå°±å¯ä»¥åœ¨ä»£ç ä¸­è®¿é—®å®ƒã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åªéœ€åœ¨æ¸…å•æ–‡ä»¶ä¸­å‘ç›®æ ‡çš„`resources`å‚æ•°æ·»åŠ ä¸€ä¸ª`.copy`æ¡ç›®ã€‚æä¾›ç›®æ ‡æ–‡ä»¶å¤¹çš„ç›¸å¯¹è·¯å¾„å°±è¶³å¤Ÿäº†ï¼Œåœ¨æˆ‘çš„ä¾‹å­ä¸­æ˜¯`BartyCrouchTranslatorTests`ã€‚ç»“æœçœ‹èµ·æ¥åƒè¿™æ ·:

![](img/bda12fb3f2a4a6c90a2ee7b7e9ed2620.png)

` secrets.json 'æ–‡ä»¶ä½œä¸ºèµ„æºæ·»åŠ åˆ°` Package.swift `æ¸…å•æ–‡ä»¶ä¸­ã€‚

ä½†æ˜¯å¯¹äºè¿™ä¸ªå•ç‹¬çš„`resources`æ¡ç›®ï¼Œæˆ‘ä»¬ä» Xcode å¾—åˆ°ä¸€ä¸ªè­¦å‘Šï¼Œå› ä¸ºå®ƒåœ¨åŒ…æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°äº†æˆ‘ä»¬çš„`secrets.json.sample`æ–‡ä»¶ï¼Œå´ä¸çŸ¥é“å¦‚ä½•å¤„ç†å®ƒã€‚

![](img/72444f76bbfd395e0e031a44ff111327.png)

å½“ Xcode å‘ç°è½¯ä»¶åŒ…æ¸…å•ä¸­æ²¡æœ‰å£°æ˜çš„èµ„æºæ–‡ä»¶æ—¶ï¼Œå®ƒä¼šå‘å‡ºè­¦å‘Šã€‚

è¿™å¯ä»¥é€šè¿‡å°†ä¸Šé¢çš„æ¡ç›®ä»`.copy("Secrets/secrets.json")`æ”¹ä¸º`.copy("Secrets")`æ¥æ¥å—`Secrets`æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ¥è§£å†³ã€‚æˆ–è€…ï¼Œæˆ‘è®¤ä¸ºæ›´æ­£ç¡®çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†æ–‡ä»¶`.sample`æ·»åŠ åˆ°`exclude`å‚æ•°ä¸­æ¥å‘Šè¯‰ SwiftPM æ˜¾å¼å¿½ç•¥è¯¥æ–‡ä»¶:

![](img/a705d5ece63c3e4aabd1392e7e177e43.png)

ç¨‹åºåŒ…æ¸…å•æ–‡ä»¶ä¸­çš„â€œexcludeâ€æ¡ç›®ï¼Œç”¨äºæ¶ˆé™¤è­¦å‘Šã€‚

# ä½¿ç”¨`JSONDecoder`åŠ è½½ä»£ç ä¸­çš„ç§˜å¯†

ç°åœ¨æˆ‘ä»¬æœ‰äº†`secrets.json`èµ„æºæ–‡ä»¶ï¼Œè®©æˆ‘ä»¬åœ¨ Swift ä¸­è®¿é—®å®ƒã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º`Secrets.swift`çš„æ–° Swift æ–‡ä»¶ï¼Œåœ¨ä¸€ä¸ªç®€å•çš„`struct`ä¸­ä½¿ç”¨æˆ‘ä»¬çš„ä¸¤ä¸ªå¯†é’¥ä½œä¸ºå±æ€§ï¼Œå®ƒç¬¦åˆ`Decodable`:

å…¶æ¬¡ï¼Œè®©æˆ‘ä»¬å®ç°ä¸€äº›è§£ææˆ‘ä»¬çš„`secrets.json`æ–‡ä»¶çš„ä»£ç ã€‚æˆ‘æ›´å–œæ¬¢å°†åŠŸèƒ½ä½œä¸º`static` func ç›´æ¥æ·»åŠ åˆ°æˆ‘ä»¬çš„æ–°`Secrets`ç»“æ„ä¸­:

è¯·æ³¨æ„ï¼Œ`Bundle.module`åªæœ‰åœ¨æ‚¨å®é™…ä¸Šè‡³å°‘æœ‰ä¸€ä¸ªèµ„æºæ·»åŠ åˆ°æ‚¨çš„ç›®æ ‡ä¸­æ—¶æ‰ä¼šç”±ç¼–è¯‘å™¨ç”Ÿæˆã€‚æ‰€ä»¥å¦‚æœä½ å¾—åˆ°ä¸€ä¸ªç¼–è¯‘å™¨é”™è¯¯ï¼Œæ£€æŸ¥ä½ æ˜¯å¦å·²ç»æ·»åŠ äº†`resources`å¹¶ä¸”ä½ çš„ç›®æ ‡ä¸­ç¡®å®æœ‰è‡³å°‘ä¸€ä¸ªèµ„æºæ–‡ä»¶ï¼Œå°±åƒæˆ‘ä»¬ä¸Šé¢åšçš„é‚£æ ·ã€‚

ç¬¬ä¸‰ä¹Ÿæ˜¯æœ€åä¸€ç‚¹ï¼Œæ˜¯æ—¶å€™åœ¨æˆ‘ä»¬éœ€è¦çš„åœ°æ–¹è®¿é—®æˆ‘ä»¬çš„ç§˜å¯†äº†ï¼Œåœ¨æˆ‘çš„ä¾‹å­ä¸­æ˜¯åœ¨å•å…ƒæµ‹è¯•ä¸­ã€‚ä¹‹å‰æˆ‘æœ‰ä¸€è¡Œè¿™æ ·çš„ä»£ç ï¼Œå› ä¸ºæˆ‘ä¸æƒ³åœ¨å…¬å…±å­˜å‚¨åº“ä¸­æäº¤æˆ‘è‡ªå·±çš„å¯†é’¥:

```
let subscriptionKey = ""
```

æˆ‘ç°åœ¨å¯ä»¥ä»`secrets.json`æ–‡ä»¶ä¸­åŠ è½½æˆ‘çš„å¯†é’¥ï¼Œå¹¶åƒè¿™æ ·è®¿é—®å®ƒ:

```
**let** subscriptionKey = **try**! Secrets.load().microsoftSubscriptionKey
```

å°±è¿™æ ·ï¼Œæˆ‘æˆåŠŸåœ°åœ¨æˆ‘çš„æœºå™¨ä¸Šè®¿é—®äº†æˆ‘çš„ç§˜å¯†ï¼Œè€Œæ²¡æœ‰å°†å®ƒä»¬ç­¾å…¥ Gitï¼ä½ å¯ä»¥åœ¨ GitHub çš„[å•æ¬¡æäº¤](https://github.com/Flinesoft/BartyCrouch/commit/b1a98e8d8a83ed725ee29999daa714373eba49dc)ä¸­æ‰¾åˆ°æˆ‘åœ¨ç¤ºä¾‹é¡¹ç›®ä¸­æ‰€åšçš„æ‰€æœ‰æ›´æ”¹ã€‚

å½“ç„¶ï¼Œä»ç°åœ¨å¼€å§‹ï¼Œæ¯ä¸ªæƒ³ç”¨æ­£ç¡®çš„å¯†é’¥è¿è¡Œæˆ‘çš„æµ‹è¯•çš„äººéƒ½éœ€è¦å¤åˆ¶`.sample`æ–‡ä»¶å¹¶æ·»åŠ æ­£ç¡®çš„ç§˜å¯†ã€‚æˆ‘çš„ä¸‹ä¸€æ­¥å¯èƒ½æ˜¯åœ¨æˆ‘çš„`README.md`æˆ–`CONTRIBUTING.md`ä¸­è®°å½•è¿™ä¸€ç‚¹ã€‚åŒæ ·ï¼Œæ‚¨å¯èƒ½æƒ³å‘Šè¯‰æ‚¨çš„å›¢é˜Ÿï¼Œç”šè‡³åœ¨ä¸€ä¸ªå®‰å…¨çš„åœ°æ–¹å…±äº«é¡¹ç›®çš„é€‚å½“çš„`secrets.json`æ–‡ä»¶ï¼Œæ¯”å¦‚å¯†ç ç®¡ç†å™¨ã€‚

# Extra:åœ¨ GitHub CI ä¸Šè®¾ç½® secrets.json

æ—¢ç„¶æˆ‘æ­£åœ¨ä» JSON æ–‡ä»¶åŠ è½½ç§˜å¯†ï¼Œæˆ‘è¿˜æƒ³é…ç½®æˆ‘çš„ GitHub CI ç®¡é“ï¼Œä»¥ä¾¿åœ¨ CI ä¸Šè¿è¡Œæµ‹è¯•æ—¶ä½¿ç”¨æˆ‘çš„ç§˜å¯†å¯†é’¥ã€‚

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ç§˜å¯†ç‰¹æ€§å°†ç§˜å¯†æ·»åŠ åˆ° GitHub æ“ä½œä¸­(å‚è§æ­¤å¤„çš„[æ–‡æ¡£](https://docs.github.com/en/actions/security-guides/encrypted-secrets)):

![](img/b5336a515409ef7735dd67f3a1b7d2e1.png)

å°†ç§˜å¯†æ·»åŠ åˆ°æˆ‘çš„ GitHub å­˜å‚¨åº“ä¸­ã€‚

ä¸ºäº†ç®€å•èµ·è§ï¼Œåœ¨ GitHub Actions å·¥ä½œæµä¸­ï¼Œæˆ‘åªä½¿ç”¨äº†`echo`å‘½ä»¤ï¼Œå¹¶é€šè¿‡`>> path/to/secrets.json`å‚æ•°åœ¨æˆ‘æœŸæœ›çš„è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ªåŒ…å«å…¨éƒ¨`secrets.json`æ–‡ä»¶å†…å®¹çš„æ–‡ä»¶ã€‚é€šè¿‡`${{ secrets.MICROSOFT_SUBSCRIPTION_KEY }}`å®‰å…¨è®¿é—®ç§˜å¯†:

![](img/3f7a91716122e9fae33d1bca4ab3f1c0.png)

å…¨é¢æµ‹è¯• GitHub Action CI ä½œä¸šã€‚

ç°åœ¨ï¼Œåœ¨æ¯æ¬¡ CI è¿è¡Œæ—¶ï¼Œåœ¨è¿è¡Œæµ‹è¯•ä¹‹å‰é…ç½®äº†`secrets.json`æ–‡ä»¶ã€‚

![](img/1c8552556223b1fff21555935c493954.png)

å› æ­¤ï¼Œæˆ‘çš„ CI ä¹Ÿå¯ä»¥å®‰å…¨åœ°è®¿é—®æˆ‘çš„ç§˜å¯†ï¼Œè€Œä¸ä¼šæ³„éœ²å‡ºå»ã€‚

```
**Want to Connect?**Follow me also on ğŸ‘¾ [Twitch](https://www.twitch.tv/Jeehut), on ğŸ¬ [YouTube](https://www.youtube.com/channel/UCtg6Ck7oYa_9k1oSTmFGNRw) and on ğŸ¦ [Twitter](https://twitter.com/Jeehut).
```