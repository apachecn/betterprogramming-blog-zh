<html>
<head>
<title>What Is Helm? A Quickstart Tutorial for Kubernetes Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä»€ä¹ˆæ˜¯å¤´ç›”ï¼ŸKubernetesåˆå­¦è€…å¿«é€Ÿå…¥é—¨æ•™ç¨‹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://betterprogramming.pub/what-is-helm-a-quickstart-tutorial-for-kubernetes-beginners-24fecce1b0eb?source=collection_archive---------13-----------------------#2022-03-14">https://betterprogramming.pub/what-is-helm-a-quickstart-tutorial-for-kubernetes-beginners-24fecce1b0eb?source=collection_archive---------13-----------------------#2022-03-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="27d5" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">æ•™ä½ å¦‚ä½•å¤„ç†åº”ç”¨ç¨‹åºåŒ…ï¼Œå‡çº§å’Œå›æ»š</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c6d95f8c9400060a719716159864db3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4TVr1bmfbZCR6nzA.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">å‡¯å°”Â·è¾›å…‹æ£®åœ¨<a class="ae kv" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„ç…§ç‰‡</p></figure><p id="0189" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ä»Šå¤©ï¼ŒKubernetesæˆä¸ºDevOpsä»ä¸šè€…ç¼–æ’å®¹å™¨çš„å¿…å¤‡å·¥å…·ã€‚ä¸€æ—¦æœ‰äº†åº”ç”¨ç¨‹åºçš„Dockeræ˜ åƒï¼Œå°±å¿…é¡»ç¼–å†™YAMLæ¸…å•æ¥å®šä¹‰Kubernetesçš„å·¥ä½œè´Ÿè½½ã€‚æ¥ä¸‹æ¥ï¼Œç”¨<a class="ae kv" href="https://kubernetes.io/docs/reference/kubectl/" rel="noopener ugc nofollow" target="_blank"> kubectl </a>å‘½ä»¤éƒ¨ç½²å®ƒä»¬ã€‚</p><p id="5950" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">è¿™ç§éƒ¨ç½²æ–¹å¼é€‚ç”¨äºåªæœ‰ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æƒ…å†µã€‚å½“æ‚¨å¼€å§‹æ‹¥æœ‰è®¸å¤šåº”ç”¨ç¨‹åºå’Œå¤šä¸ªç¯å¢ƒæ—¶ï¼Œå®ƒä¼šå˜å¾—ä¸å ªé‡è´Ÿã€‚é€šå¸¸ï¼Œ90%çš„æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½ä¼šå®šä¹‰ç›¸åŒçš„YAMLæ–‡ä»¶ã€‚</p><p id="d535" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†é‡ç‚¹è®¨è®ºå¦‚ä½•ä½¿ç”¨Helmæ™ºèƒ½åœ°ç®¡ç†åº”ç”¨ç¨‹åºã€‚</p><h1 id="a823" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">ä»€ä¹ˆæ˜¯å¤´ç›”ï¼Ÿ</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/b4b0e0c7f428462e9f914563bada8fe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/0*cB9_Z3doNnphE2LJ.png"/></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">æ¥è‡ª<a class="ae kv" href="https://helm.sh/" rel="noopener ugc nofollow" target="_blank">https://helm.sh/</a>çš„æŒèˆµæ ‡å¿—</p></figure><p id="61cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Helm æ˜¯Kubernetesçš„è½¯ä»¶åŒ…ç»ç†ã€‚Helmæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæœ€åˆç”±<a class="ae kv" href="https://deislabs.io/" rel="noopener ugc nofollow" target="_blank">dei blasts</a>åˆ›å»ºï¼Œå¹¶æèµ ç»™<a class="ae kv" href="https://www.cncf.io/" rel="noopener ugc nofollow" target="_blank">äº‘åŸç”ŸåŸºé‡‘ä¼š</a> ( <em class="ml"> CNCF </em>)ã€‚CNCFç°åœ¨ç»´æŒå¹¶å®Œæˆäº†è¯¥é¡¹ç›®ã€‚è¿™æ„å‘³ç€å®ƒæ˜¯æˆç†Ÿçš„ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ç§æ—¶å°šã€‚</p><p id="349e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">åŒ…ç®¡ç†åœ¨è½¯ä»¶è¡Œä¸šä¸­å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°æ¦‚å¿µã€‚åœ¨Linuxå‘è¡Œç‰ˆä¸Šï¼Œä½ å¯ä»¥ç”¨åŒ…ç®¡ç†å™¨æ¥ç®¡ç†è½¯ä»¶çš„å®‰è£…å’Œå¸è½½ï¼Œæ¯”å¦‚<a class="ae kv" href="https://www.redhat.com/sysadmin/how-manage-packages" rel="noopener ugc nofollow" target="_blank"> YUM/RPM </a>æˆ–è€…<a class="ae kv" href="https://ubuntu.com/server/docs/package-management" rel="noopener ugc nofollow" target="_blank"> APT </a>ã€‚åœ¨Windowsä¸Šï¼Œä½ å¯ä»¥åœ¨Macä¸Šä½¿ç”¨<a class="ae kv" href="https://chocolatey.org/" rel="noopener ugc nofollow" target="_blank"> Chocolatey </a>æˆ–<a class="ae kv" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank"> Homebrew </a>ã€‚</p><p id="8cab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Helmå…è®¸æ‚¨åœ¨Kubernetesä¸­æ‰“åŒ…å’Œéƒ¨ç½²å®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚ä¸€ä¸ªåŒ…è¢«ç§°ä¸ºä¸€ä¸ªâ€œ<em class="ml">å›¾è¡¨â€</em> Helmä½¿ç”¨ä¸€ä¸ªåŸºäº<a class="ae kv" href="https://pkg.go.dev/html/template" rel="noopener ugc nofollow" target="_blank"> Goæ¨¡æ¿</a>çš„æ¨¡æ¿ç³»ç»Ÿä»å›¾è¡¨ä¸­å‘ˆç°Kubernetesæ¸…å•ã€‚å›¾è¡¨æ˜¯åˆ†ç¦»æ¨¡æ¿å’Œå€¼çš„ä¸€è‡´ç»“æ„ã€‚</p><p id="2114" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ä½œä¸ºä¸€ä¸ªåŒ…ï¼Œå›¾è¡¨è¿˜å¯ä»¥ç®¡ç†ä¸å…¶ä»–å›¾è¡¨çš„ä¾èµ–å…³ç³»ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºéœ€è¦ä¸€ä¸ªMySQLæ•°æ®åº“æ¥å·¥ä½œï¼Œæ‚¨å¯ä»¥å°†å›¾è¡¨ä½œä¸ºä¸€ä¸ªä¾èµ–é¡¹åŒ…å«è¿›æ¥ã€‚å½“Helmåœ¨å›¾è¡¨ç›®å½•çš„é¡¶å±‚è¿è¡Œæ—¶ï¼Œå®ƒä¼šå®‰è£…æ•´ä¸ªä¾èµ–é¡¹ã€‚æ‚¨åªéœ€è¦ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥å°†æ‚¨çš„åº”ç”¨ç¨‹åºå‘ˆç°å¹¶å‘å¸ƒåˆ°Kubernetesã€‚</p><p id="9de8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Helm chartsä½¿ç”¨ç‰ˆæœ¬æ¥è·Ÿè¸ªæ¸…å•ä¸­çš„å˜åŒ–ï¼Œå› æ­¤æ‚¨å¯ä»¥ä¸ºç‰¹å®šçš„åŸºç¡€æ¶æ„é…ç½®å®‰è£…ç‰¹å®šçš„å›¾è¡¨ç‰ˆæœ¬ã€‚Helmå°†æ‰€æœ‰å·²éƒ¨ç½²å›¾è¡¨çš„å‘å¸ƒå†å²è®°å½•ä¿å­˜åœ¨ä¸€ä¸ªä¸“ç”¨çš„å·¥ä½œåŒºä¸­ã€‚å¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œè¿™ä½¿å¾—åº”ç”¨ç¨‹åºæ›´æ–°å’Œå›æ»šå˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><p id="64da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Helmå…è®¸ä½ å‹ç¼©å›¾è¡¨ã€‚å…¶ç»“æœæ˜¯ä¸€ä¸ªå¯ä¸Dockerå›¾åƒç›¸åª²ç¾çš„ä¼ªåƒã€‚ç„¶åï¼Œæ‚¨å¯ä»¥å°†å®ƒå‘é€åˆ°è¿œå¤„çš„å­˜å‚¨åº“ï¼Œä»¥ä¾¿é‡ç”¨å’Œå…±äº«ã€‚</p><h1 id="98e0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">ä½¿ç”¨Helmæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</h1><ul class=""><li id="d4d1" class="mm mn iq ky b kz mo lc mp lf mq lj mr ln ms lr mt mu mv mw bi translated">Helmä¸ºæ‚¨æä¾›äº†ç”¨ä¸€ä¸ªå‘½ä»¤å®‰è£…åº”ç”¨ç¨‹åºçš„èƒ½åŠ›ã€‚ä¸€ä¸ªå›¾è¡¨å¯ä»¥åŒ…å«å…¶ä»–å›¾è¡¨ä½œä¸ºä¾èµ–å…³ç³»ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Helméƒ¨ç½²æ•´ä¸ªå †æ ˆã€‚ä½ å¯ä»¥åƒä½¿ç”¨<a class="ae kv" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank"> docker-compose </a>ä¸€æ ·ä½¿ç”¨Helmï¼Œä½†æ˜¯å¯¹äºKubernetesã€‚</li><li id="1559" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">å›¾è¡¨åŒ…æ‹¬å„ç§Kubernetesèµ„æºçš„æ¨¡æ¿ï¼Œä»¥å½¢æˆä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚è¿™é™ä½äº†å¾®æœåŠ¡çš„å¤æ‚æ€§ï¼Œå¹¶ç®€åŒ–äº†å®ƒä»¬åœ¨Kubernetesä¸­çš„ç®¡ç†ã€‚</li><li id="4c11" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">å›¾è¡¨å¯ä»¥è¢«å‹ç¼©å¹¶å‘é€åˆ°è¿œå¤„çš„å­˜å‚¨åº“ã€‚è¿™ä¸ºKubernetesåˆ›å»ºäº†ä¸€ä¸ªåº”ç”¨ç¨‹åºæ„ä»¶ã€‚æ‚¨è¿˜å¯ä»¥ä»å­˜å‚¨åº“ä¸­è·å–å’Œéƒ¨ç½²ç°æœ‰çš„èˆµå›¾ã€‚è¿™æ˜¯å¯é‡ç”¨æ€§å’Œå…±äº«æ€§çš„ä¸€ä¸ªä¼˜ç‚¹ã€‚</li><li id="1cd7" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">Helmåœ¨Helmå·¥ä½œåŒºä¸­ç»´æŠ¤å·²éƒ¨ç½²å‘å¸ƒç‰ˆæœ¬çš„å†å²è®°å½•ã€‚å½“å‡ºç°é—®é¢˜æ—¶ï¼Œå›æ»šåˆ°ä»¥å‰çš„ç‰ˆæœ¬å¾ˆç®€å•â€”â€”canary releaseé€šè¿‡Helmå®ç°äº†é›¶åœæœºéƒ¨ç½²ã€‚</li><li id="3ef3" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">Helmä½¿å¾—éƒ¨ç½²é«˜åº¦å¯é…ç½®ã€‚åœ¨éƒ¨ç½²æœŸé—´ï¼Œå¯ä»¥åŠ¨æ€å®šåˆ¶åº”ç”¨ç¨‹åºã€‚é€šè¿‡æ›´æ”¹å‚æ•°ï¼Œæ‚¨å¯ä»¥å°†åŒä¸€ä¸ªå›¾è¡¨ç”¨äºå¤šä¸ªç¯å¢ƒï¼Œå¦‚å¼€å‘ã€è¯•è¿è¡Œå’Œç”Ÿäº§ç¯å¢ƒã€‚</li><li id="fb37" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">ç®€åŒ–CI/CDæ¸ é“â€”æ¨è¿›GitOpsæœ€ä½³å®è·µã€‚</li></ul><h1 id="c46e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">å¿«é€ŸæŸ¥çœ‹Helmè§£å†³çš„é—®é¢˜</h1><p id="1464" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">Kubernetesçš„åŸºæœ¬åšæ³•æ˜¯æ‰‹å·¥ç¼–å†™YAMLæ¸…å•ã€‚æˆ‘ä»¬å°†åˆ›å»ºæœ€å°‘çš„YAMLæ–‡ä»¶æ¥åœ¨Kubernetesä¸­éƒ¨ç½²NGINXã€‚</p><p id="05e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ä»¥ä¸‹æ˜¯å°†åˆ›å»ºpodçš„éƒ¨ç½²:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="804d" class="nk lt iq ng b gy nl nm l nn no">apiVersion: apps/v1<br/>kind: Deployment<br/>metadata:<br/>  name: nginx<br/>spec:<br/>  selector:<br/>    matchLabels:<br/>      app: nginx<br/>  replicas: 1<br/>  template:<br/>    metadata:<br/>      labels:<br/>        app: nginx<br/>    spec:<br/>      containers:<br/>      - name: nginx<br/>        image: nginx:1.21.6<br/>        ports:<br/>        - containerPort: 80</span></pre><p id="4b59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">è¯¥æœåŠ¡å‘å¤–éƒ¨å…¬å¼€NGINXã€‚é€šè¿‡é€‰æ‹©å™¨å®Œæˆä¸podçš„é“¾æ¥:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="93cb" class="nk lt iq ng b gy nl nm l nn no">apiVersion: v1<br/>kind: Service<br/>metadata:<br/>  name: nginx<br/>spec:<br/>  selector:<br/>    app: nginx<br/>  ports:<br/>    - protocol: TCP<br/>      port: 80<br/>      targetPort: 8080</span></pre><p id="3e1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ç°åœ¨æˆ‘ä»¬å¿…é¡»ç”¨ä¸‹é¢çš„kubectlå‘½ä»¤åˆ›å»ºå‰é¢çš„èµ„æº:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="4707" class="nk lt iq ng b gy nl nm l nn no">$ kubectl create -f deployment.yaml <br/>$ kubectl create -f service.yaml</span></pre><p id="7fb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">æˆ‘ä»¬æ£€æŸ¥æ‰€æœ‰èµ„æºæ˜¯å¦å¯åŠ¨å¹¶è¿è¡Œ:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="2026" class="nk lt iq ng b gy nl nm l nn no">$ kubectl get deployment -l app=nginx<br/>NAME    READY   UP-TO-DATE   AVAILABLE   AGE<br/>nginx   1/1     1            1           8m29s<br/>$ kubectl get pods -l app=nginx                                                                                      <br/>NAME                     READY   STATUS    RESTARTS   AGE<br/>nginx-65b89996ff-dcfs9   1/1     Running   0          2m26s<br/>$ kubectl get svc -l app=nginx <br/>NAME    TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE<br/>nginx   ClusterIP   10.106.79.171   &lt;none&gt;        80/TCP    4m58s</span></pre><ul class=""><li id="0202" class="mm mn iq ky b kz la lc ld lf np lj nq ln nr lr mt mu mv mw bi translated">YAMLæ¸…å•ä¸­çš„ç‰¹å®šå€¼æ˜¯ç¡¬ç¼–ç çš„ï¼Œä¸å¯é‡ç”¨ã€‚</li><li id="89cf" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">è¦æŒ‡å®šçš„å†—ä½™ä¿¡æ¯(å¦‚æ ‡ç­¾å’Œé€‰æ‹©å™¨)ä¼šå¯¼è‡´æ½œåœ¨çš„é”™è¯¯ã€‚</li><li id="535c" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">Kubectlä¸å¤„ç†æ‰§è¡Œåçš„æ½œåœ¨é”™è¯¯ã€‚æ‚¨å¿…é¡»ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°éƒ¨ç½²æ¯ä¸ªæ–‡ä»¶ã€‚</li><li id="5aac" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated">æ²¡æœ‰å˜æ›´å¯è¿½æº¯æ€§ã€‚</li></ul><h1 id="3ace" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">ä»å¤´å¼€å§‹åˆ›å»ºèˆµå›¾</h1><p id="19f1" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">Helmå¯ä»¥åœ¨ä¸€ä¸ªå‘½ä»¤è¡Œä¸­åˆ›å»ºå›¾è¡¨ç»“æ„:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="9173" class="nk lt iq ng b gy nl nm l nn no">$ helm create nginx</span></pre><h2 id="cde2" class="nk lt iq bd lu ns nt dn ly nu nv dp mc lf nw nx me lj ny nz mg ln oa ob mi oc bi translated">ç†è§£èˆµå›¾çš„ç»“æ„</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/fad98eec3b547f1306a79f281b5dae4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qsbErzoB3tT9s4GQ.png"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">èˆµå›¾çš„æ ‘å½¢ç»“æ„</p></figure><ul class=""><li id="64f3" class="mm mn iq ky b kz la lc ld lf np lj nq ln nr lr mt mu mv mw bi translated"><code class="fe oe of og ng b">Chart.yaml</code>:åŒ…å«å›¾è¡¨ä¿¡æ¯çš„YAMLæ–‡ä»¶ã€‚</li><li id="b649" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated"><code class="fe oe of og ng b">charts</code>:åŒ…å«è¯¥å›¾è¡¨æ‰€ä¾èµ–çš„ä»»ä½•å›¾è¡¨çš„ç›®å½•ã€‚</li><li id="a0f5" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated"><code class="fe oe of og ng b">templates</code>:Helmåœ¨è¿™é‡Œä¸ºæ‚¨çš„æœåŠ¡ã€éƒ¨ç½²å’Œå…¶ä»–Kuberneteså¯¹è±¡æ‰¾åˆ°YAMLå®šä¹‰ã€‚æ‚¨å¯ä»¥ä¸ºè‡ªå·±æ·»åŠ æˆ–æ›¿æ¢ç”Ÿæˆçš„YAMLæ–‡ä»¶ã€‚</li><li id="f6ed" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated"><code class="fe oe of og ng b">templates/NOTES.txt</code>:è¿™æ˜¯ä¸€ä¸ªæ¨¡æ¿åŒ–çš„çº¯æ–‡æœ¬æ–‡ä»¶ï¼Œåœ¨å›¾è¡¨æˆåŠŸéƒ¨ç½²åæ‰“å°å‡ºæ¥ã€‚è¿™æ˜¯ç®€è¦æè¿°ä½¿ç”¨å›¾è¡¨çš„åç»­æ­¥éª¤çš„æœ‰ç”¨ä½ç½®ã€‚</li><li id="df79" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated"><code class="fe oe of og ng b">templates/_helpers.tpl</code>:è¯¥æ–‡ä»¶æ˜¯æ¨¡æ¿ç‰‡æ®µçš„é»˜è®¤ä½ç½®ã€‚æ–‡ä»¶åä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„æ–‡ä»¶è¢«è®¤ä¸ºæ˜¯<em class="ml">è€Œä¸æ˜¯</em>åŒ…å«æ¸…å•ã€‚è¿™äº›æ–‡ä»¶ä¸ä¼šå‘ˆç°åˆ°Kuberneteså¯¹è±¡å®šä¹‰ä¸­ï¼Œä½†åœ¨å…¶ä»–å›¾è¡¨æ¨¡æ¿ä¸­éšå¤„å¯è§ã€‚</li><li id="12d3" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated"><code class="fe oe of og ng b">templates/tests</code>:æµ‹è¯•éªŒè¯æ‚¨çš„å›¾è¡¨åœ¨å®‰è£…åæ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ</li><li id="d61d" class="mm mn iq ky b kz mx lc my lf mz lj na ln nb lr mt mu mv mw bi translated"><code class="fe oe of og ng b">values.yaml</code>:è¯¥å›¾è¡¨çš„é»˜è®¤é…ç½®å€¼</li></ul><h2 id="e4e5" class="nk lt iq bd lu ns nt dn ly nu nv dp mc lf nw nx me lj ny nz mg ln oa ob mi oc bi translated">è‡ªå®šä¹‰æ¨¡æ¿</h2><p id="215c" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">é»˜è®¤æƒ…å†µä¸‹ï¼Œéƒ¨ç½²å›¾è¡¨æ—¶ä¼šè‡ªåŠ¨åŠ è½½<code class="fe oe of og ng b">values.yaml</code>ã€‚è¿™é‡Œæˆ‘ä»¬å°†å›¾åƒæ ‡ç­¾è®¾ç½®ä¸º<code class="fe oe of og ng b">1.21.5</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><blockquote class="oj ok ol"><p id="0663" class="kw kx ml ky b kz la jr lb lc ld ju le om lg lh li on lk ll lm oo lo lp lq lr ij bi translated">æ‚¨å¯ä»¥æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„<code class="fe oe of og ng b">values.yaml</code>æ–‡ä»¶æ¥ä¸ºç‰¹å®šäºç¯å¢ƒçš„è®¾ç½®å®šåˆ¶éƒ¨ç½²</p></blockquote><h1 id="4d8d" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">å®‰è£…èˆµå›¾</h1><p id="1ea5" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">å¦‚æœä½ åšäº†æ›´æ–°ï¼Œåœ¨éƒ¨ç½²èˆµå›¾ä¹‹å‰è¿è¡Œlinteræ˜¯ä¸€ä¸ªå¥½å»ºè®®:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="7997" class="nk lt iq ng b gy nl nm l nn no">$ helm lint nginx<br/>==&gt; Linting nginx<br/>[INFO] Chart.yaml: icon is recommended<br/><br/>1 chart(s) linted, 0 chart(s) failed</span></pre><p id="c0f5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">è¿è¡ŒHelmï¼Œåœ¨æ¨¡æ‹Ÿå’Œè°ƒè¯•æ¨¡å¼ä¸‹å®‰è£…å›¾è¡¨ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡æ­£å¸¸:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="1dde" class="nk lt iq ng b gy nl nm l nn no">$ helm install --debug --dry-run nginx nginx</span></pre><blockquote class="oj ok ol"><p id="aedd" class="kw kx ml ky b kz la jr lb lc ld ju le om lg lh li on lk ll lm oo lo lp lq lr ij bi translated">ä½¿ç”¨helm linterå’Œå¸¦è°ƒè¯•æ¨¡å¼çš„é¢„æ¼”å®‰è£…å°†èŠ‚çœæ‚¨å¼€å‘è¿‡ç¨‹ä¸­çš„å®è´µæ—¶é—´ã€‚</p></blockquote><p id="f8b4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">è¦å®‰è£…å›¾è¡¨ï¼Œè¯·ç§»é™¤<code class="fe oe of og ng b">--dry-run</code>æ ‡å¿—:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><p id="d9d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">æ‚¨å¯ä»¥çœ‹åˆ°<code class="fe oe of og ng b">NOTES.txt</code>çš„æ¨¡æ¿åŒ–å†…å®¹ï¼Œè§£é‡Šå¦‚ä½•è¿æ¥åˆ°åº”ç”¨ç¨‹åºã€‚</p><p id="1d51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨Helmå·¥ä½œåŒºä¸­æ£€ç´¢ç‰ˆæœ¬:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="3d78" class="nk lt iq ng b gy nl nm l nn no">$ helm list               <br/>NAME    NAMESPACE       REVISION        UPDATED                                 STATUS          CHART           APP VERSION<br/>nginx   default         1               2022-03-14 12:01:46.926038 +0100 CET    deployed        nginx-0.1.0     1.0.0</span></pre><h1 id="0159" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">å‡çº§èˆµé‡Šæ”¾</h1><p id="e18a" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">å‡è®¾å‡ºäºæµ‹è¯•ç›®çš„ï¼Œæ‚¨æƒ³è¦å°†å®¹å™¨æ˜ åƒå‡çº§åˆ°<code class="fe oe of og ng b">1.21.6</code>ã€‚</p><p id="f1b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">æˆ‘ä»¬å°†ä»å‘½ä»¤è¡Œæ›´æ”¹è®¾ç½®ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„<code class="fe oe of og ng b">values.yaml</code>ã€‚</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="577c" class="nk lt iq ng b gy nl nm l nn no">$ helm upgrade nginx nginx --set image.tag=1.21.6<br/>Release "nginx" has been upgraded. Happy Helming!<br/>NAME: nginx<br/>LAST DEPLOYED: Mon Mar 14 12:04:40 2022<br/>NAMESPACE: default<br/>STATUS: deployed<br/>REVISION: 2<br/>NOTES:<br/>1. Get the application URL by running these commands:<br/>  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=nginx,app.kubernetes.io/instance=nginx" -o jsonpath="{.items[0].metadata.name}")<br/>  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")<br/>  echo "Visit <a class="ae kv" href="http://127.0.0.1:8080" rel="noopener ugc nofollow" target="_blank">http://127.0.0.1:8080</a> to use your application"<br/>  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT</span></pre><p id="e0a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">podä¹Ÿä½¿ç”¨æ–°çš„å®¹å™¨å›¾åƒ:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="542d" class="nk lt iq ng b gy nl nm l nn no">$ kubectl get pod -l app.kubernetes.io/name=nginx -o jsonpath='{.items[0].spec.containers[0].image}'<br/>nginx:1.21.6</span></pre><p id="ad08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">å‡çº§åœ¨å›¾è¡¨å†å²ä¸­å¯è§:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="c22e" class="nk lt iq ng b gy nl nm l nn no">$ helm history nginx                                                   <br/>REVISION        UPDATED                         STATUS          CHART           APP VERSION     DESCRIPTION     <br/>1               Mon Mar 14 12:07:33 2022        superseded      nginx-0.1.0     1.0.0           Install complete<br/>2               Mon Mar 14 12:08:25 2022        deployed        nginx-0.1.0     1.0.0           Upgrade complete</span></pre><p id="5063" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ä½¿ç”¨<code class="fe oe of og ng b">helm diff</code>å¯ä»¥æ£€æŸ¥å˜åŒ–:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="6649" class="nk lt iq ng b gy nl nm l nn no">$ helm diff revision nginx 1 2<br/>default, nginx, Deployment (apps) has changed:<br/>  # Source: nginx/templates/deployment.yaml<br/>  apiVersion: apps/v1<br/>  kind: Deployment<br/>  metadata:<br/>    name: nginx<br/>    labels:<br/>      helm.sh/chart: nginx-0.1.0<br/>      app.kubernetes.io/name: nginx<br/>      app.kubernetes.io/instance: nginx<br/>      app.kubernetes.io/version: "1.0.0"<br/>      app.kubernetes.io/managed-by: Helm<br/>  spec:<br/>    replicas: 1<br/>    selector:<br/>      matchLabels:<br/>        app.kubernetes.io/name: nginx<br/>        app.kubernetes.io/instance: nginx<br/>    template:<br/>      metadata:<br/>        labels:<br/>          app.kubernetes.io/name: nginx<br/>          app.kubernetes.io/instance: nginx<br/>      spec:<br/>        serviceAccountName: nginx<br/>        securityContext:<br/>          {}<br/>        containers:<br/>          - name: nginx<br/>            securityContext:<br/>              {}<br/>-           image: "nginx:1.21.5"<br/>+           image: "nginx:1.21.6"<br/>            imagePullPolicy: IfNotPresent<br/>            ports:<br/>              - name: http<br/>                containerPort: 80<br/>                protocol: TCP<br/>            livenessProbe:<br/>              httpGet:<br/>                path: /<br/>                port: http<br/>            readinessProbe:<br/>              httpGet:<br/>                path: /<br/>                port: http<br/>            resources:<br/>              {}</span></pre><h1 id="5451" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">å›æ»šèˆµé‡Šæ”¾</h1><p id="4b3b" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">å‡çº§ä¸ç¡®å®šï¼Œæ‚¨æƒ³è¿”å›ã€‚ç”±äºHelmä¿ç•™æ‰€æœ‰æ›´æ”¹ï¼Œå›æ»šéå¸¸ç®€å•:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="38bb" class="nk lt iq ng b gy nl nm l nn no">$ helm rollback nginx 1<br/>Rollback was a success! Happy Helming!</span></pre><p id="4bd1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">podç°åœ¨å›åˆ°<code class="fe oe of og ng b">1.21.5</code>å®¹å™¨å›¾åƒ:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="8d60" class="nk lt iq ng b gy nl nm l nn no">$ kubectl get pod -l app.kubernetes.io/name=nginx -o jsonpath='{.items[0].spec.containers[0].image}'<br/>nginx:1.21.5</span></pre><h1 id="17ca" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">å¸è½½èˆµå›¾</h1><p id="345e" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">å¸è½½èˆµå›¾å’Œå®‰è£…ä¸€æ ·ç®€å•:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="653f" class="nk lt iq ng b gy nl nm l nn no">$ helm uninstall nginx</span></pre><h1 id="d25f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">é‡ç”¨ç°æœ‰çš„èˆµå›¾</h1><p id="ac14" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">è®¸å¤šè‘—åçš„é¡¹ç›®æä¾›äº†èˆµå›¾ï¼Œä½¿é›†æˆæ›´åŠ ç”¨æˆ·å‹å¥½ã€‚ä»–ä»¬é€šè¿‡å­˜å‚¨åº“æä¾›å›¾è¡¨ã€‚ä½ åªè¦æŠŠå®ƒåŠ åœ¨ä½ è¿™è¾¹:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="0c30" class="nk lt iq ng b gy nl nm l nn no">$ helm repo add bitnami <a class="ae kv" href="https://charts.bitnami.com/bitnami" rel="noopener ugc nofollow" target="_blank">https://charts.bitnami.com/bitnami</a></span></pre><p id="7b9f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">æ·»åŠ åï¼Œæ›´æ–°æ‚¨çš„æœ¬åœ°ç¼“å­˜ä»¥ä¸è¿œç¨‹å­˜å‚¨åº“åŒæ­¥ä¿¡æ¯:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="2273" class="nk lt iq ng b gy nl nm l nn no">$ helm repo update</span></pre><p id="8b79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">ç°åœ¨å¯ä»¥åœ¨Kubernetesé›†ç¾¤ä¸Šå®‰è£…å›¾è¡¨äº†:</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="3f5c" class="nk lt iq ng b gy nl nm l nn no">$ helm install nginx bitnami/nginx</span></pre><p id="b422" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">å›¾è¡¨ä½¿ç”¨é»˜è®¤å€¼è¿›è¡Œéƒ¨ç½²ã€‚æ‚¨å¯ä»¥å¯å‘å¹¶æŒ‡å®šä¸€ä¸ªå®šåˆ¶<code class="fe oe of og ng b">values.yaml</code>æ¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ï¼</p><pre class="kg kh ki kj gt nf ng nh ni aw nj bi"><span id="9387" class="nk lt iq ng b gy nl nm l nn no">$ helm install my-release bitnami/nginx -f values.yaml</span></pre></div><div class="ab cl op oq hu or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="ij ik il im in"><p id="9d59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">æ„Ÿè°¢é˜…è¯»ï¼ğŸ™æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« æ˜¯æœ‰å¸®åŠ©çš„ã€‚æƒ³äº†è§£æ›´å¤šå…³äºDevOpsçš„çŸ¥è¯†ï¼Ÿçœ‹çœ‹ä¸‹é¢æ›´å¤šç±»ä¼¼çš„æ–‡ç« å§ï¼â¬‡ï¸</p><div class="ow ox gp gr oy oz"><a href="https://getbetterdevops.io" rel="noopener  ugc nofollow" target="_blank"><div class="pa ab fo"><div class="pb ab pc cl cj pd"><h2 class="bd ir gy z fp pe fr fs pf fu fw ip bi translated">Getbetterdevops</h2><div class="pg l"><h3 class="bd b gy z fp pe fr fs pf fu fw dk translated">Getbetterdevopsæ˜¯ä¸€ä¸ªdevopsåšå®¢ï¼Œå¸®åŠ©å­¦ä¹ ç°ä»£åŸºç¡€è®¾æ–½å’Œäº‘æŠ€æœ¯ï¼Œå¦‚Kubernetesâ€¦</h3></div><div class="ph l"><p class="bd b dl z fp pe fr fs pf fu fw dk translated">getbetterdevops.io</p></div></div><div class="pi l"><div class="pj l pk pl pm pi pn kp oz"/></div></div></a></div></div></div>    
</body>
</html>