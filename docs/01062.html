<html>
<head>
<title>Auth With Firebase for React + Redux Apps: From 0 to 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React + Reduxåº”ç”¨ç¨‹åºçš„Firebaseæˆæƒ:ä»0åˆ°1</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://betterprogramming.pub/https-medium-com-clairechabas-auth-with-firebase-for-react-redux-apps-from-0-to-1-104e7343521b?source=collection_archive---------1-----------------------#2019-08-12">https://betterprogramming.pub/https-medium-com-clairechabas-auth-with-firebase-for-react-redux-apps-from-0-to-1-104e7343521b?source=collection_archive---------1-----------------------#2019-08-12</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><h2 id="59ac" class="ir is it bd b dl iu iv iw ix iy iz dk ja translated" aria-label="kicker paragraph">å®Œæ•´çš„åˆ†æ­¥æŒ‡å—</h2><div class=""/><div class=""><h2 id="e545" class="pw-subtitle-paragraph jz jc it bd b ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq dk translated">Firebaseä½¿å¾—ä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºè®¾ç½®æ•´ä¸ªè®¤è¯ç³»ç»Ÿå˜å¾—å¾ˆå®¹æ˜“</h2></div><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi kr"><img src="../Images/2c7de00d6184f4caade12f032e365d2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uub5If1_zSaODDNQVwYR-g.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">é¸£è°¢:<a class="ae lh" href="https://unsplash.com/@sapegin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Artem Sapegin </a>åœ¨<a class="ae lh" href="https://unsplash.com/search/photos/react?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>æ‹æ‘„çš„ç”µè„‘å’Œæ¯å­èƒŒæ™¯ç…§ç‰‡</p></figure><p id="ae34" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è®¤è¯æ˜¯ä¸€ä¸ªå¤æ‚çš„è¯é¢˜ï¼Œä¸èƒ½æ‰ä»¥è½»å¿ƒã€‚</p><p id="5a75" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å½“æˆ‘ä»é›¶å¼€å§‹æ„å»ºæˆ‘çš„ç¬¬ä¸€ä¸ªç°å®ä¸–ç•Œåº”ç”¨ç¨‹åº<a class="ae lh" href="https://getmark.app/" rel="noopener ugc nofollow" target="_blank"> Mark </a>çš„è®¤è¯ç³»ç»Ÿæ—¶ï¼Œæˆ‘å‘ç°äº†å®ƒçš„æ¥é¾™å»è„‰ï¼Œè¿™æ˜¯ä¸€ä¸ªChromeæ‰©å±•ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨Chromeçš„<em class="me">æ–°æ ‡ç­¾</em>ä¸»é¡µä¸­é”å®šç½‘é¡µã€‚</p><p id="018d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä»¤äººæ¬£æ…°çš„æ˜¯ï¼Œ<a class="ae lh" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase </a>è®©æˆ‘ä»¬åœ¨å‡ ä¸ªå°æ—¶å†…ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå»ºç«‹æ•´ä¸ªè®¤è¯ç³»ç»Ÿå˜å¾—éå¸¸å®¹æ˜“ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœä½ è‡ªå·±ä»å¤´å¼€å§‹ï¼Œéœ€è¦å‡ å¤©ç”šè‡³å‡ å‘¨çš„æ—¶é—´ã€‚</p><p id="af56" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æœ¬æŒ‡å—æ—¨åœ¨ä½¿ç”¨Firebase Authå°†æ‚¨ä»ä¸€ä¸ªç©ºçš„Reactåº”ç”¨ç¨‹åºè½¬å˜ä¸ºä¸€ä¸ªå…·æœ‰å®Œæ•´èº«ä»½éªŒè¯ç³»ç»Ÿçš„åº”ç”¨ç¨‹åºã€‚æ­£å¦‚æ‚¨å°†çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬åªéœ€äº”ä¸ªæ­¥éª¤å°±èƒ½åšåˆ°:</p><ul class=""><li id="3469" class="mf mg it lk b ll lm lo lp lr mh lv mi lz mj md mk ml mm mn bi translated">æ­¥éª¤1:å®‰è£…å’Œè®¾ç½®ã€‚</li><li id="21fa" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated">æ­¥éª¤2:æ³¨å†Œç”µå­é‚®ä»¶éªŒè¯ã€‚</li><li id="55e0" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated">æ­¥éª¤3:ç™»å½•å¹¶é‡å®šå‘ã€‚</li><li id="4b1f" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated">ç¬¬å››æ­¥:æ³¨é”€ã€‚</li><li id="1875" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated">ç¬¬äº”æ­¥:å¯†ç é‡ç½®ã€‚</li><li id="fea2" class="mf mg it lk b ll mo lo mp lr mq lv mr lz ms md mk ml mm mn bi translated">é¢å¤–æ”¶è·:æ ¹æ®æˆæƒçŠ¶æ€é™åˆ¶é¡µé¢è®¿é—®ã€‚</li></ul><p id="f0b1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å…ˆå†³æ¡ä»¶:æˆ‘å‡è®¾æ‚¨å·²ç»ç†Ÿæ‚‰Reactå’ŒReduxã€‚</p><p id="ad2c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è®©æˆ‘ä»¬å¼€å§‹è¿™ä¸ªè®¤è¯æ´¾å¯¹å§ï¼</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="53ed" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">æ­¥éª¤1:å®‰è£…å’Œè®¾ç½®</h1><p id="a972" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">é¦–å…ˆï¼Œä½ éœ€è¦<a class="ae lh" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank">åˆ›å»ºä¸€ä¸ªFirebaseè´¦å·</a>ã€‚</p><p id="b66a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç„¶åï¼Œè¿æ¥åˆ°Firebaseæ§åˆ¶å°ï¼Œç‚¹å‡»<em class="me">åˆ›å»ºä¸€ä¸ªé¡¹ç›®</em>ã€‚</p><p id="95d5" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸ºæ‚¨çš„é¡¹ç›®é€‰æ‹©ä¸€ä¸ªåç§°å’ŒID(æ˜æ™ºåœ°é€‰æ‹©ï¼Œæ‚¨ä»¥åä¸èƒ½æ›´æ”¹ID)ï¼Œè®¾ç½®ä½ç½®ï¼ŒåŒæ„å°†æ‚¨ä¸€ç”Ÿçš„å·¥ä½œäº¤ç»™Googleï¼Œç„¶åå•å‡»<em class="me">åˆ›å»ºé¡¹ç›®</em>ã€‚</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi nx"><img src="../Images/0f4f345e7a1631861e2c5c1bff783b2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GqWQe8UOlJz-KkYusHubBA.png"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">åˆ›å»ºæ‚¨çš„Firebaseé¡¹ç›®</p></figure><p id="66ad" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å…¶æ¬¡ï¼Œä½ éœ€è¦æ³¨å†Œä½ çš„åº”ç”¨ç¨‹åºã€‚é€‰æ‹©<em class="me"> Web </em>å›¾æ ‡ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ªReact webåº”ç”¨ç¨‹åºã€‚</p><p id="29b4" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¾“å…¥ä½ çš„åº”ç”¨ç¨‹åºåç§°(å¯é€‰åœ°ï¼Œä½ å¯ä»¥è®¾ç½®Firebaseæ‰˜ç®¡ï¼Œä½†æˆ‘ä»¬ç°åœ¨ä¸ä¼šè¿™æ ·åšï¼Œå› ä¸ºè¿™è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ï¼Œæ‰€ä»¥ä¸è¦é€‰ä¸­æ­¤æ¡†)å¹¶ç‚¹å‡»<em class="me">æ³¨å†Œåº”ç”¨ç¨‹åº</em>ã€‚</p><p id="c7e2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç„¶ååœ¨<em class="me">ä¸­æ·»åŠ Firebase SDK </em>ï¼Œå¤åˆ¶<code class="fe ny nz oa ob b">firebaseConfig</code> <strong class="lk jd"> </strong>å¯¹è±¡ï¼Œè¿™æ˜¯ä½ çš„åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼Œä½ éœ€è¦å®ƒæ¥è®¾ç½®ä½ çš„åº”ç”¨ç¨‹åºå’ŒFirebaseä¹‹é—´çš„é“¾æ¥ã€‚</p><figure class="ks kt ku kv gt kw gh gi paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="gh gi oc"><img src="../Images/fcbe3d3e0807d14c01c0887f2a1bec96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VdjPsxAJ3iAiXj-9UMuQig.jpeg"/></div></div><p class="ld le gj gh gi lf lg bd b be z dk translated">è·å–æ‚¨çš„firebaseConfig</p></figure><p id="08d3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¹¶ç‚¹å‡»<em class="me">ç»§ç»­åˆ°æ§åˆ¶å°</em>ã€‚</p><p id="edfb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç¬¬ä¸‰ï¼Œ<em class="me">ä¸ºä½ çš„Firebaseé¡¹ç›®æ¿€æ´»è®¤è¯</em>ã€‚ç‚¹å‡»<em class="me">è®¤è¯</em>ï¼Œç„¶åç‚¹å‡»<em class="me">è®¾ç½®ç™»å½•æ–¹å¼</em>ã€‚</p><p id="5749" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å„ç§ç¬¬ä¸‰æ–¹æä¾›å•†è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä»è°·æ­Œã€è„¸ä¹¦ã€Twitteræˆ–GitHubï¼Œåˆ°ä½¿ç”¨åŒ¿åè®¿å®¢å¸æˆ·ä»¥é¿å…ä½¿ç”¨å‡­æ®ï¼Œä»»æ‚¨é€‰æ‹©ã€‚</p><p id="ff27" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™é‡Œæˆ‘ä»¬å°†ä½¿ç”¨ä¼ ç»Ÿçš„ç”µå­é‚®ä»¶/å¯†ç ç™»å½•é€‰é¡¹ï¼Œå› æ­¤å•å‡»ç›¸åº”çš„è¡Œï¼Œ<em class="me">å¯ç”¨</em>å¹¶ç‚¹å‡»<em class="me">ä¿å­˜</em>ã€‚ç°åœ¨è¿™ä¸ªç™»å½•é€‰é¡¹å·²ç»å¯ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ç›¸å…³çš„Firebaseæ–¹æ³•ã€‚</p><p id="aa19" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œè¯·æŸ¥çœ‹<em class="me">æ¨¡æ¿</em>éƒ¨åˆ†ã€‚æ‚¨å°†çœ‹åˆ°æ‚¨æœ‰å››ä¸ªç”µå­é‚®ä»¶æ¨¡æ¿ï¼Œæ‚¨å¯ä»¥å¯¹å…¶ç¨åŠ ä¿®æ”¹ã€‚</p><p id="a6ff" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œä¸å¯èƒ½è¿›ä¸€æ­¥å®šåˆ¶æ¨¡æ¿ã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨è‡ªå·±çš„ç”µå­é‚®ä»¶æ¨¡æ¿ï¼Œå¯ä»¥è·³è¿‡ä½¿ç”¨ä¸å‘é€è¿™äº›ç”µå­é‚®ä»¶æ¨¡æ¿ç›¸å…³çš„Firebaseæ–¹æ³•ï¼Œè‡ªå·±ç”¨è‡ªå·±çš„ç”µå­é‚®ä»¶æœåŠ¡å¤„ç†ç›¸å…³æ“ä½œ(ç”µå­é‚®ä»¶åœ°å€éªŒè¯ã€å¯†ç é‡ç½®â€¦â€¦)ã€‚</p><p id="f01e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¦‚æœä½ å¯¹å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹æ„Ÿå…´è¶£ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šå°±æ­¤å†™å¦ä¸€ç¯‡æ–‡ç« ã€‚</p><p id="f8dc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æœ€åï¼Œè®¾ç½®Reactåº”ç”¨ç¨‹åºä»¥ä½¿ç”¨Firebase:</p><ol class=""><li id="bf71" class="mf mg it lk b ll lm lo lp lr mh lv mi lz mj md od ml mm mn bi translated">å®‰è£…<code class="fe ny nz oa ob b">firebase</code> npmåŒ…ã€‚</li></ol><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="ae35" class="oi nb it ob b gy oj ok l ol om">npm install --save firebase</span></pre><p id="67f3" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">2.åœ¨ä½ çš„åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª<code class="fe ny nz oa ob b">firebase.js</code>æ–‡ä»¶(æˆ‘å–œæ¬¢æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ª<code class="fe ny nz oa ob b">services</code>æ–‡ä»¶å¤¹ä¸­ï¼Œä½†è¿™å®Œå…¨å–å†³äºä½ ),å¹¶åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ’å…¥ä»¥ä¸‹ä»£ç :</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="2be2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä½ å®Œäº†ï¼</p><p id="1f9a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ‚¨å·²ç»æˆåŠŸåœ°è®¾ç½®äº†ä¸€ä¸ªç”¨äºèº«ä»½éªŒè¯çš„Firebaseé¡¹ç›®ï¼Œå¹¶å°†å…¶ä¸ä¸€ä¸ªReactåº”ç”¨ç¨‹åºç›¸å…³è”ã€‚è®¾ç½®å’Œé…ç½®é˜¶æ®µå·²ç»ç»“æŸï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ç»§ç»­åšå¥½çš„äº‹æƒ…äº†:æ³¨å†Œå¹¶éªŒè¯ç”¨æˆ·çš„ç”µå­é‚®ä»¶åœ°å€ã€‚</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="cd49" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">æ­¥éª¤2:æ³¨å†Œç”µå­é‚®ä»¶éªŒè¯</h1><p id="d78c" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">æ‚¨åº”è¯¥ä½¿ç”¨Reactè·¯ç”±å™¨å’Œæ‚¨çš„ç™»å½•ç»„ä»¶è®¾ç½®Reactåº”ç”¨ç¨‹åºã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„å‡ºå‘ç‚¹:</p><p id="21dc" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe ny nz oa ob b">index.js</code></p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="fc38" class="oi nb it ob b gy oj ok l ol om"><em class="me">import</em> React <em class="me">from</em> "react";<br/><em class="me">import</em> ReactDOM <em class="me">from</em> "react-dom";<br/><em class="me">import</em> { BrowserRouter <em class="me">as</em> Router } <em class="me">from</em> "react-router-dom";<br/><em class="me">import</em> "./css/index.css";<br/><em class="me">import</em> App <em class="me">from</em> "./components/App";</span><span id="875f" class="oi nb it ob b gy op ok l ol om">ReactDOM.render(<br/>  &lt;Router&gt;<br/>    &lt;App /&gt;<br/>  &lt;/Router&gt;,<br/>document.getElementById("root")<br/>);</span></pre><p id="dd26" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe ny nz oa ob b">App.js</code></p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="ebe3" class="oi nb it ob b gy oj ok l ol om"><em class="me">import</em> React <em class="me">from</em> "react";<br/><em class="me">import</em> { Switch, Route } <em class="me">from</em> "react-router-dom";<br/><em class="me">import</em> Main <em class="me">from</em> "./Main";<br/><em class="me">import</em> Login <em class="me">from</em> "./Login";</span><span id="f94e" class="oi nb it ob b gy op ok l ol om">const App = () =&gt; {<br/>  <em class="me">return</em> (<br/>    &lt;div <em class="me">className</em>="App"&gt;<br/>      &lt;Switch&gt;<br/>        &lt;Route <em class="me">exact</em> <em class="me">path</em>="/" <em class="me">component</em>={Main} /&gt;<br/>        &lt;Route <em class="me">exact</em> <em class="me">path</em>="/login" <em class="me">component</em>={Login} /&gt;<br/>      &lt;/Switch&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span><span id="4ce3" class="oi nb it ob b gy op ok l ol om"><em class="me">export</em> <em class="me">default</em> App;</span></pre><p id="9330" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe ny nz oa ob b">Main.js</code>:</p><p id="1281" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç¨åå°†ä½¿ç”¨Mainæ ¹æ®ç”¨æˆ·æ˜¯å¦ç»è¿‡èº«ä»½éªŒè¯è‡ªåŠ¨é‡å®šå‘åˆ°homeæˆ–loginç»„ä»¶ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ç°åœ¨åªæ˜¾ç¤ºç™»å½•ã€‚</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="9def" class="oi nb it ob b gy oj ok l ol om"><em class="me">import</em> React <em class="me">from</em> "react";<br/><em class="me">import</em> Login <em class="me">from</em> "./Login";</span><span id="9904" class="oi nb it ob b gy op ok l ol om">const Main = () =&gt; {<br/>  <em class="me">return</em> &lt;Login /&gt;;<br/>};</span><span id="18e2" class="oi nb it ob b gy op ok l ol om"><em class="me">export</em> <em class="me">default</em> Main;</span></pre><h2 id="a264" class="oi nb it bd nc oq or dn ng os ot dp nk lr ou ov nm lv ow ox no lz oy oz nq iz bi translated"><strong class="ak">å®‰è£…Reduxå•†åº—å¹¶ç”¨Firebaseå¢å¼ºå®ƒ</strong></h2><p id="6206" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®æˆ‘ä»¬çš„Redux storeï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒè¿æ¥åˆ°Firebaseï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®¿é—®Firebase reducerã€‚è¿™å°†å…è®¸æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­è®¿é—®ç”¨æˆ·çš„èº«ä»½éªŒè¯çŠ¶æ€ã€‚</p><p id="7f75" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è®©æˆ‘ä»¬å®‰è£…å¿…è¦çš„ä¾èµ–é¡¹:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="6cba" class="oi nb it ob b gy oj ok l ol om">npm i redux react-redux redux-thunk</span></pre><p id="f91b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç‰¹å®šäºFirebaseçš„ä¾èµ–é¡¹ï¼Œè¿™å°†å…è®¸æˆ‘ä»¬å°†å…¶ç»‘å®šåˆ°æˆ‘ä»¬çš„Reduxå­˜å‚¨:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="2892" class="oi nb it ob b gy oj ok l ol om">npm i react-redux-firebase</span></pre><p id="a93a" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç°åœ¨ï¼Œåœ¨æ²¡æœ‰Firebaseçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹‹å‰åˆ›å»ºå•†åº—çš„æ–¹å¼æ˜¯è¿™æ ·çš„ï¼Œæ‚¨åº”è¯¥å¾ˆç†Ÿæ‚‰:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="7875" class="oi nb it ob b gy oj ok l ol om"><em class="me">const store = <br/>createStore(rootReducer, {}, applyMiddleware(reduxThunk));</em></span></pre><p id="e1b0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†éœ€è¦â€œå¢å¼ºâ€æˆ‘ä»¬çš„redux storeä»¥åˆ©ç”¨Firebaseï¼Œæˆ‘ä»¬å°†ä½¿ç”¨store enhancer <code class="fe ny nz oa ob b">reactReduxFirebase</code>æ¥å®Œæˆè¿™é¡¹å·¥ä½œï¼Œå®ƒæ¥è‡ªæˆ‘ä»¬çš„æ–°npmåŒ…:<code class="fe ny nz oa ob b">react-redux-firebase</code>ã€‚</p><p id="db5c" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ­£å¦‚ä½ åœ¨ä¸‹é¢çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨reduxä¸­çš„<code class="fe ny nz oa ob b">compose</code>å°†æˆ‘ä»¬çš„Firebaseå®ä¾‹(ä½äºæˆ‘ä»¬çš„<code class="fe ny nz oa ob b">firebase.js</code>æ–‡ä»¶ä¸­ï¼Œå…ˆå‰å·²å¯åŠ¨)ä¼ é€’ç»™<code class="fe ny nz oa ob b">reactReduxFirebase</code> <strong class="lk jd"> </strong>ï¼Œå¹¶ç”¨è¿™ä¸ªå¢å¼ºå™¨åŒ…è£…Redux <code class="fe ny nz oa ob b">createStore</code>æ–¹æ³•ã€‚</p><p id="51b6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">åƒè¿™æ ·:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="f97a" class="oi nb it ob b gy oj ok l ol om"><em class="me">// 1. Enhancing our createStore method with Firebase</em></span><span id="f596" class="oi nb it ob b gy op ok l ol om">const createStoreWithFirebase = compose(reactReduxFirebase(firebase))(createStore);<br/></span><span id="52c4" class="oi nb it ob b gy op ok l ol om"><em class="me">// 2. Creating our store with this newly enhanced store creator</em></span><span id="2e98" class="oi nb it ob b gy op ok l ol om">const store = <br/>createStoreWithFirebase(reducers,{},applyMiddleware(reduxThunk));</span></pre><p id="0622" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸‹é¢æ˜¯æˆ‘ä»¬çš„<code class="fe ny nz oa ob b">index.js</code>æ–‡ä»¶åœ¨è¿™ä¸ªå•†åº—å»ºç«‹åçš„æ ·å­:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="on oo l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">index.jsæ ¹æ–‡ä»¶ï¼Œä½¿ç”¨Firebaseè®¾ç½®å¹¶å¢å¼ºäº†Reduxå­˜å‚¨</p></figure><h2 id="f215" class="oi nb it bd nc oq or dn ng os ot dp nk lr ou ov nm lv ow ox no lz oy oz nq iz bi translated">åˆ›å»ºæ ¹ç¼©å‡å™¨å¹¶æ·»åŠ Firebaseç¼©å‡å™¨</h2><p id="445a" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">ç°åœ¨æˆ‘ä»¬è®¾ç½®å­˜å‚¨æ–‡ä»¶å¤¹ç»“æ„ï¼Œå¹¶ä¸ºèº«ä»½éªŒè¯ç¼©å‡å™¨å’Œæ“ä½œåˆ›å»ºè€…åˆ›å»º<code class="fe ny nz oa ob b">auth.js</code>æ–‡ä»¶:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="58c3" class="oi nb it ob b gy oj ok l ol om">store/ <br/> |- reducers/<br/>     |- index.js<br/>     |- auth.js<br/> |- actions/<br/>     |- actionTypes.js<br/>     |- auth.js</span></pre><p id="aa74" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">root reduceråƒå¾€å¸¸ä¸€æ ·åˆ›å»ºï¼Œä½†æ˜¯æˆ‘ä»¬æ·»åŠ äº†Firebase reducerã€‚å› æ­¤ï¼Œ<code class="fe ny nz oa ob b">reducers</code>æ–‡ä»¶å¤¹ä¸­çš„<code class="fe ny nz oa ob b">index.js</code>æ–‡ä»¶çœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="2b44" class="oi nb it ob b gy oj ok l ol om"><em class="me">import</em> { combineReducers } <em class="me">from</em> "redux";<br/><em class="me">import</em> authReducer <em class="me">from</em> "./auth";<br/><em class="me">import</em> { firebaseReducer } <em class="me">from</em> "react-redux-firebase";</span><span id="bdfd" class="oi nb it ob b gy op ok l ol om"><em class="me">export</em> <em class="me">default</em> combineReducers({<br/>  firebaseReducer,<br/>  authReducer<br/>});</span></pre><h2 id="9d05" class="oi nb it bd nc oq or dn ng os ot dp nk lr ou ov nm lv ow ox no lz oy oz nq iz bi translated">ç”¨Firebaseæ³¨å†ŒåŠ¨ä½œåˆ›å»ºå™¨</h2><p id="ecce" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºaction creatorï¼Œä½¿ç”¨Firebase Authæ–¹æ³•ä¸ºç”¨æˆ·æ³¨å†Œã€‚</p><p id="4733" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">é¦–å…ˆï¼Œæˆ‘åœ¨<code class="fe ny nz oa ob b">actionTypes.js</code>æ–‡ä»¶ä¸­åˆ›å»ºäº†ä¸¤ä¸ª<em class="me">åŠ¨ä½œç±»å‹</em>ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥å‘ç”¨æˆ·å‘é€åé¦ˆï¼Œè®©ä»–ä»¬çŸ¥é“æ³¨å†Œæ˜¯å¦æœ‰æ•ˆ:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="a954" class="oi nb it ob b gy oj ok l ol om"><em class="me">// SIGN UP<br/>export</em> const SIGNUP_SUCCESS = "SIGNUP_SUCCESS";<br/><em class="me">export</em> const SIGNUP_ERROR = "SIGNUP_ERROR";</span></pre><p id="fc72" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç„¶åï¼Œåœ¨æˆ‘çš„<code class="fe ny nz oa ob b">actions</code>æ–‡ä»¶å¤¹ä¸­çš„<code class="fe ny nz oa ob b">auth.js</code>æ–‡ä»¶ä¸­ï¼Œæˆ‘æ­£åœ¨å¯¼å…¥é‚£äº›åŠ¨ä½œç±»å‹ï¼Œä»¥åŠæˆ‘çš„Firebaseå®ä¾‹ï¼Œå¹¶ä¸”æˆ‘æ­£åœ¨ä¸ºæ³¨å†Œå¯åŠ¨ä¸€ä¸ªåŠ¨ä½œåˆ›å»ºå™¨:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="fcd6" class="oi nb it ob b gy oj ok l ol om"><em class="me">import</em> { AUTH_SUCCESS, AUTH_ERROR } <em class="me">from</em> "./actionTypes";</span><span id="eab7" class="oi nb it ob b gy op ok l ol om"><em class="me">import</em> firebase <em class="me">from</em> "../../services/firebase";</span><span id="508c" class="oi nb it ob b gy op ok l ol om"><em class="me">// Signing up with Firebase<br/>export</em> const signup = (email, password) =&gt; async dispatch =&gt; {<br/>  <em class="me">try</em> {<br/>    <em class="me">...<br/>  </em>} <em class="me">catch</em> (err) {<br/>    <em class="me">...<br/>  </em>}<br/>};</span></pre><p id="ca02" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘ä»¬è¦åšçš„å°±æ˜¯è°ƒç”¨Firebaseæä¾›çš„<code class="fe ny nz oa ob b">createUserWithEmailAndPassword</code>æ–¹æ³•æ¥åˆ›å»ºæ–°ç”¨æˆ·:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="30f5" class="oi nb it ob b gy oj ok l ol om">firebase.auth().createUserWithEmailAndPassword(email, password)</span></pre><p id="a082" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™å›æŠ¥äº†ä¸€ä¸ªæ‰¿è¯ºã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe ny nz oa ob b">onAuthStateChanged</code>ï¼Œæ¯å½“ç”¨æˆ·çš„ç™»å½•çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶éƒ½ä¼šè°ƒç”¨å®ƒã€‚</p><p id="4c6e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™ä¸ªæ–¹æ³•è®©æˆ‘ä»¬å¯ä»¥è®¿é—®ç”¨æˆ·çš„æ•°æ®ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥è°ƒç”¨<code class="fe ny nz oa ob b">sendEmailVerification</code>æ–¹æ³•æ¥éªŒè¯ä»–ä»¬çš„ç”µå­é‚®ä»¶åœ°å€ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="6aa5" class="oi nb it ob b gy oj ok l ol om">firebase.auth().onAuthStateChanged(function(user) {<br/>  user.sendEmailVerification();<br/>});</span></pre><p id="0923" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä»¥ä¸‹æ˜¯æœ€ç»ˆæ³¨å†Œæ“ä½œåˆ›å»ºè€…:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="on oo l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">auth.js â€”ä½¿ç”¨Firebase Authæ³¨å†Œæ“ä½œåˆ›å»ºè€…</p></figure></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="807f" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">æ­¥éª¤3:ç™»å½•å¹¶é‡å®šå‘</h1><p id="6bef" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">æˆ‘ä»¬å¿«å®Œæˆäº†ã€‚æ­£å¦‚æ‚¨å°†çœ‹åˆ°çš„ï¼Œå¤§éƒ¨åˆ†å·¥ä½œå·²ç»å®Œæˆï¼Œå‰©ä¸‹çš„å·¥ä½œéå¸¸ç®€å•ã€‚</p><h2 id="1196" class="oi nb it bd nc oq or dn ng os ot dp nk lr ou ov nm lv ow ox no lz oy oz nq iz bi translated">æ­£åœ¨ç™»å½•</h2><p id="e9d3" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬çš„æ“ä½œç±»å‹:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="0a90" class="oi nb it ob b gy oj ok l ol om"><em class="me">// SIGN IN<br/>export</em> const SIGNIN_SUCCESS = "SIGNIN_SUCCESS";<br/><em class="me">export</em> const SIGNIN_ERROR = "SIGNIN_ERROR";</span></pre><p id="60cb" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¦ä½¿ç”¨Firebaseç™»å½•ç”¨æˆ·ï¼Œæˆ‘ä»¬ä½¿ç”¨Firebase Authçš„<code class="fe ny nz oa ob b">signInWithEmailAndPassword</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ç”µå­é‚®ä»¶å’Œå¯†ç ä½œä¸ºå‚æ•°:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="e43c" class="oi nb it ob b gy oj ok l ol om">firebase.auth().signInWithEmailAndPassword(email, password)</span></pre><p id="e15b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä»¥ä¸‹æ˜¯å®Œæ•´çš„<code class="fe ny nz oa ob b">signin</code>åŠ¨ä½œåˆ›å»ºè€…:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="on oo l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">auth.js â€”ä½¿ç”¨Firebase Authç™»å½•æ“ä½œåˆ›å»ºè€…</p></figure><h2 id="7604" class="oi nb it bd nc oq or dn ng os ot dp nk lr ou ov nm lv ow ox no lz oy oz nq iz bi translated">ç™»å½•åé‡å®šå‘ç”¨æˆ·</h2><p id="2c8a" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">å¦‚ä½ æ‰€è§ï¼Œæˆ‘æ­£åœ¨ç»™æˆ‘çš„<code class="fe ny nz oa ob b">signin</code>åŠ¨ä½œåˆ›å»ºå™¨æ·»åŠ ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚è¿™æ˜¯ä¸ºäº†åœ¨ç™»å½•åå°†ç”¨æˆ·é‡å®šå‘åˆ°ä¸»ç»„ä»¶ã€‚</p><p id="08cf" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸ºæ­¤ï¼Œæˆ‘å°†ä½¿ç”¨<em class="me"> Firebase reducer </em>ï¼Œå®ƒæ˜¯æˆ‘ä»¬ä¹‹å‰æ·»åŠ åˆ°root reducerä¸­çš„ã€‚äº‹å®ä¸Šï¼ŒFirebase reducerè®©æˆ‘ä»¬å¯ä»¥è®¿é—®åŒ…å«ç”¨æˆ·æ•°æ®(å¦‚æœå‰è€…å·²ç™»å½•)æˆ–ä»¥ä¸‹å†…å®¹çš„<code class="fe ny nz oa ob b">auth</code>å¯¹è±¡:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="2310" class="oi nb it ob b gy oj ok l ol om">auth: { isLoaded: false, isEmpty: true }</span></pre><p id="8b42" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated"><code class="fe ny nz oa ob b">isLoaded</code>è¡¨ç¤ºæˆæƒåŠ è½½çŠ¶æ€(å½“è¯·æ±‚å¾…å®šæ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒå‘ç”¨æˆ·æ˜¾ç¤ºåŠ è½½ç¨‹åº)ã€‚<code class="fe ny nz oa ob b">isEmpty</code>å¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œåˆ™ä¸ºçœŸã€‚</p><p id="af76" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å› æ­¤ï¼Œç™»å½•åçš„æµç¨‹å°†æ˜¯:</p><p id="e5b1" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">1.å°†ç”¨æˆ·é‡å®šå‘åˆ°ä¸ä¸»è¦ç»„ä»¶ç›¸å¯¹åº”çš„æ ¹è·¯å¾„<code class="fe ny nz oa ob b">â€œ/â€</code>ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†å¯¹<code class="fe ny nz oa ob b">props.history.push(â€œ/â€)</code>çš„è°ƒç”¨ä½œä¸ºå¯¹<code class="fe ny nz oa ob b">signin</code>åŠ¨ä½œåˆ›å»ºè€…çš„å›è°ƒ:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="0f5a" class="oi nb it ob b gy oj ok l ol om">signin(email, password, <strong class="ob jd">() =&gt; props.history.push("/")</strong>);</span></pre><p id="01c8" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¹¶ä¸”ï¼Œæˆ‘ä»¬åœ¨åˆ†æ´¾äº†<code class="fe ny nz oa ob b">SIGNIN_SUCCESS</code>åŠ¨ä½œä¹‹åï¼Œåœ¨<code class="fe ny nz oa ob b">signin</code>åŠ¨ä½œåˆ›å»ºå™¨ä¸­æ¿€æ´»è¿™ä¸ªå›è°ƒã€‚</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="40bc" class="oi nb it ob b gy oj ok l ol om"><em class="me">export</em> const signin = (email, password, callback) =&gt; <br/>  async dispatch =&gt; {<br/>    <em class="me">try</em> {<br/>      firebase<br/>      .auth()<br/>      .signInWithEmailAndPassword(email, password)<br/>      .then(data =&gt; {<br/>        <em class="me">if</em> (data.user.emailVerified) {<br/>          dispatch({ type: SIGNIN_SUCCESS });<br/>          <strong class="ob jd">callback();</strong><br/>       } <em class="me">else</em> {<br/>          ...</span></pre><p id="996b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">2.å°†<code class="fe ny nz oa ob b">Main</code>ç»„ä»¶è¿æ¥åˆ°å•†åº—ï¼Œè§‚å¯Ÿæ¥è‡ªFirebase reducerçš„authå¯¹è±¡ï¼Œå¦‚æœ<code class="fe ny nz oa ob b">isEmpty</code>ä¸ºçœŸï¼Œåˆ™ç”¨æˆ·æœªç™»å½•ï¼Œå› æ­¤æ˜¾ç¤º<code class="fe ny nz oa ob b">Login</code>ç»„ä»¶ï¼Œæˆ–è€…ï¼Œå½“ç”¨æˆ·ç™»å½•æ—¶ï¼Œæ˜¾ç¤º<code class="fe ny nz oa ob b">Home</code>ç»„ä»¶ã€‚</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="on oo l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">è¿æ¥åˆ°Redux storeçš„Main.jsç»„ä»¶ä¾¦å¬æ¥è‡ªFirebase reducerçš„authå¯¹è±¡ï¼Œä»¥ä¾¿æ ¹æ®authçŠ¶æ€é‡å®šå‘ç”¨æˆ·ã€‚</p></figure><p id="459b" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™ä¹Ÿå°†å¤„ç†ä¸€ä¸ªéå¸¸é‡è¦çš„äº‹æƒ…:<em class="me"> auth persisting </em>ã€‚</p><p id="0524" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™å¯ä»¥ç¡®ä¿æˆ‘ä»¬çš„ç”¨æˆ·åœ¨æˆåŠŸç™»å½•åä»ç„¶ä¸åº”ç”¨ç¨‹åºä¿æŒè¿æ¥ï¼Œç›´åˆ°ä»–ä»¬æ­£å¼é€€å‡ºã€‚åªéœ€è®©æˆ‘ä»¬çš„<code class="fe ny nz oa ob b">Main</code>ç»„ä»¶æˆä¸ºæˆ‘ä»¬åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ï¼Œå¹¶ç›‘å¬æ¥è‡ªFirebase reducerçš„authå¯¹è±¡ï¼Œä»è€Œç›¸åº”åœ°é‡å®šå‘åˆ°<code class="fe ny nz oa ob b">Home</code>æˆ–ç™»å½•é¡µé¢ã€‚</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="e6ce" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">ç¬¬å››æ­¥:æ³¨é”€</h1><p id="cb9a" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">æˆ‘ä»¬å†æ¬¡åˆ›å»ºç›¸å…³çš„æ“ä½œç±»å‹:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="f328" class="oi nb it ob b gy oj ok l ol om"><em class="me">// SIGN OUT<br/>export</em> const SIGNOUT_SUCCESS = "SIGNOUT_SUCCESS";<br/><em class="me">export</em> const SIGNOUT_ERROR = "SIGNOUT_ERROR";</span></pre><p id="52bd" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¯¹äºæ³¨é”€ç”¨æˆ·ï¼Œæˆ‘ä»¬ä½¿ç”¨Firebase Authçš„<code class="fe ny nz oa ob b">signOut</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸å¸¦ä»»ä½•å‚æ•°:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="af73" class="oi nb it ob b gy oj ok l ol om"><em class="me">// Signing out with Firebase</em></span><span id="b485" class="oi nb it ob b gy op ok l ol om"><em class="me">export</em> const signout = () =&gt; async dispatch =&gt; {<br/>  <em class="me">try</em> {<br/>    firebase<br/>    .auth()<br/>    .signOut()<br/>    .then(() =&gt; {<br/>      dispatch({ type: SIGNOUT_SUCCESS });<br/>    })<br/>    .catch(() =&gt; {<br/>      dispatch({ <br/>        type: SIGNOUT_ERROR, <br/>        payload: "...some error message for the user..."<br/>      });<br/>    });<br/>  } <em class="me">catch</em> (err) {<br/>    dispatch({ <br/>      type: SIGNOUT_ERROR, <br/>      payload: ...some error message for the user..."<br/>    });<br/>  }<br/>};</span></pre></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="e005" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">ç¬¬äº”æ­¥:å¯†ç é‡ç½®</h1><p id="99cd" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">åŒæ ·ç®€å•çš„æ˜¯å¯†ç é‡ç½®æ–¹æ³•ã€‚æˆ‘ä»¬ä½¿ç”¨Firebase Authçš„<code class="fe ny nz oa ob b">sendPasswordResetEmail</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ç”µå­é‚®ä»¶ä½œä¸ºå‚æ•°:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="aa3a" class="oi nb it ob b gy oj ok l ol om"><em class="me">// Reset password with Firebase</em></span><span id="8b87" class="oi nb it ob b gy op ok l ol om"><em class="me">export</em> const resetPassword = email =&gt; async dispatch =&gt; {<br/>  <em class="me">try</em> {<br/>    firebase<br/>    .auth()<br/>    .sendPasswordResetEmail(email)<br/>    .then(() =&gt; <br/>      dispatch({<br/>        type: RESET_SUCCESS,<br/>        payload: "Reset email sent. Go check your inbox."<br/>      })<br/>    )<br/>    .catch(err =&gt; {<br/>      dispatch({<br/>        type: RESET_ERROR,<br/>        payload: "...some message for the user..."<br/>      });<br/>    });<br/>  } <em class="me">catch</em> (err) {<br/>    dispatch({ <br/>      type: RESET_ERROR, <br/>      payload: "...some message for the user..." <br/>    });<br/>  }<br/>};</span></pre></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="373c" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">é¢å¤–æ”¶è·:æ ¹æ®æˆæƒé™åˆ¶é¡µé¢è®¿é—®</h1><p id="6752" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åšäº†å¾ˆå¤šï¼Œä½†åœ¨ä¸‹ç­åå»å–é…’ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦è§£å†³ã€‚</p><p id="9d7d" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸ºäº†è¯´æ˜æˆ‘çš„è§‚ç‚¹ï¼Œæˆ‘å°†æ·»åŠ ä¸€ä¸ªåä¸º<code class="fe ny nz oa ob b">Bunny</code>çš„æ–°ç»„ä»¶ï¼Œå¹¶å°†<code class="fe ny nz oa ob b">Route</code>æ·»åŠ åˆ°æˆ‘çš„è·¯ç”±å™¨äº¤æ¢æœºå†…çš„<code class="fe ny nz oa ob b">App.js</code>æ–‡ä»¶ä¸­çš„<code class="fe ny nz oa ob b">Bunny</code>:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="a927" class="oi nb it ob b gy oj ok l ol om">&lt;Route <em class="me">exact</em> <em class="me">path</em>="/bunny" <em class="me">component</em>={Bunny} /&gt;</span></pre><p id="eb72" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ç°åœ¨ï¼Œå¦‚æœä½ æ²¡æœ‰ç™»å½•ï¼Œä½ æ”¹å˜ç½‘å€å»<code class="fe ny nz oa ob b">â€œ/bunnyâ€</code>ï¼Œä½ ä¼šçœ‹åˆ°ä½ å¯ä»¥è®¿é—®è¿™ä¸ªç»„ä»¶ã€‚æˆ‘ä»¬ä¸æƒ³é‚£æ ·ã€‚æˆ‘ä»¬éœ€è¦å‘Šè¯‰<code class="fe ny nz oa ob b">Bunny</code>ç»„ä»¶ï¼Œæˆ‘ä»¬åªå¸Œæœ›ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·èƒ½å¤Ÿè®¿é—®å®ƒã€‚</p><p id="8ad6" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ›´é«˜é˜¶çš„ç»„ä»¶ï¼Œå®ƒå°†åŒ…è£…æˆ‘ä»¬æƒ³è¦é™åˆ¶è®¿é—®çš„ç»„ä»¶ï¼Œå¹¶ä¸”å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œå®ƒå°†ä¾¦å¬æ¥è‡ªFirebase authçš„Authå¯¹è±¡å¹¶é‡å®šå‘åˆ°æˆ‘ä»¬çš„<code class="fe ny nz oa ob b">Main</code>ç»„ä»¶ã€‚</p><p id="e7a2" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™æ˜¯æˆ‘ä»¬çš„<code class="fe ny nz oa ob b">requireAuth</code> HOC:</p><figure class="ks kt ku kv gt kw"><div class="bz fp l di"><div class="on oo l"/></div><p class="ld le gj gh gi lf lg bd b be z dk translated">requireAuth : HOCæ ¹æ®èº«ä»½éªŒè¯çŠ¶æ€é™åˆ¶å¯¹ç»„ä»¶çš„è®¿é—®</p></figure><p id="aa65" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">è¿™é‡Œæ˜¯åˆ©ç”¨<code class="fe ny nz oa ob b">requireAuth</code> HOCçš„<code class="fe ny nz oa ob b">Bunny</code>ç»„ä»¶:</p><pre class="ks kt ku kv gt oe ob of og aw oh bi"><span id="7bf4" class="oi nb it ob b gy oj ok l ol om"><em class="me">import</em> React <em class="me">from</em> "react";<br/><strong class="ob jd"><em class="me">import</em> requireAuth <em class="me">from</em> "./hoc/requireAuth";</strong></span><span id="41da" class="oi nb it ob b gy op ok l ol om">const Bunny = () =&gt; {<br/>  <em class="me">return</em> (<br/>    &lt;div <em class="me">className</em>="page"&gt;...&lt;/div&gt;<br/>  );<br/>};</span><span id="a48e" class="oi nb it ob b gy op ok l ol om"><em class="me">export</em> <em class="me">default</em> <strong class="ob jd">requireAuth(Bunny)</strong>;</span></pre><p id="d4d0" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘ä»¬å®Œäº‹äº†ã€‚</p></div><div class="ab cl mt mu hx mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="im in io ip iq"><h1 id="3d90" class="na nb it bd nc nd ne nf ng nh ni nj nk ki nl kj nm kl nn km no ko np kp nq nr bi translated">ç»“è®º</h1><p id="1609" class="pw-post-body-paragraph li lj it lk b ll ns kd ln lo nt kg lq lr nu lt lu lv nv lx ly lz nw mb mc md im bi translated">æ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„ä¸“ç”¨æŠ¥å‘Šä¸­æ‰¾åˆ°Reactæ ·æ¿åº”ç”¨ç¨‹åºçš„å®Œæ•´ä»£ç ï¼Œä½¿ç”¨Firebaseå’ŒReduxå®ç°èº«ä»½éªŒè¯:</p><div class="pa pb gp gr pc pd"><a href="https://github.com/clairechabas/firebase-auth-react-redux" rel="noopener  ugc nofollow" target="_blank"><div class="pe ab fo"><div class="pf ab pg cl cj ph"><h2 class="bd jd gy z fp pi fr fs pj fu fw jc bi translated">claire chabas/fire base-auth-react-redux</h2><div class="pk l"><h3 class="bd b gy z fp pi fr fs pj fu fw dk translated">è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªæ ·æ¿æ–‡ä»¶ï¼Œç”¨äºåœ¨Reactåº”ç”¨ç¨‹åºä¸Šä½¿ç”¨Firebase Authåˆå§‹åŒ–ä¸€ä¸ªèº«ä»½éªŒè¯ç³»ç»Ÿ</h3></div><div class="pl l"><p class="bd b dl z fp pi fr fs pj fu fw dk translated">github.com</p></div></div><div class="pm l"><div class="pn l po pp pq pm pr lb pd"/></div></div></a></div><p id="0dbe" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦éšæ„ä½¿ç”¨è¿™ä¸ªæ ·æ¿æ–‡ä»¶ã€‚</p><p id="c051" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« æ˜¯æœ‰å¸®åŠ©çš„ã€‚å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–æ”¹è¿›å»ºè®®ï¼Œæˆ‘å¾ˆä¹æ„åœ¨è¯„è®ºä¸­çœ‹åˆ°ã€‚</p><p id="948e" class="pw-post-body-paragraph li lj it lk b ll lm kd ln lo lp kg lq lr ls lt lu lv lw lx ly lz ma mb mc md im bi translated">å¿«ä¹ç¼–ç ğŸ’›</p></div></div>    
</body>
</html>