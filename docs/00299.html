<html>
<head>
<title>Authentication and Authorization using Redis</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Redisè¿›è¡Œèº«ä»½éªŒè¯å’Œæˆæƒ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://betterprogramming.pub/authentication-and-authorization-using-redis-49c5f0e6b311?source=collection_archive---------0-----------------------#2019-03-04">https://betterprogramming.pub/authentication-and-authorization-using-redis-49c5f0e6b311?source=collection_archive---------0-----------------------#2019-03-04</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><figure class="gl gn jr js jt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi jq"><img src="../Images/45e635a82f7dbbdec1088ec4a0ff070b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_TR1SCU4OIrJnvJycfvZSQ.png"/></div></div></figure><p id="5b57" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æœ¬æ–‡æ˜¯<a class="ae kz" href="https://medium.com/@pankaj.panigrahi/list-of-node-js-articles-ededa6dd304b" rel="noopener"> <strong class="kd iu"> <em class="la">ç³»åˆ—æ–‡ç« </em> </strong> </a>çš„ç¬¬6ç¯‡ï¼Œå®ƒå°†å¸®åŠ©æ‚¨æŒæ¡Node.jsèƒŒåçš„ä¸åŒæ¦‚å¿µï¼Œå¹¶ä½¿æ‚¨èƒ½å¤Ÿåˆ›å»ºç”Ÿäº§å°±ç»ªçš„åº”ç”¨ç¨‹åºã€‚è¿™ç¯‡æ–‡ç« æœŸæœ›è¯»è€…äº†è§£å·´åˆ«å¡”ä»¥åŠå¦‚ä½•è®¾ç½®å®ƒã€‚å¦‚æœä½ éœ€è¦äº†è§£ç›¸åŒçš„å†…å®¹ï¼Œè¯·é˜…è¯»è¿™ç¯‡æ–‡ç« ã€‚</p><p id="d03e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å½“ä½ ä¸ºä½ çš„ç½‘ç«™/ç½‘ç»œåº”ç”¨æ„å»ºåç«¯æˆ–è€…ä¸€ä¸ªé€šç”¨çš„åç«¯æ¥ä½œä¸ºç§»åŠ¨å’Œç½‘ç»œåº”ç”¨çš„åç«¯æ—¶ï¼Œä½ éœ€è¦ç”¨ä¸€ä¸ªè®¤è¯å±‚æ¥ä¿æŠ¤ä½ çš„APIã€‚è¿™äº›APIåº”è¯¥åªç”±ç™»å½•çš„ç”¨æˆ·è®¿é—®ï¼Œå¹¶ä¸”åº”è¯¥æ ¹æ®ç”¨æˆ·è¿”å›ç»“æœã€‚</p><p id="c22d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨å½“ä»Šæ—¶ä»£ï¼Œæ¯ä¸ªäººéƒ½åœ¨å¯»æ±‚åŸºäºä»¤ç‰Œçš„è®¤è¯ï¼Œè€Œä¸æ˜¯åŸºäºä¼šè¯çš„cookiesã€‚OAuthã€JWTå’Œå¸¦æœ‰memcached / redisçš„éšæœºä»¤ç‰Œæ˜¯æœ€æµè¡Œçš„åŸºäºä»¤ç‰Œçš„èº«ä»½éªŒè¯å½¢å¼ã€‚<br/>è¿™é‡Œæœ‰ä¸€ä¸ªä¸é”™çš„ç”µå­è¡¨æ ¼ï¼Œæ¯”è¾ƒäº†ä¸€äº›å¸¸è§çš„èº«ä»½éªŒè¯æ–¹æ³•:</p><div class="lb lc gp gr ld le"><a href="https://docs.google.com/spreadsheets/d/1tAX5ZJzluilhoYKjra-uHbMCZraaQkqIHl3RIQ8mVkM/edit#gid=0" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd iu gy z fp lj fr fs lk fu fw is bi translated">APIçš„è®¤è¯æŠ€æœ¯</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">æè¿°å°†ç”¨æˆ·åå’Œå¯†ç ä¸æ¯ä¸ªå¸¦æœ‰ç”¨æˆ·ä¿¡æ¯çš„è¯·æ±‚ç­¾åæˆ–åŠ å¯†çš„cookieä¸€èµ·ä¼ é€’ã€‚é€šå¸¸â€¦</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">docs.google.com</p></div></div><div class="ln l"><div class="lo l lp lq lr ln ls jz le"/></div></div></a></div><p id="0dda" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å…è´£å£°æ˜:ç”µå­è¡¨æ ¼ç”±å…¶ä»–ä½œè€…ç¼–å†™ã€‚</p><p id="c298" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">JWTå’Œå¸¦å†…å­˜å­˜å‚¨çš„éšæœºä»¤ç‰Œå„æœ‰ä¼˜ç¼ºç‚¹ã€‚æ‚¨åº”è¯¥æ ¹æ®é¡¹ç›®çš„éœ€æ±‚æ¥ä½¿ç”¨å®ƒä»¬ã€‚æ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„æ–‡ç« ä¸­æ‰¾åˆ°ä¸¤è€…çš„å¯¹æ¯”:</p><div class="lb lc gp gr ld le"><a href="https://dzone.com/articles/stop-using-jwts-as-session-tokens" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd iu gy z fp lj fr fs lk fu fw is bi translated">åœæ­¢ä½¿ç”¨jwtä½œä¸ºä¼šè¯ä»¤ç‰Œ</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">JSON Webä»¤ç‰Œ(jwt)ç°åœ¨éå¸¸çƒ­é—¨ã€‚å®ƒä»¬åœ¨webå¼€å‘ä¸­é£é¡ä¸€æ—¶ï¼Œå› ä¸ºå®ƒä»¬æ—¶å°šã€å®‰å…¨â€¦</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">dzone.com</p></div></div><div class="ln l"><div class="lt l lp lq lr ln ls jz le"/></div></div></a></div><p id="db74" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¯´åˆ°rediså’Œmemcachedï¼Œæˆ‘æ›´å–œæ¬¢redisï¼ŒåŸå› å¦‚ä¸‹:</p><p id="fc87" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">a)æ”¯æŒæ›´å¤šæ•°æ®ç±»å‹</p><p id="dcb9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">b)é»˜è®¤ç£ç›˜æŒä¹…æ€§</p><p id="a826" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">c)æ›´å¤§çš„é”®å€¼å¤§å°</p><p id="914f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ‚¨å¯ä»¥åœ¨ä¸‹é¢çš„æ–‡ç« ä¸­äº†è§£æ›´å¤šä¿¡æ¯:</p><p id="2740" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><a class="ae kz" href="https://www.linkedin.com/pulse/memcached-vs-redis-which-one-pick-ranjeet-vimal/" rel="noopener ugc nofollow" target="_blank">https://www . LinkedIn . com/pulse/memcached-vs-redis-which-one-pick-ran Jeet-vimal/</a></p></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="7a12" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ—¢ç„¶æˆ‘ä»¬å·²ç»å†³å®šå€ŸåŠ©rediså®ç°åŸºäºä»¤ç‰Œçš„èº«ä»½éªŒè¯ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p><p id="24b8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> <em class="la"> Redis </em> </strong>æ˜¯ä¸€ä¸ªå¼€æºçš„(BSDè®¸å¯çš„)ã€å†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ï¼Œç”¨ä½œæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯ä»£ç†ã€‚å®ƒæ”¯æŒè¯¸å¦‚å­—ç¬¦ä¸²ã€æ•£åˆ—ã€åˆ—è¡¨ã€é›†åˆã€å¸¦æœ‰èŒƒå›´æŸ¥è¯¢çš„æ’åºé›†åˆã€ä½å›¾ç­‰æ•°æ®ç»“æ„ã€‚redisæœ€æµè¡Œçš„ä¸¤ç§ç”¨æ³•æ˜¯æ„å»ºç¼“å­˜å±‚æˆ–å……å½“ä¼šè¯å­˜å‚¨ç³»ç»Ÿã€‚</p><p id="017d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¯·æŒ‰ç…§ä»¥ä¸‹æ–‡ç« å¼€å§‹ä½¿ç”¨redisã€‚</p><div class="lb lc gp gr ld le"><a href="https://redis.io/topics/introduction" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd iu gy z fp lj fr fs lk fu fw is bi translated">Redisä»‹ç»</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">Redisæ˜¯ä¸€ä¸ªå¼€æºçš„(BSDè®¸å¯çš„)ï¼Œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ï¼Œç”¨ä½œæ•°æ®åº“ï¼Œç¼“å­˜å’Œæ¶ˆæ¯ä»£ç†â€¦</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">redis.io</p></div></div><div class="ln l"><div class="mb l lp lq lr ln ls jz le"/></div></div></a></div><div class="lb lc gp gr ld le"><a href="https://redis.io/topics/quickstart" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd iu gy z fp lj fr fs lk fu fw is bi translated">å¿«é€Ÿå…¥é—¨</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">å»ºè®®å®‰è£…Redisçš„æ–¹æ³•æ˜¯ä»æºä»£ç ä¸­ç¼–è¯‘å®ƒï¼Œå› ä¸ºRedisé™¤äº†ä¸€ä¸ªå·¥ä½œâ€¦</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">redis.io</p></div></div><div class="ln l"><div class="mc l lp lq lr ln ls jz le"/></div></div></a></div><div class="lb lc gp gr ld le"><a href="https://redislabs.com/ebook/part-1-getting-started/chapter-1-getting-to-know-redis/" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd iu gy z fp lj fr fs lk fu fw is bi translated">ç¬¬1ç« :äº†è§£Redis | Rediså®éªŒå®¤</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">ç¬¬ä¸€ç« :äº†è§£Redisè¿™ä¸€ç« è®²è¿°äº†Redisæ˜¯æ€æ ·çš„ï¼Œä¸ä½ ç”¨è¿‡çš„å…¶ä»–è½¯ä»¶ä¸åŒï¼Œå¦‚ä½•ä½¿ç”¨â€¦</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">redislabs.com</p></div></div><div class="ln l"><div class="md l lp lq lr ln ls jz le"/></div></div></a></div><p id="b297" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨redisçš„æœ¬åœ°å®‰è£…ã€‚ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ä»rediså®éªŒå®¤å¾—åˆ°ä¸€ä¸ªå…è´¹çš„æœåŠ¡å™¨ã€‚</p><div class="lb lc gp gr ld le"><a href="https://redislabs.com/get-started/" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd iu gy z fp lj fr fs lk fu fw is bi translated">Redis Enterprise | Redis Labså…¥é—¨</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">é€‰æ‹©æ‚¨çš„éƒ¨ç½²é€‰é¡¹äº‘æ‰˜ç®¡æ³¨å†Œéƒ¨ç½²Redisæ•°æ®åº“çš„æœ€å¿«æ–¹æ³•ã€‚å…¨é¢ç®¡ç†â€¦</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">redislabs.com</p></div></div><div class="ln l"><div class="me l lp lq lr ln ls jz le"/></div></div></a></div><p id="374d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬ä»ç¬¬äº”ç¯‡æ–‡ç« ä¸­ç¦»å¼€çš„åœ°æ–¹å¼€å§‹ã€‚å»ºè®®ä½ å…ˆçœ‹ç¬¬5ç¯‡ï¼Œå†çœ‹è¿™ç¯‡æ–‡ç« ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¯¹node.jsæœ‰ä¸€äº›ç»éªŒï¼Œå¹¶ä¸”èƒ½å¤Ÿæ‰¾åˆ°è‡ªå·±çš„ä»£ç ï¼Œæ‚¨å¯ä»¥ä»ä¸‹é¢çš„æ ·æ¿æ–‡ä»¶å¼€å§‹:</p><blockquote class="mf mg mh"><p id="ea8f" class="kb kc la kd b ke kf kg kh ki kj kk kl mi kn ko kp mj kr ks kt mk kv kw kx ky im bi translated">æ‚¨å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°ä»£ç :</p><p id="97c2" class="kb kc la kd b ke kf kg kh ki kj kk kl mi kn ko kp mj kr ks kt mk kv kw kx ky im bi translated">https://github.com/pankaj805/medium-05_mongo_client<a class="ae kz" href="https://github.com/pankaj805/medium-05_mongo_client" rel="noopener ugc nofollow" target="_blank"/></p></blockquote></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="28fb" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹npmæ¨¡å—ä½œä¸ºrediså®¢æˆ·ç«¯åº“</p><div class="lb lc gp gr ld le"><a href="https://www.npmjs.com/package/redis" rel="noopener  ugc nofollow" target="_blank"><div class="lf ab fo"><div class="lg ab lh cl cj li"><h2 class="bd iu gy z fp lj fr fs lk fu fw is bi translated">é›·è¿ªæ–¯</h2><div class="ll l"><h3 class="bd b gy z fp lj fr fs lk fu fw dk translated">Rediså®¢æˆ·åº“</h3></div><div class="lm l"><p class="bd b dl z fp lj fr fs lk fu fw dk translated">www.npmjs.com</p></div></div><div class="ln l"><div class="ml l lp lq lr ln ls jz le"/></div></div></a></div><p id="7246" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å› æ­¤ï¼Œè®©æˆ‘ä»¬é¦–å…ˆåœ¨é¡¹ç›®ä¸­å®‰è£…ä»¥ä¸‹åº“ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="3162" class="mv mw it mr b gy mx my l mz na">npm install redis --save</span></pre><p id="2a6a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å’Œå¦ä¸€ä¸ªåº“æ¥åˆ›å»ºéšæœºçš„å”¯ä¸€id</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="6fc9" class="mv mw it mr b gy mx my l mz na">npm install node-uuid --save</span></pre><p id="e1e2" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸¤ä¸ªapi:ç¬¬ä¸€ä¸ªapiæ˜¯â€œç™»å½•â€apiï¼Œå®ƒåº”è¯¥è¿”å›ä¸€ä¸ªæ–°çš„ä¼šè¯ä»¤ç‰Œï¼Œå…¶ä»–APIå°†æ›´æ–°å¯†ç ï¼Œè¿™å°†éœ€è¦ç™»å½•ç”¨æˆ·çš„æœ‰æ•ˆä¼šè¯ä»¤ç‰Œã€‚</p><p id="a290" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬é¦–å…ˆæ·»åŠ ä¸€ä¸ªæœåŠ¡æ–¹æ³•æ¥æ›´æ–°ç”¨æˆ·çš„å¯†ç </p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="5f08" class="mv mw it mr b gy mx my l mz na">export const updateUserPassword = (db, userName,pwd) =&gt; {<br/>  return db.collection('user').updateOne({'username': userName }, {<br/>    $set: {password:pwd} <br/>  })<br/>  .then((r) =&gt; {<br/>    return Promise.resolve(r.matchedCount);<br/>  })<br/>  .catch((err) =&gt; {<br/>    return Promise.reject(err);<br/>  })<br/>}</span></pre><p id="9fd7" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ‰€ä»¥æœ€å<em class="la"> services/UserService.js </em>åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="54ec" class="mv mw it mr b gy mx my l mz na">export const getUserDetails = (db, userName) =&gt; {<br/>   return new Promise((resolve, reject) =&gt;<br/>      db.collection('user')<br/>        .find({ 'username': userName })<br/>        .toArray((err, docs) =&gt; {<br/>           if(docs &amp;&amp; docs.length&gt;0){<br/>              resolve(docs[0]);<br/>           }else{<br/>              reject();<br/>           }<br/>      });<br/>   });<br/>}</span><span id="9845" class="mv mw it mr b gy nb my l mz na">export const updateUserPassword = (db, userName,pwd) =&gt; {<br/>  return db.collection('user').updateOne({'username': userName }, {<br/>    $set: {password:pwd} <br/>  })<br/>  .then((r) =&gt; {<br/>    return Promise.resolve(r.matchedCount);<br/>  })<br/>  .catch((err) =&gt; {<br/>    return Promise.reject(err);<br/>  })<br/>}</span></pre><p id="a1e9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨æ¥å­˜å‚¨ä¼šè¯æ•°æ®çš„ç±»ã€‚è®©æˆ‘ä»¬åœ¨å…¬å…±æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="0093" class="mv mw it mr b gy mx my l mz na">class Session {<br/>  constructor() {<br/>    this.userData = {};<br/>    this.sessionID = '';<br/>  }<br/> <br/>  set(obj) {<br/>    this.userData = obj;<br/>  }</span><span id="b604" class="mv mw it mr b gy nb my l mz na">  save(client){<br/>    if(this.sessionID){<br/>      client.set(this.sessionID, JSON.stringify(this.userData));<br/>      client.expire(this.sessionID, 60 * 60 * 2);<br/>    }<br/>  }</span><span id="9068" class="mv mw it mr b gy nb my l mz na">  destroy(client) {<br/>    client.del(this.sessionID);<br/>  }<br/>}</span><span id="f7d4" class="mv mw it mr b gy nb my l mz na">export default Session;</span></pre><p id="085d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">é™¤äº†<strong class="kd iu">ä¿å­˜</strong>å’Œ<strong class="kd iu">é”€æ¯</strong>æ–¹æ³•ä¹‹å¤–ï¼Œè¿™ä¸ªæ–‡ä»¶éå¸¸ç®€å•æ˜äº†ã€‚saveæ–¹æ³•è¢«ä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°åº”è¯¥æ˜¯å¯¹rediså®¢æˆ·æœºå®ä¾‹çš„å¼•ç”¨ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="d648" class="mv mw it mr b gy mx my l mz na">client.set(this.sessionID, JSON.stringify(this.userData));</span></pre><p id="bc8c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä¸Šé¢çš„è¡Œç”¨äºç”¨ç”¨æˆ·æ•°æ®æ›´æ–°redisé”®-å€¼å¯¹ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="3b2d" class="mv mw it mr b gy mx my l mz na">client.expire(this.sessionID, 60 * 60 * 2);</span></pre><p id="009e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è€Œclient.del()å°±æ˜¯ä»redisä¸­åˆ é™¤æŸä¸ªé”®å€¼å¯¹ã€‚</p><p id="af88" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨è®©æˆ‘ä»¬ç¼–è¾‘æˆ‘ä»¬çš„common/authUtils.jsæ–‡ä»¶æ¥å¤„ç†æ‰€éœ€çš„åœºæ™¯ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="292d" class="mv mw it mr b gy mx my l mz na">import uuid from 'node-uuid';</span><span id="b638" class="mv mw it mr b gy nb my l mz na">const newSessionRoutes = [{ path: '/user/login', method: 'POST' }];</span><span id="7d1f" class="mv mw it mr b gy nb my l mz na">const authRoutes = [{ path: '/user/password', method: 'PUT' }];</span></pre><p id="4876" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¯¼å…¥uuidæ¨¡å—å¹¶å®šä¹‰ä¸¤ä¸ªå¸¸é‡ï¼Œç¬¬ä¸€ä¸ªå¸¸é‡åŒ…å«éœ€è¦æ–°ä¼šè¯çš„apiæ–¹æ³•æ•°ç»„ï¼Œç¬¬äºŒä¸ªå¸¸é‡åŒ…å«éœ€è¦æœ‰æ•ˆä¼šè¯çš„apiæ–¹æ³•æ•°ç»„ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="e227" class="mv mw it mr b gy mx my l mz na">export const isNewSessionRequired = (httpMethod, url) =&gt; {<br/>  for (let routeObj of newSessionRoutes) {<br/>    if (routeObj.method === httpMethod &amp;&amp; routeObj.path === url) {<br/>      return true;<br/>    }<br/>  }</span><span id="a4cd" class="mv mw it mr b gy nb my l mz na">  return false;<br/>}</span><span id="53fc" class="mv mw it mr b gy nb my l mz na">export const isAuthRequired = (httpMethod, url) =&gt; {<br/>  for (let routeObj of authRoutes) {<br/>    if (routeObj.method === httpMethod &amp;&amp; routeObj.path === url) {<br/>      return true;<br/>    }<br/>  }<br/>  return false;<br/>}</span></pre><p id="cb8c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ·»åŠ ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•æ¥æ£€æŸ¥ä¼ é€’çš„apiéœ€è¦æ–°çš„ä¼šè¯è¿˜æ˜¯æ—§çš„ä¼šè¯ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="602b" class="mv mw it mr b gy mx my l mz na">export const generateRandomSessionID = () =&gt; {<br/>  return uuid.v4();<br/>}</span></pre><p id="4429" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ·»åŠ ä¸Šè¿°æ–¹æ³•æ¥åˆ›å»ºéšæœºuuidå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å®ƒä¸ºredisé”®-å€¼å¯¹åˆ›å»ºä¸€ä¸ªæƒŸä¸€çš„é”®ã€‚</p><p id="5aff" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªä»redisæœåŠ¡å™¨è¯»å–å€¼çš„æ–¹æ³•ã€‚æ ¹æ®æ–‡æ¡£ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œ:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="0e2f" class="mv mw it mr b gy mx my l mz na">client.get("redis-key", function (err, reply) {<br/>  console.log(reply.toString());<br/>});</span></pre><p id="58db" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå°†ä¸Šè¿°æ–¹æ³•å°è£…åœ¨ä¸€ä¸ªæ‰¿è¯ºä¸­:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="3f8b" class="mv mw it mr b gy mx my l mz na">export const getRedisSessionData = (redisClient,sessionId) =&gt; {<br/>  return new Promise((resolve, reject) =&gt; {<br/>    redisClient.get(sessionId, function (err, data) {<br/>      if (err) {<br/>        reject(err);<br/>      }<br/>      resolve(data);<br/>    });<br/>  })<br/>}</span></pre><p id="c108" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å› æ­¤ï¼Œæˆ‘ä»¬çš„authUtilsæ–‡ä»¶åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="8b45" class="mv mw it mr b gy mx my l mz na">import {getClientDetails} from '../services/ClientService';<br/>import uuid from 'node-uuid';</span><span id="f65c" class="mv mw it mr b gy nb my l mz na">const newSessionRoutes = [{ path: '/user/login', method: 'POST' }];<br/>const authRoutes = [{ path: '/user/password', method: 'PUT' }];</span><span id="6fdd" class="mv mw it mr b gy nb my l mz na">export const clientApiKeyValidation = async (req,res,next) =&gt; {<br/>   let clientApiKey = req.get('api_key');</span><span id="c94e" class="mv mw it mr b gy nb my l mz na">if(!clientApiKey){<br/>      return res.status(400).send({<br/>         status:false,<br/>         response:"Missing Api Key"<br/>      });<br/>   }</span><span id="dac0" class="mv mw it mr b gy nb my l mz na">try {<br/>      let clientDetails = await getClientDetails(req.db, clientApiKey);<br/>      if (clientDetails) {<br/>         next();<br/>      }<br/>   } catch (e) {<br/>      console.log('%%%%%%%% error :', e);<br/>      return res.status(400).send({<br/>         status: false,<br/>         response: "Invalid Api Key"<br/>      });<br/>   }</span><span id="aa9f" class="mv mw it mr b gy nb my l mz na">}</span><span id="521c" class="mv mw it mr b gy nb my l mz na">export const isNewSessionRequired = (httpMethod, url) =&gt; {<br/>  for (let routeObj of newSessionRoutes) {<br/>    if (routeObj.method === httpMethod &amp;&amp; routeObj.path === url) {<br/>      return true;<br/>    }<br/>  }</span><span id="651d" class="mv mw it mr b gy nb my l mz na">return false;<br/>}</span><span id="714a" class="mv mw it mr b gy nb my l mz na">export const isAuthRequired = (httpMethod, url) =&gt; {<br/>  for (let routeObj of authRoutes) {<br/>    if (routeObj.method === httpMethod &amp;&amp; routeObj.path === url) {<br/>      return true;<br/>    }<br/>  }<br/>  return false;<br/>}</span><span id="102e" class="mv mw it mr b gy nb my l mz na">export const generateRandomSessionID = () =&gt; {<br/>  return uuid.v4();<br/>}</span><span id="eee1" class="mv mw it mr b gy nb my l mz na">export const getRedisSessionData = (redisClient,sessionId) =&gt; {<br/>  return new Promise((resolve, reject) =&gt; {<br/>    redisClient.get(sessionId, function (err, data) {<br/>      if (err) {<br/>        reject(err);<br/>      }<br/>      resolve(data);<br/>    });<br/>  })<br/>}</span></pre><p id="fcdc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨å¼€å§‹ä¸‹ä¸€ä¸ªæ–‡ä»¶ä¹‹å‰ï¼Œè¿™é‡Œæœ‰ä¸€äº›æ³¨æ„äº‹é¡¹:</p><p id="2b3b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿™ä¸æ˜¯ç”Ÿäº§è´¨é‡ä»£ç ã€‚æˆ‘ä»¬è¿‡åˆ†ç®€åŒ–äº†äº‹æƒ…ï¼Œå¿½ç•¥äº†ä¸€äº›æœ€ä½³å®è·µã€‚è¿™é‡Œåˆ—å‡ºäº†ä¸€äº›è¿‡äºç®€å•çš„ä¸œè¥¿ï¼Œé™åˆ¶äº†æœ¬æ–‡çš„é‡ç‚¹:</p><p id="e35e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">APIæˆæƒé…ç½®å·²æ”¾å…¥å¸¸é‡å˜é‡ä¸­ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå®ƒä»¬åº”è¯¥ä»æ•°æ®åº“ä¸­è·å–ï¼Œæˆ–è€…åº”è¯¥æ”¾åœ¨jsonæ–‡ä»¶ä¸­ã€‚ç”šè‡³é…ç½®ä¹Ÿå¯èƒ½æ›´å¤æ‚ï¼Œä»¥å¤„ç†åŸºäºç”¨æˆ·è§’è‰²çš„èº«ä»½éªŒè¯ã€‚</p><p id="9248" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> ii) </strong>å¯†ç åº”ä»¥åŠ å¯†æ–¹å¼ä¿å­˜ã€‚è¿™å¯ä»¥é€šè¿‡ä½¿ç”¨bcryptç­‰å„ç§npmåº“è½»æ¾å®ç°</p><p id="a8cf" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨è®©æˆ‘ä»¬ç¼–è¾‘app.jsæ–‡ä»¶ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="be05" class="mv mw it mr b gy mx my l mz na">import {clientApiKeyValidation} from './common/authUtils';</span></pre><p id="04ed" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å°†ä¸Šé¢çš„è¡Œæ›´æ–°å¦‚ä¸‹:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="eb79" class="mv mw it mr b gy mx my l mz na">import { clientApiKeyValidation, isNewSessionRequired, isAuthRequired, generateRandomSessionID, getRedisSessionData } from './common/authUtils';</span></pre><p id="4c34" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å’Œå¦å¤–ä¸¤ä¸ªè¿›å£è´§</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="7543" class="mv mw it mr b gy mx my l mz na">import redis from 'redis';<br/>import Session from './common/Session';</span></pre><p id="744e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨mongo connectä»£ç ä¹‹å‰/ä¹‹åæ·»åŠ ä»¥ä¸‹ä»£ç ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="7827" class="mv mw it mr b gy mx my l mz na">let redisClient = null;<br/>redisClient = redis.createClient({<br/>  prefix: 'node-sess:',<br/>  host: 'localhost'<br/>});</span></pre><p id="3b64" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬æ­£åœ¨å®ä¾‹åŒ–ä¸€ä¸ªrediså®¢æˆ·ç«¯è¿æ¥ï¼Œå¹¶å°†å…¶åˆ†é…ç»™ä¸€ä¸ªå…¨å±€å˜é‡ã€‚å‰ç¼€å€¼å°†ç”¨äºè¯¥å®¢æˆ·ç«¯å†™å…¥/è¯»å–çš„æ‰€æœ‰å¯†é’¥ã€‚è¿™é‡Œä½¿ç”¨çš„é»˜è®¤ç«¯å£æ˜¯6379ã€‚</p><p id="b916" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨ï¼Œåœ¨æˆ‘ä»¬æ³¨å…¥äº†<strong class="kd iu"> clientApiKeyValidationçš„é‚£ä¸€è¡Œä¹‹åæ·»åŠ ä¸‹é¢çš„ä»£ç ã€‚</strong></p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="5f7d" class="mv mw it mr b gy mx my l mz na">app.use(async (req, res, next) =&gt; {<br/>  var apiUrl = req.originalUrl;<br/>  var httpMethod = req.method;</span><span id="898a" class="mv mw it mr b gy nb my l mz na">if (isNewSessionRequired(httpMethod, apiUrl)) {<br/>    let sessionID = generateRandomSessionID()<br/>    req.session = new Session();<br/>    req.session.sessionID = sessionID;<br/>    req.sessionID = sessionID;<br/>  } else if (isAuthRequired(httpMethod, apiUrl)) {<br/>    let sessionID = req.header('Authorization');<br/>    if (sessionID) {<br/>      let redisData = await getRedisSessionData(redisClient, sessionID);<br/>      if (redisData) {<br/>        redisData = JSON.parse(redisData);<br/>        req.session = new Session();<br/>        req.sessionID = sessionID;<br/>        req.session.sessionID = sessionID;<br/>        req.session.userData = redisData;<br/>      } else {<br/>        return res.status(401).send({<br/>          ok: false,<br/>          error: {<br/>            reason: "Invalid Sessiontoken",<br/>            code: 401<br/>          }<br/>        });<br/>      }<br/>    } else {<br/>      return res.status(401).send({<br/>        ok: false,<br/>        error: {<br/>          reason: "Missing Sessiontoken",<br/>          code: 401<br/>        }<br/>      });<br/>    }<br/>  }<br/>  next();<br/>})</span></pre><p id="8490" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬æ³¨å…¥äº†å¦ä¸€ä¸ªè¯·æ±‚å¤„ç†å™¨ï¼Œå®ƒå°†ä¸ºæ‰€æœ‰APIå¤„ç†ä¸ä¼šè¯ç›¸å…³çš„ä¸œè¥¿ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ£€æŸ¥è¢«è°ƒç”¨çš„apiæ˜¯å¦éœ€è¦ä¸€ä¸ªæ–°çš„ä¼šè¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªéšæœºçš„uuidå’Œæ–°çš„ä¼šè¯å¯¹è±¡ï¼Œå¹¶å°†å…¶æŒ‡å®šä¸ºexpress requestå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰æŠŠè¿™äº›æ•°æ®å‘é€åˆ°redisæœåŠ¡å™¨ä¸Šã€‚æˆ‘ä»¬ä»¥åå†åšã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="881b" class="mv mw it mr b gy mx my l mz na">let sessionID = generateRandomSessionID()<br/>req.session = new Session();<br/>req.session.sessionID = sessionID;<br/>req.sessionID = sessionID;</span></pre><p id="5424" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨å¦ä¸€ä¸ªæ¡ä»¶ä¸‹ï¼Œæˆ‘ä»¬æ£€æŸ¥apiæ˜¯å¦éœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„ä¼šè¯ã€‚è¿™é‡Œæœ‰ä¸€ç‚¹éå¸¸é‡è¦ã€‚é€šå¸¸çš„åšæ³•æ˜¯ä»¥ä¸‹åˆ—æ–¹å¼ä¼ é€’æˆæƒä»¤ç‰ŒæŠ¥å¤´:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="54bc" class="mv mw it mr b gy mx my l mz na">Authorization: Bearer a1194981-b541-416e-935</span></pre><p id="4b23" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¤´å­—æ®µåº”è¯¥æ˜¯â€œAuthorization â€,å€¼çš„ç¬¬ä¸€éƒ¨åˆ†åº”è¯¥æ˜¯å…³é”®å­—â€œBearer â€,ç„¶åç”±ç©ºæ ¼åˆ†éš”çš„ç¬¬äºŒéƒ¨åˆ†åº”è¯¥åŒ…å«ä»¤ç‰Œã€‚</p><p id="d159" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿™æ˜¯W3Cç»™å‡ºçš„ä¸€ä¸ªæ ‡å‡†ã€‚å…³é”®å­—â€œæŒç¥¨äººâ€è¢«ç”¨æ¥åŒºåˆ«äºç°æœ‰çš„åŸºæœ¬è®¤è¯ã€‚<strong class="kd iu">ä½†åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è‡ªå®šä¹‰æ ‡é¢˜ï¼Œåªæ˜¯ä¸ºäº†å±•ç¤ºæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ ‡é¢˜å­—æ®µã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ä½¿ç”¨ä¸è®°åæˆæƒå¤´ã€‚</strong></p><p id="13c8" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›å®¢æˆ·ç«¯åœ¨è¯·æ±‚å¤´ä¸­å‘é€ä¼šè¯ä»¤ç‰Œï¼Œå­—æ®µåä¸º<strong class="kd iu"> <em class="la"> sessiontoken </em> </strong></p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="120e" class="mv mw it mr b gy mx my l mz na">let sessionID = req.header('sessiontoken');</span></pre><p id="10fd" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚æœsessionIDä¸¢å¤±ï¼Œæˆ‘ä»¬å°†åœ¨apiä¸­è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ä½†æ˜¯å¦‚æœsessionIDå‡ºç°åœ¨å¤´ä¸­ï¼Œæˆ‘ä»¬å°è¯•è®¿é—®redisæœåŠ¡å™¨å¹¶è·å–ä¼ é€’çš„é”®çš„è®°å½•ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="8f82" class="mv mw it mr b gy mx my l mz na">let redisData = await getRedisSessionData(redisClient, sessionID);</span></pre><p id="dc57" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚æœredisDataä¸ºnullï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åœ¨apiä¸­è¿”å›ä¸€ä¸ªé”™è¯¯ï¼ŒæŒ‡å‡ºä»¤ç‰Œæ— æ•ˆã€‚å¦‚æœä¼šè¯è¿‡æœŸå¹¶ä»redisæœåŠ¡å™¨ä¸­åˆ é™¤ï¼Œæˆ–è€…åœ¨å¤´ä¸­ä¼ é€’äº†éšæœºæ— æ•ˆå€¼ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚</p><p id="9c22" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä½†å¦‚æœæˆ‘ä»¬ä»redisè·å–ç”¨æˆ·ä¿¡æ¯ã€‚æˆ‘ä»¬è§£æç›¸åŒçš„æ•°æ®ã€‚{æˆ‘ä»¬å°†åœ¨redisä¸­ä»¥å­—ç¬¦ä¸²å½¢å¼å­˜å‚¨æˆ‘ä»¬çš„æ•°æ®}ã€‚é™¤äº†ä¿ç•™æ—§çš„å€¼ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¸ºæ–°çš„ä¼šè¯åšäº†ç±»ä¼¼çš„äº‹æƒ…ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="52f7" class="mv mw it mr b gy mx my l mz na">        redisData = JSON.parse(redisData);<br/>        req.session = new Session();<br/>        req.sessionID = sessionID;<br/>        req.session.sessionID = sessionID;<br/>        req.session.userData = redisData;</span></pre><p id="5422" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨ï¼Œåœ¨æˆ‘ä»¬æ‰€æœ‰çš„è·¯ç”±æ³¨å…¥ä¹‹åï¼Œè®©æˆ‘ä»¬ä¹Ÿä¸ºæ‰€æœ‰çš„APIæ·»åŠ ä¸€ä¸ªå“åº”å¤„ç†ç¨‹åºã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="a849" class="mv mw it mr b gy mx my l mz na">app.use((req, res, next) =&gt; {<br/>  if (!res.data) {<br/>    return res.status(404).send({<br/>      ok: false,<br/>      error: {<br/>        reason: "Invalid Endpoint", code: 404<br/>      }<br/>    });<br/>  }</span><span id="e1a8" class="mv mw it mr b gy nb my l mz na">  if (req.session &amp;&amp; req.sessionID) {<br/>    try {<br/>      req.session.save(redisClient);<br/>      res.setHeader('sessiontoken', req.sessionID);<br/>      res.data['sessiontoken'] = req.sessionID;<br/>    } catch (e) {<br/>      console.log('Error -&gt;:', e);<br/>    }<br/>  }<br/>  res.status(res.statusCode || 200)<br/>    .send({ ok: true, response: res.data });<br/>})</span></pre><p id="d23a" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨è¿™ä¸ªå“åº”å¤„ç†ç¨‹åºä¸­ã€‚æˆ‘ä»¬é¦–å…ˆæ£€æŸ¥å“åº”å¯¹è±¡æ˜¯å¦å…·æœ‰<strong class="kd iu">æ•°æ®</strong>å±æ€§ã€‚å¦‚æœç¼ºå°‘æ•°æ®å±æ€§ï¼Œæˆ‘ä»¬å°†åœ¨apiå“åº”ä¸­å‘é€404é”™è¯¯ã€‚</p><p id="2198" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ä½†æ˜¯ï¼Œå¦‚æœè®¾ç½®äº†æ•°æ®ï¼Œæˆ‘ä»¬ä¼šä»¥å®šä¹‰å¥½çš„æ ¼å¼å‘é€å“åº”ï¼Œå¹¶é™„å¸¦æ‰€éœ€çš„httpçŠ¶æ€ä»£ç ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="aac3" class="mv mw it mr b gy mx my l mz na">res.status(res.statusCode||200).send({ok: true, response:res.data});</span></pre><p id="f73b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚æœå¿«é€Ÿè¯·æ±‚å¯¹è±¡æœ‰ä¸€ä¸ªsessionIDå­—æ®µï¼Œæˆ‘ä»¬å°†æ‰§è¡Œä¸¤ä¸ªæ“ä½œ:</p><p id="81ac" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨Session.save()æ–¹æ³•å°†è¿™äº›æ•°æ®ä¿å­˜åœ¨redisæœåŠ¡å™¨ä¸­ã€‚</p><p id="08de" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated"><strong class="kd iu"> ii) </strong>æˆ‘ä»¬å°†sessiontokenå€¼æ·»åŠ åˆ°å“åº”æŠ¥å¤´å’Œå“åº”æœ‰æ•ˆè½½è·ä¸­ã€‚</p><p id="8e94" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å› æ­¤ï¼Œæˆ‘ä»¬çš„app.jsä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="f46c" class="mv mw it mr b gy mx my l mz na">import express from 'express';<br/>import bodyParser from 'body-parser';<br/>import user from './routes/user';<br/>import {MongoClient} from 'mongodb';<br/>import { clientApiKeyValidation, isNewSessionRequired, isAuthRequired, generateRandomSessionID, getRedisSessionData } from './common/authUtils';<br/>import redis from 'redis';<br/>import Session from './common/Session';</span><span id="6a12" class="mv mw it mr b gy nb my l mz na">const CONN_URL = 'mongodb://localhost:27017';</span><span id="7712" class="mv mw it mr b gy nb my l mz na">let mongoClient = null;</span><span id="41aa" class="mv mw it mr b gy nb my l mz na">MongoClient.connect(CONN_URL,{ useNewUrlParser: true }, function (err, client) {<br/>   mongoClient = client;<br/>})</span><span id="2efc" class="mv mw it mr b gy nb my l mz na">let redisClient = null;<br/>redisClient = redis.createClient({<br/>  prefix: 'node-sess:',<br/>  host: 'localhost'<br/>});</span><span id="547b" class="mv mw it mr b gy nb my l mz na">let app = express();</span><span id="e14b" class="mv mw it mr b gy nb my l mz na">// parse application/x-www-form-urlencoded<br/>app.use(bodyParser.urlencoded({ extended: false }));</span><span id="e7e1" class="mv mw it mr b gy nb my l mz na">// parse application/json<br/>app.use(bodyParser.json());</span><span id="45ef" class="mv mw it mr b gy nb my l mz na">app.use((req,res,next)=&gt;{<br/>   req.db = mongoClient.db('test');<br/>   next();<br/>})</span><span id="b4bb" class="mv mw it mr b gy nb my l mz na">app.get('/',(req,res,next)=&gt;{<br/>    res.status(200).send({<br/>      status:true,<br/>      response:'Hello World!'<br/>    });<br/>});</span><span id="e4bc" class="mv mw it mr b gy nb my l mz na">app.use(clientApiKeyValidation);</span><span id="70ce" class="mv mw it mr b gy nb my l mz na">app.use(async (req, res, next) =&gt; {<br/>  var apiUrl = req.originalUrl;<br/>  var httpMethod = req.method;</span><span id="99ae" class="mv mw it mr b gy nb my l mz na">if (isNewSessionRequired(httpMethod, apiUrl)) {<br/>    let sessionID = generateRandomSessionID()<br/>    req.session = new Session();<br/>    req.session.sessionID = sessionID;<br/>    req.sessionID = sessionID;<br/>  } else if (isAuthRequired(httpMethod, apiUrl)) {<br/>    let sessionID = req.header('sessiontoken');<br/>    if (sessionID) {<br/>      let redisData = await getRedisSessionData(redisClient, sessionID);<br/>      if (redisData) {<br/>        redisData = JSON.parse(redisData);<br/>        req.session = new Session();<br/>        req.sessionID = sessionID;<br/>        req.session.sessionID = sessionID;<br/>        req.session.userData = redisData;<br/>      } else {<br/>        return res.status(401).send({<br/>          ok: false,<br/>          error: {<br/>            reason: "Invalid Sessiontoken",<br/>            code: 401<br/>          }<br/>        });<br/>      }<br/>    } else {<br/>      return res.status(401).send({<br/>        ok: false,<br/>        error: {<br/>          reason: "Missing Sessiontoken",<br/>          code: 401<br/>        }<br/>      });<br/>    }<br/>  }<br/>  next();<br/>})</span><span id="0787" class="mv mw it mr b gy nb my l mz na">app.use('/user',user);</span><span id="f2f6" class="mv mw it mr b gy nb my l mz na">app.use((req, res, next) =&gt; {<br/>  if (!res.data) {<br/>    return res.status(404).send({<br/>      ok: false,<br/>      error: {<br/>        reason: "Invalid Endpoint", code: 404<br/>      }<br/>    });<br/>  }</span><span id="00c1" class="mv mw it mr b gy nb my l mz na">if (req.session &amp;&amp; req.sessionID) {<br/>    try {<br/>      req.session.save(redisClient);<br/>      res.setHeader('sessiontoken', req.sessionID);<br/>      res.data['sessiontoken'] = req.sessionID;<br/>    } catch (e) {<br/>      console.log('Error -&gt;:', e);<br/>    }<br/>  }<br/>  res.status(res.statusCode || 200)<br/>    .send({ ok: true, response: res.data });<br/>})</span><span id="4d49" class="mv mw it mr b gy nb my l mz na">app.listen(30006,()=&gt;{<br/>   console.log(' ********** : running on 30006');<br/>})</span><span id="46df" class="mv mw it mr b gy nb my l mz na">process.on('exit', (code) =&gt; {<br/>   mongoClient.close();<br/>   console.log(`About to exit with code: ${code}`);<br/>});</span><span id="f6f4" class="mv mw it mr b gy nb my l mz na">process.on('SIGINT', function() {<br/>   console.log("Caught interrupt signal");<br/>   process.exit();<br/>});</span><span id="eb3d" class="mv mw it mr b gy nb my l mz na">module.exports = app;</span></pre><p id="481c" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨è®©æˆ‘ä»¬è½¬åˆ°æˆ‘ä»¬çš„<strong class="kd iu"> routes/user.js </strong>æ–‡ä»¶ã€‚åœ¨æ·»åŠ ä¸¤ä¸ªæ–°çš„apiè·¯ç”±ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç¼–è¾‘å‰é¢çš„è·¯ç”±"<em class="la"> /hello </em>"ä»¥ä½¿ç”¨æ–°çš„å“åº”å¤„ç†ç¨‹åºã€‚</p><p id="8703" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ—©æœŸçš„ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="9244" class="mv mw it mr b gy mx my l mz na">router.post('/hello',async (req,res)=&gt;{<br/>  let uname = req.body.username;<br/>  let userDetails = await getUserDetails(req.db,uname)<br/>  res.status(200).send({<br/>    status:true,<br/>    response:userDetails<br/>  });<br/>});</span></pre><p id="9879" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨æˆåŠŸæ£€ç´¢æ•°æ®åï¼Œæˆ‘ä»¬é€šå¸¸ç›´æ¥å‘é€å“åº”ã€‚ç°åœ¨è®©æˆ‘ä»¬å°†ä¸Šé¢çš„æ–¹æ³•ç¼–è¾‘æˆä¸‹é¢çš„æ–¹æ³•:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="7e40" class="mv mw it mr b gy mx my l mz na">router.post('/hello', async (req, res, next) =&gt; {<br/>  let uname = req.body.username;<br/>  let userDetails = await getUserDetails(req.db, uname)<br/>  res.data = {<br/>    status: true,<br/>    response: userDetails<br/>  };<br/>  next();<br/>});</span></pre><p id="6e16" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿™é‡Œæˆ‘ä»¬åªæ˜¯è®¾ç½®å“åº”å¯¹è±¡çš„æ•°æ®å±æ€§å¹¶è°ƒç”¨next()æ–¹æ³•ã€‚</p><p id="e9fc" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æ›´æ–°importè¯­å¥ï¼Œä½¿å…¶ä¹ŸåŒ…å«updateUserPasswordæ–¹æ³•</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="c0a7" class="mv mw it mr b gy mx my l mz na">import { getUserDetails, updateUserPassword } from '../services/UserService';</span></pre><p id="333f" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç™»å½•apiçš„ä»£ç å¦‚ä¸‹:</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="7ed0" class="mv mw it mr b gy mx my l mz na">router.post('/login', async (req, res, next) =&gt; {<br/>  let uname = req.body.username;<br/>  let pwd = req.body.password;<br/>  let userDetails = await getUserDetails(req.db, uname);<br/>  if (userDetails) {<br/>    let { password } = userDetails;<br/>    if (pwd === password) {<br/>      res.data = {<br/>        status: true,<br/>        response: userDetails<br/>      };<br/>      req.session.set(userDetails);<br/>    } else {<br/>      res.statusCode = 400;<br/>      res.data = {<br/>        status: false,<br/>        error: 'Invalid Password'<br/>      };<br/>    }<br/>  } else {<br/>    res.statusCode = 400;<br/>    res.data = {<br/>      status: false,<br/>      error: 'Invalid Username'<br/>    };<br/>  }<br/>  next();<br/>});</span></pre><p id="e856" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å¦ä¸€ä¸ªæ¡ä»¶æ¥æ£€æŸ¥è¯·æ±‚æ•°æ®ä¸­æ˜¯å¦ç¼ºå°‘ç”¨æˆ·åæˆ–å¯†ç ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°è¯•é€šè¿‡ä¼ é€’ç”¨æˆ·åæ¥è·å–ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚å¦‚æœæ•°æ®ä¸¢å¤±ï¼Œæˆ‘ä»¬ä¼šå‘é€ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼Œå£°æ˜ç”¨æˆ·åæ— æ•ˆã€‚å¦åˆ™æˆ‘ä»¬å°è¯•æ¯”è¾ƒå¯†ç ã€‚å¦‚æœå¯†ç ä¸åŒ¹é…ï¼Œæˆ‘ä»¬ä¼šå‘é€ä¸€ä¸ªé”™è¯¯ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬æ›´æ–°å“åº”æ•°æ®å¯¹è±¡å’Œè¯·æ±‚ä¼šè¯å¯¹è±¡ä¸­çš„ç”¨æˆ·æ•°æ®ã€‚ç”±äºè¯·æ±‚ä¼šè¯å¯¹è±¡ç°åœ¨æœ‰äº†userdataï¼Œåœ¨æˆ‘ä»¬çš„å“åº”å¤„ç†ç¨‹åºä¸­è°ƒç”¨çš„save()å‡½æ•°å°†æŠŠæ•°æ®ä¿å­˜åˆ°æˆ‘ä»¬çš„redisä¸­ã€‚</p><p id="a217" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨è®©æˆ‘ä»¬ä¸ºæ›´æ–°å¯†ç apiæ·»åŠ ä»£ç ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="68a7" class="mv mw it mr b gy mx my l mz na">router.put('/password', async (req, res, next) =&gt; {<br/>  try {<br/>    let oldPwd = req.body.old_password;<br/>    let newPwd = req.body.new_password;<br/>    if (!oldPwd &amp;&amp; !newPwd) {<br/>      res.statusCode = 400;<br/>      res.data = {<br/>        status: false,<br/>        error: 'Invalid Parameters'<br/>      }<br/>    }<br/>    let uname = req.session.userData.username;<br/>    let userDetails = await getUserDetails(req.db, uname);<br/>    if (oldPwd !== userDetails.password) {<br/>      res.statusCode = 400;<br/>      res.data = {<br/>        status: false,<br/>        error: "Old Password doesn't match"<br/>      }<br/>    } else {<br/>      let updateRes = await updateUserPassword(req.db,uname,newPwd)<br/>      res.data = {<br/>        status: true,<br/>        response:updateRes,<br/>        message: "Password updated successfully"<br/>      }<br/>    }  <br/>    next();<br/>  } catch (e) {<br/>    next(e)<br/>  }<br/>})</span></pre><p id="51d9" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è¿™æ˜¯ä»£ç ä¸­æœ‰è¶£çš„éƒ¨åˆ†ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä»ä¼šè¯ä»¤ç‰Œä¸­è·å–æ‰€æœ‰ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ã€‚è¯·æ±‚ä¸­æ²¡æœ‰æåˆ°ç”¨æˆ·è¯¦ç»†ä¿¡æ¯æˆ–ç”¨æˆ·åã€‚ä½†æ˜¯æˆ‘ä»¬ä½œä¸ºè¯·æ±‚å¤„ç†ç¨‹åºæ³¨å…¥çš„ä¼šè¯å¤„ç†ç¨‹åºå¿…é¡»åœ¨è¯·æ±‚ä¼šè¯å¯¹è±¡ä¸­æ³¨å…¥ç”¨æˆ·æ•°æ®ã€‚</p><pre class="mm mn mo mp gt mq mr ms mt aw mu bi"><span id="0b55" class="mv mw it mr b gy mx my l mz na">let uname = req.session.userData.username;</span></pre><p id="7845" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬ä»è¯·æ±‚ä¼šè¯å¯¹è±¡ä¸­è·å–ç”¨æˆ·åï¼Œç„¶åæ‰§è¡Œæ›´æ–°ç”¨æˆ·å¯†ç æ‰€éœ€çš„æ‰€æœ‰æ“ä½œã€‚</p><p id="5722" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å”·ï¼ï¼ï¼ï¼ï¼</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nc"><img src="../Images/ad007796f5d739a4dbe5b54b253fe4d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TdPv489I_pHtbhjFkY9VCA.jpeg"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">è‚¯å¾·å°”Â·è©¹å§†æ–¯åœ¨<a class="ae kz" href="https://unsplash.com/search/photos/tired?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</p></figure></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="b662" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨è®©æˆ‘ä»¬æµ‹è¯•æˆ‘ä»¬çš„ä»£ç ã€‚ä½¿ç”¨node index.jså‘½ä»¤è¿è¡Œé¡¹ç›®ã€‚</p><p id="a37b" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">è®©æˆ‘ä»¬é¦–å…ˆç‚¹å‡»æˆ‘ä»¬çš„æ—§APIâ€œ/helloâ€æ¥æ£€æŸ¥æˆ‘ä»¬çš„æ–°å“åº”å¤„ç†ç¨‹åºã€‚</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nh"><img src="../Images/b89c225300ba50f0d819b78bd85f9c14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e5uRe7F25Y-_4Tf7X-JG-w.png"/></div></div></figure><p id="9773" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨è®©æˆ‘ä»¬ç‚¹å‡»ç™»å½•api:</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi ni"><img src="../Images/d44a3afdb3cefa3ad98b8646ccdd2318.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*geDcpwLGZJruK6iOPNlLOg.png"/></div></div></figure><p id="11a4" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘ä»¬å¯ä»¥åœ¨apiå“åº”ä¸­çœ‹åˆ°ä¼šè¯ä»¤ç‰Œã€‚æˆ‘ä»¬è¿˜å¯ä»¥æ£€æŸ¥rediså®ä¾‹ï¼Œä»¥ç¡®è®¤æˆ‘ä»¬æœ‰ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nj"><img src="../Images/25a6fe0d8e4030f747ab25d9224c46f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMnK0tZEgp8cJDPx_fhiCQ.png"/></div></div></figure><p id="e53d" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨è®©æˆ‘ä»¬å°è¯•ç”¨ä¸€ä¸ªæ— æ•ˆçš„ä»¤ç‰Œæ¥æ”»å‡»æ›´æ–°å¯†ç api:</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nk"><img src="../Images/059ffa2c9e20c82de1f49b44dfca42f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uOb-Jm6OF5YipzDmDkSXKA.png"/></div></div></figure><p id="4818" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">ç°åœ¨è®©æˆ‘ä»¬å¤åˆ¶ä¹‹å‰åœ¨ç™»å½•apiå“åº”ä¸­è·å¾—çš„ä¼šè¯ä»¤ç‰Œï¼Œå¹¶å°†å…¶ä¼ é€’åˆ°æ›´æ–°å¯†ç apiçš„å¤´ä¸­ã€‚</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/4fb26e364d3c2c07eeea699e85ddba58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rSgByjJxgIZkME9EdYnqDg.png"/></div></div></figure><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nm"><img src="../Images/b0b10910424d2651eb257c131a4313ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f7Zg19YszYRwxYyEYlvRUQ.png"/></div></div></figure><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nl"><img src="../Images/d619e7e2fefa66209a327c6144de7de1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ysBs8Qito0V4GnwEk_zoDw.png"/></div></div></figure><p id="d861" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">æˆ‘å¸Œæœ›æ‚¨å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä½¿ç”¨JWTå®ç°èº«ä»½éªŒè¯ã€‚</p><blockquote class="mf mg mh"><p id="43c3" class="kb kc la kd b ke kf kg kh ki kj kk kl mi kn ko kp mj kr ks kt mk kv kw kx ky im bi translated">æ‚¨å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°ä»£ç :</p><p id="6217" class="kb kc la kd b ke kf kg kh ki kj kk kl mi kn ko kp mj kr ks kt mk kv kw kx ky im bi translated"><a class="ae kz" href="https://github.com/pankaj805/medium-06_redis" rel="noopener ugc nofollow" target="_blank">https://github.com/pankaj805/medium-06_redis</a></p></blockquote></div><div class="ab cl lu lv hx lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="im in io ip iq"><p id="509e" class="pw-post-body-paragraph kb kc it kd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky im bi translated">å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œä½ å¯ä»¥ğŸ‘å¹¶ä¸ä»–äººåˆ†äº«ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ•´ä¸ª<a class="ae kz" href="https://medium.com/@pankaj.panigrahi/list-of-node-js-articles-ededa6dd304b" rel="noopener"> <strong class="kd iu"> <em class="la">æ–‡ç« ç³»åˆ—</em> </strong> </a>ã€‚</p><figure class="mm mn mo mp gt ju gh gi paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="gh gi nn"><img src="../Images/0bf5df4c347f4b7878add00ed9d2eeef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RIUq42rf1bjVzLSt"/></div></div><p class="nd ne gj gh gi nf ng bd b be z dk translated">ä»Šå¤©åˆ°æ­¤ä¸ºæ­¢ã€‚</p></figure></div></div>    
</body>
</html>