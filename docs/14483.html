<html>
<head>
<title>How to Add Editable HTML Content to a React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•å‘Reactåº”ç”¨ç¨‹åºæ·»åŠ å¯ç¼–è¾‘çš„HTMLå†…å®¹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://betterprogramming.pub/how-to-add-editable-html-content-to-a-react-app-c98564856761?source=collection_archive---------2-----------------------#2022-12-22">https://betterprogramming.pub/how-to-add-editable-html-content-to-a-react-app-c98564856761?source=collection_archive---------2-----------------------#2022-12-22</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="e030" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">äº†è§£å¦‚ä½•å°†contentEditableä¸Reactç»“åˆä½¿ç”¨ï¼Œä»¥æ”¯æŒäº¤äº’å¼å¯ç¼–è¾‘å†…å®¹</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9fe9049a8d4a58593571adf2889bc231.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dcjb15gzVR-USEqN"/></div></div></figure><p id="89fe" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">ä½ æœ‰æ²¡æœ‰æƒ³è¿‡åƒ<a class="ae lq" href="http://docs.google.com" rel="noopener ugc nofollow" target="_blank"> Google Docs </a>æˆ–<a class="ae lq" href="http://notion.so" rel="noopener ugc nofollow" target="_blank">concept</a>è¿™æ ·çš„åº”ç”¨æ˜¯å¦‚ä½•åœ¨ç½‘ç»œåº”ç”¨ä¸­å®ç°äº¤äº’å¼ã€å¯ç¼–è¾‘çš„ä¸°å¯Œå†…å®¹çš„ï¼Ÿä½¿ç”¨åƒ<code class="fe lr ls lt lu b">textarea</code>è¿™æ ·çš„è¾“å…¥æ¥æ„å»ºè¡¨å•çš„é€šå¸¸æ–¹æ³•ä¸èƒ½æä¾›åŒæ ·çš„ä½“éªŒã€‚</p><p id="f646" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">ç›¸åï¼Œåƒè¿™æ ·çš„åº”ç”¨ç¨‹åºåˆ©ç”¨HTMLçš„<code class="fe lr ls lt lu b"><a class="ae lq" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/contenteditable" rel="noopener ugc nofollow" target="_blank">contentEditable</a></code>å±æ€§ï¼Œå…è®¸ç”¨æˆ·ç›´æ¥ç¼–è¾‘é¡µé¢ä¸Šçš„å†…å®¹ã€‚è™½ç„¶å¯ç”¨å†…å®¹ç¼–è¾‘å°±åƒè®¾ç½®<code class="fe lr ls lt lu b">contentEditable</code>å±æ€§ä¸€æ ·ç®€å•ï¼Œä½†å®é™…ä¸Šå°†å…¶é›†æˆåˆ°åº”ç”¨ç¨‹åºä¸­å¹¶ä»ä¸­è·å–å¯ç”¨æ•°æ®å´æ˜¯å¦ä¸€å›äº‹ã€‚</p><p id="5590" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœä½ å°è¯•è¿‡åœ¨<a class="ae lq" href="https://reactjs.org" rel="noopener ugc nofollow" target="_blank"> React </a>ä¸­ä½¿ç”¨contentEditableï¼Œä½ ä¼šå¾ˆå¿«æ„è¯†åˆ°è¿™ä¸¤è€…ä¸èƒ½å¾ˆå¥½åœ°é…åˆâ€”â€”è‡³å°‘ï¼Œæ²¡æœ‰ä¸€ç‚¹é¢å¤–çš„å·¥ä½œã€‚åœ¨æœ¬å¸–ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£å¦‚ä½•å°†<code class="fe lr ls lt lu b">contentEditable</code>ä¸Reactç»“åˆä½¿ç”¨ï¼Œä»¥åœ¨Reactåº”ç”¨ä¸­å®ç°å¯ç¼–è¾‘çš„äº¤äº’å¼å†…å®¹ã€‚</p><h1 id="98f7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">ä»€ä¹ˆæ˜¯å†…å®¹å¯ç¼–è¾‘ï¼Ÿ</h1><p id="96f5" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated"><code class="fe lr ls lt lu b">contentEditable</code>æ˜¯ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥æ”¾åœ¨HTMLå…ƒç´ ä¸Šï¼Œè®©ç”¨æˆ·å¯ä»¥ç¼–è¾‘å†…å®¹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„HTMLç‰‡æ®µæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨<code class="fe lr ls lt lu b">contentEditable</code>:</p><pre class="kj kk kl km gt ms lu mt bn mu mv bi"><span id="7071" class="mw lw it lu b be mx my l mz na">&lt;div style="border: 1px solid #ccc; padding: 8px" contentEditable&gt; <br/>  &lt;h4&gt;Editable Content - Edit Me!&lt;/h4&gt; <br/>  &lt;p&gt;This piece of content has the contentEditable attribute set.&lt;/p&gt; <br/>&lt;/div&gt;</span></pre><p id="0b0b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">å¦‚å‰æ‰€è¿°ï¼Œä½¿ç”¨<code class="fe lr ls lt lu b">contentEditable</code>è¿›è¡Œç¼–è¾‘å¾ˆç®€å•ï¼Œä½†å¹¶ä¸æ€»æ˜¯<em class="nb">å®¹æ˜“</em>ä½¿ç”¨ä½ çš„åº”ç”¨ç¨‹åºã€‚ä¸ºäº†ç”¨<code class="fe lr ls lt lu b">contentEditable</code>å®Œæ•´åœ°æ„å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä½ éœ€è¦ä»¥æŸç§æ–¹å¼è§£å†³ä»¥ä¸‹é—®é¢˜ã€‚</p><ul class=""><li id="cc96" class="nc nd it kw b kx ky la lb ld ne lh nf ll ng lp nh ni nj nk bi translated">ä¸ºæ›´æ–°çš„å†…å®¹æ·»åŠ æ›´æ”¹å¤„ç†ç¨‹åº</li><li id="7b21" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp nh ni nj nk bi translated">æ·»åŠ å¯¹ç¼–è¾‘å†…å®¹çš„éªŒè¯å’Œå‡€åŒ–</li><li id="aad0" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp nh ni nj nk bi translated">æ·»åŠ å†…éƒ¨æ•°æ®è¡¨ç¤ºçš„ç¿»è¯‘(å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸å­˜å‚¨å†…å®¹çš„åŸå§‹HTML)</li><li id="e6b7" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp nh ni nj nk bi translated">ä½¿å†…å®¹å¯ç¼–è¾‘ä¸åº”ç”¨ç¨‹åºæ•°æ®ç”Ÿå‘½å‘¨æœŸçš„å…¶ä½™éƒ¨åˆ†é…åˆè‰¯å¥½</li></ul><p id="6923" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">æœ€åè¿™ä¸€ç‚¹å¯¹äºReact- <code class="fe lr ls lt lu b">contentEditable</code>å’ŒReact conflictæ¥è¯´æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æŒ‘æˆ˜ï¼Œå› ä¸ºå®ƒä»¬ç®¡ç†å’Œæ›´æ–°DOMçŠ¶æ€çš„æ–¹å¼ä¸åŒã€‚</p><h1 id="1e7c" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">åœ¨Reactä¸­ä½¿ç”¨contentEditableæœ‰å“ªäº›æŒ‘æˆ˜ï¼Ÿ</h1><p id="5fc3" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated">åœ¨ç”¨ReactæŸ¥çœ‹<code class="fe lr ls lt lu b">contentEditable</code>ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹å¦‚ä½•ç”¨<code class="fe lr ls lt lu b">textarea</code>å®ç°<em class="nb">éå¯Œ</em>æ–‡æœ¬ç¼–è¾‘:</p><pre class="kj kk kl km gt ms lu mt bn mu mv bi"><span id="c06d" class="mw lw it lu b be mx my l mz na">const TextAreaEditable = () =&gt; { <br/>  const [content, setContent] = React.useState("") <br/>  return ( <br/>    &lt;textarea value={content} onChange={e =&gt; setContent(e.currentTarget.value)} /&gt; <br/>  ) <br/>}</span></pre><p id="5748" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¯•å›¾åœ¨Reactåº”ç”¨ç¨‹åºä¸­å¯¹<code class="fe lr ls lt lu b">contentEditable</code>å†…å®¹é‡‡ç”¨è¿™ç§æ¨¡å¼ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šé‡åˆ°é”™è¯¯ã€è­¦å‘Šå’Œæ„å¤–è¡Œä¸ºã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸º<code class="fe lr ls lt lu b">contentEditable</code>æ”¹ç¼–ä¸Šè¿°ä»£ç çš„ä¸€ä¸ªå¹¼ç¨šå°è¯•:</p><pre class="kj kk kl km gt ms lu mt bn mu mv bi"><span id="c449" class="mw lw it lu b be mx my l mz na">ğŸš« Our naive attempt at using contentEditable: <br/><br/>const Editable = () =&gt; { <br/>  const [content, setContent] = React.useState("") <br/>  return ( <br/>    &lt;div onBlur={t =&gt; setContent(t.currentTarget.innerHTML)} contentEditable&gt;<br/>      {content} <br/>    &lt;/div&gt; <br/>  ) <br/>}</span></pre><p id="daea" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">å¦‚æœæˆ‘ä»¬æŸ¥çœ‹æ§åˆ¶å°ï¼Œæˆ‘ä»¬ä¼šåœ¨å‘ˆç°é¡µé¢æ—¶çœ‹åˆ°ä»¥ä¸‹è­¦å‘Š:</p><blockquote class="nq nr ns"><p id="1b86" class="ku kv nb kw b kx ky ju kz la lb jx lc nt le lf lg nu li lj lk nv lm ln lo lp im bi translated"><em class="it">è­¦å‘Š:ä¸€ä¸ªç»„ä»¶æ˜¯</em> <code class="fe lr ls lt lu b"><em class="it">contentEditable</em></code> <em class="it">å¹¶ä¸”åŒ…å«ç”±Reactç®¡ç†çš„</em> <code class="fe lr ls lt lu b"><em class="it">children</em></code> <em class="it">ã€‚ç°åœ¨ï¼Œæ‚¨æœ‰è´£ä»»ä¿è¯è¿™äº›èŠ‚ç‚¹ä¸ä¼šè¢«æ„å¤–ä¿®æ”¹æˆ–å¤åˆ¶ã€‚è¿™å¤§æ¦‚ä¸æ˜¯æ•…æ„çš„ã€‚</em></p></blockquote><p id="135b" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">é—®é¢˜æ˜¯å¯ç”¨äº†<code class="fe lr ls lt lu b">contentEditable</code>åï¼ŒReactå’Œæµè§ˆå™¨éƒ½æƒ³å¤„ç†å…ƒç´ å†…éƒ¨å†…å®¹çš„çŠ¶æ€ã€‚æ­¤å¤–ï¼Œå½“æˆ‘ä»¬å¼€å§‹ç¼–è¾‘å†…å®¹æ—¶ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸€äº›å…¶ä»–é—®é¢˜ã€‚</p><p id="c978" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">å¦‚æœæˆ‘å¼€å§‹ç¼–è¾‘å†…å®¹ï¼Œå¹¶æŒ‰ä¸‹command-Bæ¥åŠ ç²—æˆ‘æ­£åœ¨ç¼–è¾‘çš„ä¸€äº›æ–‡æœ¬ï¼Œæˆ‘ä¼šæ³¨æ„åˆ°ä¸¤ä»¶äº‹:</p><p id="d6f0" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">é¦–å…ˆâ€”â€”å®ƒæœ‰æ•ˆï¼-ä¸éœ€è¦åšä»»ä½•ç‰¹æ®Šå¤„ç†ï¼Œæˆ‘ä»¬å°±èƒ½ä»äº¤äº’å¼ç¼–è¾‘å™¨ä¸­è¿›è¡Œæ–‡æœ¬æ ·å¼æ“ä½œã€‚</p><p id="2323" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">ä½†æ˜¯æˆ‘æ³¨æ„åˆ°çš„ç¬¬äºŒä»¶äº‹æ˜¯ï¼Œå½“è§†å›¾æ¨¡ç³Šå’ŒçŠ¶æ€æ›´æ–°å‘ç”Ÿæ—¶ï¼Œæˆ‘çš„æ–‡æœ¬å˜æˆäº†ä¸€å †HTMLï¼æˆ‘æ²¡æœ‰çœ‹åˆ°æ–‡æœ¬â€œ1 <strong class="kw iu"> 2 </strong> 3â€ï¼Œè€Œæ˜¯çœ‹åˆ°äº†<code class="fe lr ls lt lu b">1&lt;span style="font-weight: bold;"&gt;2&lt;/span&gt;3</code></p><p id="8c58" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼</p><p id="1c83" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">å½“ç„¶ï¼Œé—®é¢˜æ˜¯æˆ‘ä»¬çš„å†…å®¹å­—ç¬¦ä¸²æ˜¯çº¯HTMLï¼Œä½†æ˜¯æˆ‘ä»¬è¯•å›¾é€šè¿‡å°†å®ƒä½œä¸º<code class="fe lr ls lt lu b">div</code>çš„å­å…ƒç´ ä¼ é€’æ¥åœ¨Reactä¸­å‘ˆç°å®ƒã€‚Reactä¸ä¼šå°†è¿™äº›å­å…ƒç´ è§£é‡Šä¸ºHTMLï¼Œè€Œæ˜¯å¯¹å†…å®¹è¿›è¡Œè½¬ä¹‰ã€‚</p><h1 id="ba64" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">å±é™©çš„è§£å†³æ–¹æ¡ˆ</h1><p id="9a0b" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated">ä¸ºäº†è®©æˆ‘ä»¬çš„<code class="fe lr ls lt lu b">contentEditable</code>ç»„ä»¶æ­£ç¡®å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰Reactå‘ˆç°ä¸€ä¸ªHTMLå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯çº¯æ–‡æœ¬ã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™æ ·çš„æŠ€æœ¯æ˜¯å­˜åœ¨çš„ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªå¬èµ·æ¥å¾ˆå“äººçš„åå­—:<code class="fe lr ls lt lu b"><a class="ae lq" href="https://reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml" rel="noopener ugc nofollow" target="_blank">dangerouslySetInnerHTML</a></code>ã€‚</p><p id="4103" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">å±æ€§å¯ä»¥ç”¨æ¥è®¾ç½®å…ƒç´ çš„å†…éƒ¨HTMLï¼Œè®©æˆ‘ä»¬é‡å†™æˆ‘ä»¬çš„ç»„ä»¶:</p><pre class="kj kk kl km gt ms lu mt bn mu mv bi"><span id="eb12" class="mw lw it lu b be mx my l mz na">âœ… Our second attempt at using contentEditable: const Editable = () =&gt; { const [content, setContent] = React.useState("") const onContentBlur = React.useCallback(evt =&gt; setContent(evt.currentTarget.innerHTML)) return ( &lt;div contentEditable onBlur={onContentBlur} dangerouslySetInnerHTML={{__html: content} /&gt; ) }</span></pre><p id="6bf1" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">é¡¾åæ€ä¹‰ï¼Œ<code class="fe lr ls lt lu b">dangerouslySetInnerHTML</code>å°±æ˜¯<em class="nb">å±é™©ã€‚</em>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæœªç»ç»„ç»‡çš„HTMLè¾“å…¥å¯èƒ½å­˜åœ¨å®‰å…¨é£é™©ï¼Œå¹¶ä½¿ç”¨æˆ·é¢ä¸´è·¨ç«™ç‚¹è„šæœ¬(XSS)æ”»å‡»ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨<code class="fe lr ls lt lu b">contentEditable</code>æ¥å®ç°ç”¨æˆ·ä¹‹é—´çš„åä½œã€‚å¦‚æœæˆ‘ä»¬ä¸å°å¿ƒï¼Œæ”»å‡»è€…å¯èƒ½ä¼šåœ¨å†…å®¹ä¸­åµŒå…¥JavaScriptï¼Œå½“ä½¿ç”¨<code class="fe lr ls lt lu b">dangerouslySetInnerHTML</code>æ—¶ï¼Œè¿™äº›å†…å®¹å°†åœ¨å—å®³è€…çš„æµè§ˆå™¨ä¸­æ‰§è¡Œã€‚</p><p id="7410" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">å› æ­¤ï¼Œå½“ä½¿ç”¨<code class="fe lr ls lt lu b">contentEditable</code>å’Œ<code class="fe lr ls lt lu b">dangerouslySetInnerHTML</code>æ—¶ï¼Œæ€»æ˜¯<em class="nb">å»ºè®®ä½¿ç”¨æŸç§å½¢å¼çš„è¾“å…¥å‡€åŒ–ã€‚è¿™ä¸ªåŒ…<code class="fe lr ls lt lu b"><a class="ae lq" href="https://www.npmjs.com/package/sanitize-html" rel="noopener ugc nofollow" target="_blank">sanitize-html</a></code>å¯ä»¥å¸®åŠ©æ‰§è¡Œä¸€ç»„ç™½åå•HTMLæ ‡ç­¾æ¥é˜»æ­¢XSSæ”»å‡»ã€‚</em></p><pre class="kj kk kl km gt ms lu mt bn mu mv bi"><span id="4db7" class="mw lw it lu b be mx my l mz na">âœ… Sanitized HTML with contentEditable: <br/><br/>import sanitizeHtml from "sanitize-html" <br/><br/>const Editable = () =&gt; { <br/>  const [content, setContent] = React.useState("") <br/>  const onContentBlur = React.useCallback(evt =&gt; { <br/>    const sanitizeConf = { <br/>      allowedTags: ["b", "i", "a", "p"], <br/>      allowedAttributes: { a: ["href"] } <br/>    }<br/>    setContent(sanitizeHtml(evt.currentTarget.innerHTML, sanitizeConf)) <br/>  }, [setContent]) <br/>  return ( <br/>    &lt;div contentEditable onBlur={onContentBlur} dangerouslySetInnerHTML={{__html: content}} /&gt; <br/>  ) <br/>}</span></pre><p id="08d5" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">è¯·æ³¨æ„ï¼Œè¦ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºä¸å—XSSæ”»å‡»ï¼Œä»…åœ¨ç¼–è¾‘æœŸé—´è¿›è¡ŒéªŒè¯æ˜¯ä¸å¤Ÿçš„ã€‚æ‚¨è¿˜éœ€è¦å‡€åŒ–å’ŒéªŒè¯æœåŠ¡å™¨ç«¯çš„å†…å®¹æˆ–ä»æœåŠ¡å™¨è¿”å›çš„å†…å®¹ï¼å¦‚æœä½ åªæ˜¯åœ¨ç”¨æˆ·ç¼–è¾‘å†…å®¹æ—¶è¿›è¡Œæ¸…ç†ï¼Œèªæ˜çš„æ”»å‡»è€…å¯ä»¥ç»•è¿‡å®‰å…¨æ£€æŸ¥ï¼Œç›´æ¥å‘æœåŠ¡å™¨å‘é€ä¸å®‰å…¨çš„æ•°æ®ã€‚</p><h1 id="dad6" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">å¦‚ä½•ä½¿ç”¨react-contenteditable</h1><p id="0dbb" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated">è™½ç„¶ä¸Šé¢çš„åŸºæœ¬æ–¹æ³•å…è®¸æ‚¨åœ¨Reactåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨<code class="fe lr ls lt lu b">contentEditable</code>ï¼Œä½†æ˜¯å½“æ‚¨å¼€å§‹åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°åŠŸèƒ½æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸€äº›è¾¹ç¼˜æƒ…å†µã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœåœ¨æ¨¡ç³Šäº‹ä»¶ä¹‹å‰å‘<code class="fe lr ls lt lu b">div</code>æ·»åŠ é¢å¤–çš„äº‹ä»¶å¤„ç†ç¨‹åºæ¥æ•è·è¾“å…¥ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°å…‰æ ‡è·³è·ƒå’Œå…¶ä»–ä¸è‰¯è¡Œä¸ºã€‚è¿™æ˜¯å› ä¸ºéœ€è¦ä¸€ç‚¹é¢å¤–çš„é€»è¾‘æ¥ç¡®å®š<em class="nb">ä½•æ—¶</em>å®é™…ä¿®æ”¹å†…å®¹çŠ¶æ€å¹¶è§¦å‘é‡æ–°å‘ˆç°ã€‚</p><p id="ae52" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">è™½ç„¶æˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶ä¸­æ·»åŠ ä¸€ä¸ªè§£å†³è¿™ä¸ªé—®é¢˜å’Œå…¶ä»–è¾¹ç¼˜æƒ…å†µçš„æ–¹æ³•ï¼Œè€Œä¸ä¼šç»™<em class="nb">å¸¦æ¥å¤ªå¤šéº»çƒ¦ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¦é‡æ–°å‘æ˜è½®å­å‘¢ï¼Ÿ<code class="fe lr ls lt lu b"><a class="ae lq" href="https://www.npmjs.com/package/react-contenteditable" rel="noopener ugc nofollow" target="_blank">react-contenteditable</a></code>åŒ…è§£å†³äº†æ‚¨åœ¨Reactåº”ç”¨ç¨‹åºä¸­å¯èƒ½é‡åˆ°çš„å¤§å¤šæ•°å¸¸è§é—®é¢˜ã€‚</em></p><p id="9146" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">ä½¿ç”¨è¿™ä¸ªåŒ…æ˜¯å¯¹æˆ‘ä»¬å‰é¢ä¾‹å­çš„ä¸€ä¸ªéå¸¸ç®€å•çš„æ”¹å˜:</p><pre class="kj kk kl km gt ms lu mt bn mu mv bi"><span id="5e28" class="mw lw it lu b be mx my l mz na">âœ… Sanitized HTML with the ContentEditable package: <br/><br/>import sanitizeHtml from "sanitize-html" <br/>import ContentEditable from 'react-contenteditable' <br/><br/>const Editable = () =&gt; { <br/>  const [content, setContent] = React.useState("") <br/>  const onContentChange = React.useCallback(evt =&gt; { <br/>    const sanitizeConf = { <br/>      allowedTags: ["b", "i", "a", "p"], <br/>      allowedAttributes: { a: ["href"] } <br/>    } <br/>    setContent(sanitizeHtml(evt.currentTarget.innerHTML, sanitizeConf)) <br/>  }, [setContent]) <br/><br/>  return ( <br/>    &lt;ContentEditable onChange={onContentChange} onBlur={onContentChange} html={content} /&gt; <br/>  ) <br/>}</span></pre><p id="2dae" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">é€šè¿‡ä½¿ç”¨<code class="fe lr ls lt lu b">sanitize-html</code>å’Œ<code class="fe lr ls lt lu b">react-contenteditable</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Reactåº”ç”¨ä¸­å¿«é€Ÿæ„å»ºä¸°å¯Œçš„äº¤äº’å¼å†…å®¹ç¼–è¾‘çš„åŸºç¡€ã€‚</p><h1 id="a5c7" class="lv lw it bd lx ly lz ma mb mc md me mf jz mg ka mh kc mi kd mj kf mk kg ml mm bi translated">æ€»ç»“</h1><p id="da7a" class="pw-post-body-paragraph ku kv it kw b kx mn ju kz la mo jx lc ld mp lf lg lh mq lj lk ll mr ln lo lp im bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ä¸€äº›å¦‚ä½•åœ¨Reactåº”ç”¨ä¸­æ·»åŠ ç”¨æˆ·å¯ç¼–è¾‘çš„å†…å®¹ã€‚ä¸»è¦è€ƒè™‘å› ç´ æ˜¯:</p><ul class=""><li id="9902" class="nc nd it kw b kx ky la lb ld ne lh nf ll ng lp nh ni nj nk bi translated"><code class="fe lr ls lt lu b">contentEditable</code>åœ¨Reactä¸­éœ€è¦ä¸€äº›ç‰¹æ®Šçš„å¤„ç†ã€‚</li><li id="cfc6" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp nh ni nj nk bi translated"><code class="fe lr ls lt lu b"><a class="ae lq" href="https://www.npmjs.com/package/react-contenteditable" rel="noopener ugc nofollow" target="_blank">react-contenteditable</a></code>åŒ…å¯ä»¥å¸®åŠ©å¤„ç†æ‚¨å¯èƒ½é‡åˆ°çš„è¾¹ç¼˜æƒ…å†µã€‚</li><li id="9e93" class="nc nd it kw b kx nl la nm ld nn lh no ll np lp nh ni nj nk bi translated">ç¼–è¾‘<em class="nb">å’Œ</em>æ—¶ï¼Œè®°å¾—åœ¨å‘ˆç°ä¸å¯ä¿¡çš„å†…å®¹ä¹‹å‰å‡€åŒ–HTMLã€‚<code class="fe lr ls lt lu b"><a class="ae lq" href="https://www.npmjs.com/package/sanitize-html" rel="noopener ugc nofollow" target="_blank">sanitize-html</a></code>åŒ…å¯ä»¥åœ¨è¿™æ–¹é¢æœ‰æ‰€å¸®åŠ©ã€‚</li></ul><p id="70ee" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated">ä½¿ç”¨è¿™ç§ç®€å•çš„æ–¹æ³•ï¼Œæ‚¨å¯ä»¥å¼€å§‹å‘ä»»ä½•Reactåº”ç”¨ç¨‹åºæ·»åŠ å¯ç¼–è¾‘çš„å†…å®¹ï¼</p></div><div class="ab cl nw nx hx ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="im in io ip iq"><p id="2c50" class="pw-post-body-paragraph ku kv it kw b kx ky ju kz la lb jx lc ld le lf lg lh li lj lk ll lm ln lo lp im bi translated"><em class="nb">åŸè½½äº2022å¹´12æœˆ22æ—¥https://blixtdev.com</em><a class="ae lq" href="https://blixtdev.com/how-to-use-contenteditable-with-react/" rel="noopener ugc nofollow" target="_blank"><em class="nb"/></a><em class="nb">ã€‚</em></p></div></div>    
</body>
</html>