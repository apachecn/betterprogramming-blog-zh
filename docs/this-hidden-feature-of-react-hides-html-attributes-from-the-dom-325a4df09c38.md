# React çš„è¿™ä¸ªéšè—ç‰¹æ€§å¯¹ DOM éšè—äº† HTML å±æ€§

> åŸæ–‡ï¼š<https://betterprogramming.pub/this-hidden-feature-of-react-hides-html-attributes-from-the-dom-325a4df09c38>

## å¦‚ä½•åœ¨ DOM ä¸­éšè— React JSX å…ƒç´ çš„å±æ€§ï¼Œæ¯”å¦‚å½“ä½ ä½¿ç”¨å¯é€‰é“å…·æˆ–æ¡ä»¶æ¸²æŸ“æ—¶ï¼Ÿå®ƒä¸åœ¨ React æ–‡æ¡£ä¸­ï¼Œä½†æ˜¯ä½ å¯ä»¥è¿™æ ·åš

![](img/cc34262f501046c3d95009496d8d8a85.png)

æ‰˜é©¬æ–¯Â·åšå°”æ›¼æ–¯åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

æˆ‘æœ€è¿‘å®ç°äº†ä¸€äº›ä»£ç ï¼Œä½¿ç”¨ä¸€ä¸ªå¯é€‰çš„`isNewWindow`å±æ€§æ¥å†³å®šä¸€ä¸ªé“¾æ¥æ˜¯å¦åº”è¯¥åœ¨ä¸€ä¸ªæ–°çª—å£ä¸­æ‰“å¼€ã€‚

ç›®å‰çš„è§£å†³æ–¹æ¡ˆæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æ¯æ¬¡æˆ‘è¯»ä»£ç çš„æ—¶å€™ï¼Œæˆ‘éƒ½è§‰å¾—ä¸€å®šæœ‰é—®é¢˜ã€‚è¿™æ˜¯ä¸å¿…è¦çš„å¤æ‚ã€‚

ç»™ä½ ï¼Œçœ‹ä¸€ä¸‹ã€‚è¿™ä¸ª TypeScript ä»£ç ç¤ºä¾‹å¯¹æ‚¨æœ‰æ„ä¹‰å—ï¼Ÿ

![](img/7adc7b6a855bf7c6adb0916b1ad4439a.png)

[åœ¨ CodeSandbox æŸ¥çœ‹åŸå§‹ä»£ç ](https://codesandbox.io/s/this-hidden-feature-of-react-hides-html-attributes-from-the-dom-oky3k?file=/src/MyCoolLink.tsx)

å¥½å§ï¼Œå…¶å®æˆ‘æœ‰å¾ˆå¤šè¯è¦è¯´ã€‚è°å†™çš„è¿™äº›åƒåœ¾ï¼Ÿ(*è®©æˆ‘æŸ¥ä¸€ä¸‹*`[*git blame*](https://medium.com/@drdmason/git-blame-all-the-way-back-62957f8407)`*â€”â€”å“å‘¦ï¼ŒåŸæ¥æ˜¯æˆ‘ï¼ï¼* [*è¯¥æ­»çš„*](https://www.urbandictionary.com/define.php?term=damn) *ã€‚*)

é¦–å…ˆï¼Œå½“æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°å£°æ˜ä¸­ç›´æ¥ææ„å±æ€§æ—¶ï¼Œä¸ºä»€ä¹ˆåœ¨å‡½æ•°ç»„ä»¶å‰æœ‰ä¸€ä¸ªå‘½åç±»å‹ï¼Ÿ

ç¬¬äºŒï¼Œæˆ‘æ¯”è¾ƒæ‡’ï¼Œç”¨`export default function ...`æ¯”ç”¨ [const](https://javascript.plainenglish.io/how-to-use-let-var-and-const-in-javascript-cdf42b48d70) å°‘ä¸€è¡Œä»£ç ã€‚è¿™æ˜¯ä¸ªäººå–œå¥½ï¼Œä½†æ˜¯å˜¿ã€‚

ç¬¬ä¸‰ï¼Œæˆ‘ä¸è®¤ä¸ºä½ çœŸçš„éœ€è¦æŒ‡å®š`target="self"`ï¼Œå› ä¸ºå®ƒæ˜¯é»˜è®¤å€¼ã€‚ä¸ºä»€ä¹ˆè¦è®©äº‹æƒ…å˜å¾—ä¸å¿…è¦çš„æ··ä¹±ï¼Ÿ

> â€`[**target**](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-target)`
> 
> åœ¨å“ªé‡Œæ˜¾ç¤ºé“¾æ¥çš„ URLï¼Œä½œä¸ºä¸€ä¸ª*æµè§ˆä¸Šä¸‹æ–‡*(ä¸€ä¸ªæ ‡ç­¾ã€çª—å£æˆ–`[<iframe>](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe)`)çš„åç§°ã€‚ä»¥ä¸‹å…³é”®å­—å¯¹äºåŠ è½½ URL çš„ä½ç½®å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰:
> 
> `_self`:å½“å‰æµè§ˆä¸Šä¸‹æ–‡ã€‚(é»˜è®¤)
> 
> é€šå¸¸æ˜¯ä¸€ä¸ªæ–°æ ‡ç­¾ï¼Œä½†æ˜¯ç”¨æˆ·å¯ä»¥é…ç½®æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªæ–°çª—å£ã€‚"â€” [MDN Docs for < a >:é”šå…ƒç´ ](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a)

ç¬¬å››ï¼Œæœ€åè¿˜æœ‰ä¸€ä¸ªä¸å¿…è¦çš„[é—®å·](https://javascript.plainenglish.io/what-does-the-question-mark-mean-in-javascript-code-353cfadcf760) `[?](https://javascript.plainenglish.io/what-does-the-question-mark-mean-in-javascript-code-353cfadcf760)` [ã€ä¸‰å…ƒè¿ç®—ç¬¦ã€‘](https://javascript.plainenglish.io/what-does-the-question-mark-mean-in-javascript-code-353cfadcf760)ï¼Œè¿™é‡Œ`<NewWindowIcon>`å¯ä»¥ç”¨`[&&](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND)`(é€»è¾‘ä¸)è¿›è¡Œ[æ¡ä»¶æ¸²æŸ“](https://reactjs.org/docs/conditional-rendering.html)è€Œä¸æ˜¯`? : [null](https://javascript.plainenglish.io/how-to-check-for-null-in-javascript-dffab64d8ed5)`æ¨¡å¼ã€‚

æˆ‘å¾ˆå¿«å¯¹ä»£ç è¿›è¡Œäº†é‡æ„ï¼Œä»¥è·å¾—æ›´å¥½çš„ç»“æœ:

![](img/c4f9e9f0cd2e03eb946422ed92384962.png)

[åœ¨ CodeSandbox ä¸ŠæŸ¥çœ‹åŸå§‹ä»£ç ](https://codesandbox.io/s/this-hidden-feature-of-react-hides-html-attributes-from-the-dom-oky3k?file=/src/MyCoolLinkRefactored.tsx:0-451)

ç„¶è€Œï¼Œä»ç„¶æœ‰ä¸€ä¸ªå·¨å¤§çš„ã€çªå‡ºçš„é—®é¢˜è®©æˆ‘æ¯æ¬¡çœ‹ä»£ç æ—¶éƒ½æ„Ÿåˆ°å›°æƒ‘:é‚£å°±æ˜¯`linkProps`éƒ¨åˆ†ã€‚

è¿™æ˜¯æˆ‘è§è¿‡çš„å¯è¯»æ€§æœ€å·®çš„ä»£ç ï¼Œæ¯æ¬¡æˆ‘è¯•å›¾è§£æå®ƒçš„æ—¶å€™ï¼Œæˆ‘éƒ½èƒ½å¬åˆ°å¤§è„‘é‡Œå‘å‡ºâ€œæ²‰é—·çš„å£°éŸ³â€ã€‚

æˆ‘æƒ³ä¿®å¤å®ƒï¼Œä½†æ˜¯æˆ‘æœ‰ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜â€”â€”å¦‚ä½•åœ¨ React ä¸­åˆ›å»ºä¸€ä¸ªéšè—åœ¨ [DOM](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model) ä¸­çš„â€œå¯é€‰å±æ€§â€?

# å¯é€‰å±æ€§å’Œæ¡ä»¶å‘ˆç°

å› ä¸ºæˆ‘ä¸è®°å¾—å¯é€‰å±æ€§æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ‰€ä»¥æˆ‘å¿«é€Ÿæµè§ˆäº†ä¸€ä¸‹ React æ–‡æ¡£ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰å‘ç°å¤ªå¤šã€‚

> â€œ`&&`é€»è¾‘ AND è¿ç®—ç¬¦ä¹‹æ‰€ä»¥æœ‰æ•ˆï¼Œæ˜¯å› ä¸ºåœ¨ JavaScript ä¸­ï¼Œ`true && expression`æ€»æ˜¯è®¡ç®—ä¸º`expression`ï¼Œè€Œ`false && expression`æ€»æ˜¯è®¡ç®—ä¸º`false`ã€‚
> 
> å› æ­¤ï¼Œå¦‚æœæ¡ä»¶ä¸º`true`ï¼Œç´§æ¥åœ¨`&&`ä¹‹åçš„å…ƒç´ å°†å‡ºç°åœ¨è¾“å‡ºä¸­ã€‚å¦‚æœæ˜¯`false`ï¼ŒReact ä¼šå¿½ç•¥å¹¶è·³è¿‡ã€‚[â€¦]
> 
> åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä¸€ä¸ªç»„ä»¶éšè—è‡ªå·±ï¼Œå³ä½¿å®ƒæ˜¯ç”±å¦ä¸€ä¸ªç»„ä»¶å‘ˆç°çš„ã€‚ä¸ºæ­¤ï¼Œè¿”å›`null`è€Œä¸æ˜¯å®ƒçš„æ¸²æŸ“è¾“å‡ºã€‚â€â€” [æ ¹æ®æ¡ä»¶æ¸²æŸ“å¯¹æ–‡æ¡£åšå‡ºååº”](https://reactjs.org/docs/conditional-rendering.html)

æˆ‘æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œä½ ä¹Ÿè®¸å¯ä»¥ä½¿ç”¨ falsy å€¼åœ¨ React ä¸­é€‰æ‹©æ€§åœ°æ¸²æŸ“é“å…·ï¼Œä½†æˆ‘éœ€è¦ç¡®è®¤ä¸€ä¸‹ã€‚

æˆ‘å–œæ¬¢ä½¿ç”¨ CodeSandbox ä¼Ÿå¤§çš„ [React.new](https://React.new) æœåŠ¡å¯¹ React è¿›è¡Œè¿™ç§å¿«é€Ÿæµ‹è¯•ã€‚

å¦‚æœä½ ä»æœªå°è¯•è¿‡ï¼Œé‚£å°±ç‚¹å‡»é“¾æ¥å§ï¼Œå®ƒä¸ä¼šå’¬äººçš„ã€‚æ‚¨å°†ç›´æ¥è¿›å…¥ React çš„æ–°ä»£ç æ²™ç®±ã€‚

ä¹Ÿè®¸æœ‰ä¸€å¤©æˆ‘ä»¬ä¼šå°† React å†…ç½®åˆ°æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼Œä½†æ˜¯å¦‚æœä½ æ›¾ç»æƒ³æµ‹è¯• React çš„ä¸€ä¸ªå¿«é€ŸåŠŸèƒ½ï¼ŒReact.new æ˜¯å¾ˆéš¾è¢«å‡»è´¥çš„ã€‚

æˆ‘æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨ [falsy å€¼](https://medium.com/coding-at-dawn/what-are-falsy-values-in-javascript-ca0faa34feb4)æ¥ä½¿é“å…·å¯é€‰ï¼Œç±»ä¼¼äº`null`åœ¨ React ä¸­å¯¹ DOM ä¸æ¸²æŸ“ã€‚

React æ–‡æ¡£ä¸­æ²¡æœ‰è®°å½•è¿™ç§è¡Œä¸ºï¼Œå®ƒä¹Ÿä¸åƒæˆ‘é¢„æœŸçš„é‚£æ ·å·¥ä½œã€‚è¿™æ˜¯æˆ‘å‘ç°çš„ã€‚

# React ä¸­çš„å‡å€¼å’Œæ¡ä»¶æ¸²æŸ“

æ­£å¦‚æ‚¨å¯èƒ½ä¼šæ€€ç–‘çš„é‚£æ ·ï¼Œåœ¨ React JSX ä¸­å°† falsy å€¼ä½œä¸º HTML å…ƒç´ çš„å±æ€§å€¼ä¼ é€’ç»™[ä¼šåœ¨ DOM ä¸­éšè—è¯¥å±æ€§ã€‚](https://medium.com/coding-at-dawn/what-are-falsy-values-in-javascript-ca0faa34feb4)

å±æ€§çš„è¡Œä¸ºç±»ä¼¼äºæ¡ä»¶å‘ˆç°â€”â€”è¯•å›¾å°†ä¸€ä¸ª falsy å€¼â€œç›´æ¥â€ä¼ é€’ç»™ DOMã€‚

å½“æ‚¨ä» React ç»„ä»¶è¿”å›`[null](https://levelup.gitconnected.com/how-to-check-for-an-object-in-javascript-object-null-check-3b2632330296)`ã€`[undefined](https://medium.com/coding-at-dawn/how-to-check-for-undefined-in-javascript-bcedd62c8ad)`ã€`[false](/making-sense-of-vs-in-javascript-f9dbbc6352e3)`æˆ–ç©ºçš„[å­—ç¬¦ä¸²](https://javascript.plainenglish.io/how-to-check-for-a-string-in-javascript-a16b196915ff)ã€`""`æ—¶ï¼Œæ‚¨åœ¨ DOM ä¸­å¾—ä¸åˆ°ä»»ä½•å‘ˆç°ã€‚

ç„¶è€Œï¼Œfalsy å€¼`0`ã€[è´Ÿé›¶(](https://medium.com/coding-at-dawn/is-negative-zero-0-a-number-in-javascript-c62739f80114) `[-0](https://medium.com/coding-at-dawn/is-negative-zero-0-a-number-in-javascript-c62739f80114)` [)](https://medium.com/coding-at-dawn/is-negative-zero-0-a-number-in-javascript-c62739f80114) å’Œ`[NaN](https://medium.com/coding-in-simple-english/how-to-check-for-nan-in-javascript-4294e555b447)`å°†åœ¨ DOM ä¸­æ˜¾ç¤ºä¸ºæ–‡æœ¬ï¼Œå³ä½¿å®ƒä»¬æ˜¯ falsyã€‚è¿™æ˜¯ä¸€ç§ååº”ã€‚â„¢ ğŸ˜‚

è¿™ç§è¡Œä¸ºå®é™…ä¸Šå¯¼è‡´äº†ä¸€ä¸ªå¸¸è§çš„é”™è¯¯ï¼ŒKent C. Dodds å·²ç»åœ¨ä»–çš„åšå®¢ä¸Šè®¨è®ºè¿‡äº†(å°½ç®¡æˆ‘æ›´å–œæ¬¢ä»–çš„æŠ€å·§):

[](https://kentcdodds.com/blog/use-ternaries-rather-than-and-and-in-jsx) [## åœ¨ JSX ä½¿ç”¨ ternaries è€Œä¸æ˜¯&ã€‚

### è¿™ä¸ªä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿä¸ç¡®å®šï¼Ÿæˆ‘å†é—®ä½ ä¸€ä¸ªé—®é¢˜ã€‚å¦‚æœâ€¦ä¸Šé¢çš„ä»£ç ä¼šæ€ä¹ˆæ ·

kentcdodds.com](https://kentcdodds.com/blog/use-ternaries-rather-than-and-and-in-jsx) 

ç®€è€Œè¨€ä¹‹ï¼ŒReact è¡¨è¾¾å¼`{count} {count && " messages"}`å°†è¿”å›æ–‡æœ¬â€œ0â€è€Œä¸æ˜¯æ–‡æœ¬â€œ0 messagesâ€æˆ–è€…ä»€ä¹ˆéƒ½ä¸è¿”å›ã€‚

æˆ‘ä»¬å¾ˆå¿«å°±ä¼šçœ‹åˆ°ï¼Œå¯é€‰å±æ€§çš„è¡Œä¸ºæ˜¯ç›¸ä¼¼çš„ï¼Œå°½ç®¡æ— è®ºå±æ€§æ˜¯å¦éœ€è¦å€¼ï¼Œè¡Œä¸ºéƒ½ä¼šç•¥æœ‰ä¸åŒã€‚

# åœ¨ HTML ä¸­ï¼Œå¸ƒå°”å±æ€§ä¸éœ€è¦å€¼

æ‚¨å¯èƒ½è¿˜è®°å¾—ï¼Œ[HTML å…ƒç´ çš„æŸäº›å±æ€§æ˜¯å¸ƒå°”å‹çš„](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes#boolean_attributes)ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥å¸¦å€¼ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸å¸¦å€¼ä½¿ç”¨ã€‚

ä¾‹å¦‚ï¼Œ`<a>`é”šæ ‡ç­¾å…ƒç´ å¯ä»¥é‡‡ç”¨å¸ƒå°”å±æ€§`download`ï¼Œè€Œå¸¦æœ‰`type="checkbox"`çš„`<input>`å¯ä»¥é‡‡ç”¨`checked`çš„å¸ƒå°”å±æ€§ã€‚è¿™äº›å¸ƒå°”å±æ€§ä¸éœ€è¦å€¼ã€‚

> â€`[**download**](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#attr-download)`
> 
> æç¤ºç”¨æˆ·ä¿å­˜é“¾æ¥çš„ URLï¼Œè€Œä¸æ˜¯å¯¼èˆªåˆ°å®ƒã€‚å¯ä»¥å¸¦å€¼ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸å¸¦å€¼ä½¿ç”¨:
> 
> å¦‚æœæ²¡æœ‰å€¼ï¼Œæµè§ˆå™¨å°†å»ºè®®ä»å„ç§æ¥æºç”Ÿæˆçš„æ–‡ä»¶å/æ‰©å±•å[â€¦]
> 
> å®šä¹‰ä¸€ä¸ªå€¼å»ºè®®å°†å…¶ä½œä¸ºæ–‡ä»¶åã€‚
> â€” [MDN Docs for < a >:é”šå…ƒç´ ](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a)

æ‚¨å¯ä»¥å‘ DOM ä¼ é€’ä¸å¸¦å€¼çš„å¸ƒå°”å±æ€§ï¼Œæµè§ˆå™¨ä¼šå°†å®ƒä»¬è§£é‡Šä¸º true æˆ– enabledã€‚

å¯¹äº`<a>`è¦è®°ä½çš„æ˜¯`download`çš„è¡Œä¸ºä¸`href`ä¸åŒï¼Œå› ä¸º`href`éœ€è¦ä¸€ä¸ªå€¼ï¼Œè€Œ`download`ä¸éœ€è¦ã€‚

# å¦‚ä½•åœ¨ React ä¸­éšè— DOM ä¸­çš„å±æ€§

è¦åœ¨ React çš„ DOM ä¸­éšè— HTML å…ƒç´ çš„å±æ€§ï¼Œéœ€è¦ä¼ é€’ falseã€undefinedã€null ä½œä¸ºè¯¥å±æ€§çš„å€¼ã€‚

ä¸éœ€è¦å€¼çš„å±æ€§(å¦‚`<a>`ä¸Šçš„`href`)ç›¸æ¯”ï¼Œå¸ƒå°”å±æ€§(å¦‚`<a>`ä¸Šçš„`download`)çš„è¡Œä¸ºä¼šå‘ç”Ÿå˜åŒ–ã€‚

å¦‚æœä½ æŒ‡å®šäº†ä¸€ä¸ªå¸ƒå°”å±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰ç»™å®ƒä¸€ä¸ªå€¼ï¼Œå®ƒå°†ä¼šä¸å¸¦ä»»ä½•å€¼çš„å‡ºç°åœ¨ DOM ä¸­ã€‚å¸¸è§„å±æ€§ä¸ä¼šå‡ºç°åœ¨ DOM ä¸­ã€‚

æ ¹æ®æˆ‘çš„æµ‹è¯•ï¼Œä»¥ä¸‹æ˜¯ falsy å€¼çš„å®Œæ•´åˆ—è¡¨ï¼Œä»¥åŠå®ƒä»¬åœ¨ React ä¸­ç”¨ä½œå±æ€§å€¼æ—¶çš„è¡Œä¸º:

*   *æ— å‚æ•°* = >éå¸ƒå°”å±æ€§(éœ€è¦å€¼çš„å±æ€§)æ ¹æœ¬ä¸ä¼šå‡ºç°åœ¨ DOM ä¸­ã€‚ä¸€ä¸ªå¸ƒå°”å±æ€§(ä¸éœ€è¦å€¼çš„å±æ€§)å°†å‡ºç°åœ¨æ²¡æœ‰å€¼çš„ DOM ä¸­ã€‚
*   `{true}` = >ä¸æ— å‚æ•°ç›¸åŒï¼Œé™¤äº†éå¸ƒå°”å±æ€§ä¼šåœ¨æ§åˆ¶å°ä¸­ç”Ÿæˆè­¦å‘Šæ¶ˆæ¯ã€‚
*   `""` *(ç©ºå­—ç¬¦ä¸²)* = >å±æ€§å‡ºç°åœ¨ DOM ä¸­æ²¡æœ‰å€¼ï¼Œä¸ç®¡å®ƒæ˜¯å¦éœ€è¦å€¼ã€‚
*   å±æ€§æ ¹æœ¬æ²¡æœ‰å‡ºç°åœ¨ DOM ä¸­ã€‚
*   å±æ€§æ ¹æœ¬æ²¡æœ‰å‡ºç°åœ¨ DOM ä¸­ã€‚
*   å±æ€§æ ¹æœ¬æ²¡æœ‰å‡ºç°åœ¨ DOM ä¸­ã€‚
*   `{0}` *(é›¶)* = >æ— è®ºæ˜¯å¦éœ€è¦å€¼ï¼Œè¯¥å±æ€§éƒ½ä»¥å€¼â€œ0â€å‡ºç°ã€‚
*   `{NaN}` *(éæ•°å­—)* = >æ— è®ºæ˜¯å¦éœ€è¦å€¼ï¼Œè¯¥å±æ€§éƒ½ä»¥å€¼â€œNaNâ€å‡ºç°ã€‚ç”Ÿæˆæ§åˆ¶å°è­¦å‘Šã€‚

ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•å¯é€‰åœ°å‘ˆç°æŸäº›å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è¿”å›å¹¶ä»ä»£ç ç¤ºä¾‹ä¸­é‡æ„æ‰`linkProps`ã€‚

# å¦‚ä½•åœ¨ React çš„æ–°çª—å£ä¸­æ‰“å¼€é“¾æ¥

ä¸ºäº†åœ¨æ–°çª—å£ä¸­æ‰“å¼€ä¸€ä¸ªé“¾æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`isNewWindow`å±æ€§æœ‰æ¡ä»¶åœ°è®¾ç½®`target`å’Œ`rel`å±æ€§çš„å€¼ã€‚

å¯¹äºåº”è¯¥åœ¨å½“å‰æµè§ˆå™¨é€‰é¡¹å¡ä¸­æ‰“å¼€çš„æ™®é€šé“¾æ¥ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸æƒ³å°†`target`æˆ–`rel`å‘ˆç°åˆ° DOM ä¸­ã€‚ä¸‹é¢æ˜¯æ€ä¹ˆåšçš„ã€‚

![](img/02f636221c56e998e7f9691c8cafe8f6.png)

[åœ¨ CodeSandbox ä¸ŠæŸ¥çœ‹åŸå§‹ä»£ç ](https://codesandbox.io/s/this-hidden-feature-of-react-hides-html-attributes-from-the-dom-oky3k?file=/src/MyCoolLinkFixed.tsx:0-402)

å½“æˆ‘ä»¬å°†`undefined`ä¼ é€’ç»™`target`æˆ–`ref`æ—¶ï¼ŒReact ç®€å•åœ°ä» DOM ä¸­å®Œå…¨åˆ é™¤è¿™äº›å±æ€§ã€‚è¿™å°±æ˜¯æˆ‘ä»¬éšè—å±æ€§çš„æ–¹å¼ã€‚

ä»æŠ€æœ¯ä¸Šè®²ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`&&`(é€»è¾‘ AND)æ¥ä»£æ›¿`?`ï¼Œä½†æ˜¯è¿™ç»™äº†æˆ‘ä¸€ä¸ª ESLint è­¦å‘Šï¼Œæç¤º`false`å¯¹äºè¿™äº›å±æ€§æ— æ•ˆã€‚

# ç»“è®º:éšè— DOM ä¸­çš„å¯é€‰é“å…·

åœ¨æœ€åˆçš„ä»£ç ç¤ºä¾‹ä¸­`linkProps`è®©æˆ‘æ„Ÿåˆ°å›°æ‰°çš„æ˜¯ï¼Œæˆ‘ä¸çŸ¥é“é“å…·å°†ä¼šè¢«æ”¹å˜ã€‚

å¦‚æœæˆ‘æŸ¥çœ‹ä»£ç çš„å¼€å¤´ï¼Œæˆ‘å¯ä»¥è§£æå‡ºä¼šæœ‰ä¸€äº›æ™®é€šçš„é“å…·ï¼Œæ¯”å¦‚`href`å’Œ`text`ã€‚

ç„¶åï¼Œå¦‚æœæˆ‘çœ‹ä¸€ä¸‹ä»£ç çš„ç»“å°¾ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°`target="_blank"`æ ¹æ®`isNewWindow`å±æ€§è¢«å¯é€‰åœ°è®¾ç½®ã€‚

ç„¶è€Œï¼Œæ¯æ¬¡æˆ‘çœ‹ä»£ç çš„æ—¶å€™ï¼Œæˆ‘éƒ½è®¤ä¸º`rel`å±æ€§å·²ç»è¢«é—å¿˜äº†ï¼Œé™¤éæˆ‘å›å¤´çœ‹çœ‹ä¸­é—´ã€‚

æ—¢ç„¶ä½ åº”è¯¥åŒ…æ‹¬`rel="noopener noreferrer"`ï¼Œè‡³å°‘å¯¹äºè€ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œæˆ‘ä¸€ç›´åœ¨æƒ³æˆ‘éœ€è¦æ·»åŠ å®ƒã€‚ä»£ç å¤ªå¤æ‚äº†ã€‚

> â€œå½“æ‚¨ä½¿ç”¨`target="_blank"`å±æ€§é“¾æ¥åˆ°å¦ä¸€ä¸ªç½‘ç«™ä¸Šçš„é¡µé¢æ—¶ï¼Œæ‚¨çš„ç½‘ç«™å¯èƒ½ä¼šé¢ä¸´æ€§èƒ½å’Œå®‰å…¨é—®é¢˜:
> 
> å¦ä¸€ä¸ªé¡µé¢å¯èƒ½ä¸æ‚¨çš„é¡µé¢åœ¨åŒä¸€è¿›ç¨‹ä¸Šè¿è¡Œã€‚å¦‚æœå¦ä¸€ä¸ªé¡µé¢è¿è¡Œå¤§é‡ JavaScriptï¼Œæ‚¨çš„é¡µé¢çš„æ€§èƒ½å¯èƒ½ä¼šå—åˆ°å½±å“ã€‚
> 
> å¦ä¸€ä¸ªé¡µé¢å¯ä»¥ä½¿ç”¨`window.opener`å±æ€§è®¿é—®æ‚¨çš„`window`å¯¹è±¡ã€‚è¿™å¯èƒ½å…è®¸å…¶ä»–é¡µé¢å°†æ‚¨çš„é¡µé¢é‡å®šå‘åˆ°æ¶æ„ URLã€‚
> 
> å°†`rel="noopener"`æˆ–`rel="noreferrer"`æ·»åŠ åˆ°`target="_blank"`é“¾æ¥ä¸­å¯ä»¥é¿å…è¿™äº›é—®é¢˜ã€‚
> 
> ä» Chromium ç‰ˆå¼€å§‹ï¼Œå¸¦æœ‰`target="_blank"`çš„é”šç‚¹é»˜è®¤è‡ªåŠ¨è·å¾—`[noopener](https://www.chromestatus.com/feature/6140064063029248)` [è¡Œä¸º](https://www.chromestatus.com/feature/6140064063029248)ã€‚`rel="noopener"`çš„æ˜ç¡®è§„èŒƒæœ‰åŠ©äºä¿æŠ¤ä¼ ç»Ÿæµè§ˆå™¨çš„ç”¨æˆ·ï¼ŒåŒ…æ‹¬ Edge Legacy å’Œ Internet Explorerã€‚â€œâ€”[web . dev](https://web.dev/external-anchors-use-rel-noopener/)çš„â€œè·¨èµ·ç‚¹ç›®çš„åœ°çš„é“¾æ¥ä¸å®‰å…¨â€

æˆ‘åšä¿¡ï¼Œåœ¨ React ä¸­å¤„ç†ä¼ é€’ç»™å­ç»„ä»¶çš„é“å…·çš„æœ€ä½³ä½ç½®æ˜¯åœ¨ return è¯­å¥ä¸­ï¼Œè€Œä¸æ˜¯åœ¨å…¶ä»–åœ°æ–¹ã€‚

è™½ç„¶å¾ˆâ€œå¯çˆ±â€ä½†ä½ å¯ä»¥ç”¨`[...](https://medium.com/coding-at-dawn/how-to-use-the-spread-operator-in-javascript-b9e4a8b06fab)`[å±•å¼€ç¬¦](https://medium.com/coding-at-dawn/how-to-use-the-spread-operator-in-javascript-b9e4a8b06fab)æ¥è°ƒæ•´ä¸€äº›`linkProps` [å¯¹è±¡](https://levelup.gitconnected.com/how-to-check-for-an-object-in-javascript-object-null-check-3b2632330296?gi=f235dad84669)åˆ°æ—¶å€™[ææ„](https://javascript.plainenglish.io/destructure-react-props-with-es6-object-destructuring-for-cleaner-code-3984453e484d)ï¼Œå¾ˆéš¾è¯»æ‡‚ã€‚

å› ä¸ºæˆ‘ä»¬å¯ä»¥åƒæœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶ä¸€æ ·æœ‰æ¡ä»¶åœ°æ¸²æŸ“ React é“å…·ï¼Œæ‰€ä»¥è¿™æ˜¯æˆ‘ä»¬åº”è¯¥ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚

ç¼–ç å¿«ä¹ï¼ï¼

å¾·é‡Œå…‹Â·å¥¥æ–¯æ±€åšå£«æ˜¯ã€ŠèŒä¸šè§„åˆ’:å¦‚ä½•åœ¨ 6 ä¸ªæœˆå†…æˆä¸ºæˆåŠŸçš„ 6 ä½æ•°ç¨‹åºå‘˜ã€‹ä¸€ä¹¦çš„ä½œè€…ï¼Œè¯¥ä¹¦ç°å·²åœ¨äºšé©¬é€Šä¸Šå‡ºå”®ã€‚