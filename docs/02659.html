<html>
<head>
<title>Prevent Object Properties From Being Modified With JavaScriptâ€™s Freeze Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">é˜²æ­¢å¯¹è±¡å±æ€§è¢«JavaScriptçš„å†»ç»“åŠŸèƒ½ä¿®æ”¹</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://betterprogramming.pub/prevent-object-properties-from-being-modified-with-javascripts-freeze-function-dd13e5bdc920?source=collection_archive---------14-----------------------#2019-12-15">https://betterprogramming.pub/prevent-object-properties-from-being-modified-with-javascripts-freeze-function-dd13e5bdc920?source=collection_archive---------14-----------------------#2019-12-15</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="7514" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">äº†è§£å¦‚ä½•åˆ›å»ºä¸èƒ½æ›´æ”¹çš„å¯¹è±¡</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/e056e3a1fe06c30f63a1c73b334f11a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pfii7XY2lutQVvHnGE1Icg.jpeg"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">äºšå†å±±å¤§Â·å¸­é»˜å…‹åœ¨<a class="ae ky" href="https://unsplash.com/s/photos/secure?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</p></figure><h1 id="2937" class="kz la it bd lb lc ld le lf lg lh li lj jz lk ka ll kc lm kd ln kf lo kg lp lq bi translated">Object.freeze()</h1><p id="8862" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">è¿™å°†é˜²æ­¢å¯¹è±¡è¢«ä¿®æ”¹ã€‚ä¸€æ—¦æˆ‘ä»¬å†»ç»“äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å°±ä¸èƒ½:</p><ul class=""><li id="1254" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm mu mv mw mx bi translated">åˆ é™¤å±æ€§</li><li id="ce6f" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">æ·»åŠ æ–°çš„å±æ€§</li><li id="4ba5" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">æ›´æ”¹å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§æˆ–å¯å†™æ€§</li><li id="a721" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">æ›´æ”¹ç°æœ‰å±æ€§çš„å€¼</li></ul><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="1b87" class="ni la it ne b gy nj nk l nl nm">var user = {<br/>    name : "John",<br/>    age  : 20<br/>}</span><span id="b5bd" class="ni la it ne b gy nn nk l nl nm">var frozenUser = Object.freeze(user);</span><span id="a3b8" class="ni la it ne b gy nn nk l nl nm">frozenUser === user ; // true</span></pre><p id="10ca" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">å½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡çš„<code class="fe nr ns nt ne b">delete</code>å±æ€§æ—¶ï¼Œå®ƒè¿”å›<code class="fe nr ns nt ne b">false</code>ï¼Œå¯¹è±¡å±æ€§ä¸ä¼šè¢«ç§»é™¤ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="fbc5" class="ni la it ne b gy nj nk l nl nm">delete frozenUser.name; // false</span><span id="3ea4" class="ni la it ne b gy nn nk l nl nm">log(frozenUser); // {name: "John", age: 20}</span></pre><p id="1aa5" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">å½“æˆ‘ä»¬è¯•å›¾æ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§æ—¶ï¼Œå®ƒä¸ä¼šå°†è¯¥å±æ€§æ·»åŠ åˆ°å¯¹è±¡ä¸­ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="2a4a" class="ni la it ne b gy nj nk l nl nm">frozenUser.profession = "doctor ğŸ‘¨â€âš•ï¸ ";</span><span id="37ee" class="ni la it ne b gy nn nk l nl nm">log(frozenUser); // {name: "John", age: 20}</span></pre><p id="f272" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">æˆ‘ä»¬ä¸èƒ½æ”¹å˜ç°æœ‰è´¢äº§çš„ä»·å€¼ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="2a9a" class="ni la it ne b gy nj nk l nl nm">frozenUser.age = 22; // it will not change the value</span><span id="37b5" class="ni la it ne b gy nn nk l nl nm">log(frozenUser); // {name: "John", age: 20}</span></pre><p id="077d" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">æˆ–è€…æ›´æ”¹å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§æˆ–å¯å†™æ€§ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="2ad9" class="ni la it ne b gy nj nk l nl nm">Object.defineProperty(frozenUser, 'name', {enumerable : false});<br/>//throws an error cannot redefine property</span></pre><p id="fa87" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">ä»¥ä¸Šæ‰€æœ‰æ–¹æ³•éƒ½ä¼šåœ¨<code class="fe nr ns nt ne b">strict mode</code>ä¸­æŠ›å‡ºä¸€ä¸ª<code class="fe nr ns nt ne b">TypeError</code>å¼‚å¸¸ã€‚</p><p id="84fa" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">æˆ‘ä»¬ä¹Ÿå¯ä»¥å†»ç»“ä¸€ä¸ª<code class="fe nr ns nt ne b">array</code>ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="f2e4" class="ni la it ne b gy nj nk l nl nm">var array = [1,2,3,4,5]</span><span id="0355" class="ni la it ne b gy nn nk l nl nm">var frozenArray = Object.freeze(array);</span><span id="97d3" class="ni la it ne b gy nn nk l nl nm">frozenArray[0] = 10;</span><span id="bd9d" class="ni la it ne b gy nn nk l nl nm">log(frozenArray); // [1,2,3,4,5]</span></pre><p id="7f4c" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">å½“æˆ‘ä»¬è¯•å›¾æ·»åŠ æˆ–åˆ é™¤ä¸€ä¸ªå€¼æ—¶ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ª<code class="fe nr ns nt ne b">TypeError</code>ã€‚</p><p id="8d17" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">object <code class="fe nr ns nt ne b">freeze</code>æ–¹æ³•åªåšä¸€ä¸ªæµ…å±‚å†»ç»“ï¼Œè¿™æ„å‘³ç€å¦‚æœå±æ€§å€¼æ˜¯å¯¹è±¡æœ¬èº«ï¼Œé‚£ä¹ˆè¿™äº›å¯¹è±¡ä¸ä¼šè¢«å†»ç»“ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="4841" class="ni la it ne b gy nj nk l nl nm">var user = {<br/>   name : "John",<br/>   address : {<br/>      doorNo : 20<br/>   } <br/>}</span><span id="0982" class="ni la it ne b gy nn nk l nl nm">Object.freeze(user);</span></pre><p id="4ad1" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">ä¸Šè¿°ä»£ç å°†é˜²æ­¢æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹å±æ€§ã€‚ä½†æ˜¯å¦‚æœ<code class="fe nr ns nt ne b">property address</code>çš„å€¼æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<code class="fe nr ns nt ne b">Object.freeze</code>æ–¹æ³•å°±ä¸ä¼šå†»ç»“<code class="fe nr ns nt ne b">address</code>å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥æ”¹å˜åœ°å€å¯¹è±¡ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="87f0" class="ni la it ne b gy nj nk l nl nm">user.address.doorNo = 100;</span><span id="5635" class="ni la it ne b gy nn nk l nl nm">log(user.address); // {doorNo: 100}</span><span id="6a1b" class="ni la it ne b gy nn nk l nl nm">user.address.street = "First Street";</span><span id="e434" class="ni la it ne b gy nn nk l nl nm">log(user.address); // {doorNo: 100, street: "First Street"}</span></pre></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><h1 id="f0b3" class="kz la it bd lb lc ob le lf lg oc li lj jz od ka ll kc oe kd ln kf of kg lp lq bi translated">æ¥è‡ªMDNçš„æ·±åº¦å†»ç»“</h1><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="og oh l"/></div></figure><p id="8107" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">è¦æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¢«å†»ç»“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe nr ns nt ne b">Object.isFrozen</code>ã€‚åªæœ‰å½“ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç«‹å³å±æ€§ä¸æ˜¯<code class="fe nr ns nt ne b">Extensible</code>ã€ä¸æ˜¯<code class="fe nr ns nt ne b">Writable</code>å’Œä¸æ˜¯<code class="fe nr ns nt ne b">Configurable</code>æ—¶ï¼Œè¯¥æ–¹æ³•æ‰è¿”å›<code class="fe nr ns nt ne b">true</code>ã€‚</p><p id="3573" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">ç¤ºä¾‹1:</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="3ad4" class="ni la it ne b gy nj nk l nl nm">var user = {<br/>   name : "John"<br/>}</span><span id="aadb" class="ni la it ne b gy nn nk l nl nm">Object.freeze(user);</span><span id="4a19" class="ni la it ne b gy nn nk l nl nm">Object.isFrozen(user); // true</span></pre><p id="5d46" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">ç¤ºä¾‹2:</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="8af7" class="ni la it ne b gy nj nk l nl nm">var obj = {<br/>  name : "John"<br/>}</span><span id="f8ca" class="ni la it ne b gy nn nk l nl nm">Object.isFrozen(obj); // false</span><span id="3e94" class="ni la it ne b gy nn nk l nl nm">Object.defineProperty(obj, 'name', {<br/>   <!-- -->writable: false,<br/>   <!-- -->configurable: false<br/>});</span><span id="1965" class="ni la it ne b gy nn nk l nl nm">Object.isFrozen(obj); // false because the name is still extensible</span><span id="d91c" class="ni la it ne b gy nn nk l nl nm">Object.preventExtensions(obj);</span><span id="014e" class="ni la it ne b gy nn nk l nl nm">Object.isFrozen(obj); //true</span></pre></div><div class="ab cl nu nv hx nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="im in io ip iq"><h1 id="39f7" class="kz la it bd lb lc ob le lf lg oc li lj jz od ka ll kc oe kd ln kf of kg lp lq bi translated">å¯¹è±¡ã€‚æµ·è±¹</h1><p id="fe38" class="pw-post-body-paragraph lr ls it lt b lu lv ju lw lx ly jx lz ma mb mc md me mf mg mh mi mj mk ml mm im bi translated">å¦‚æœæˆ‘ä»¬éœ€è¦æ”¹å˜ç°æœ‰å±æ€§çš„å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨<code class="fe nr ns nt ne b">Object.seal</code>æ–¹æ³•ã€‚</p><p id="021f" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated"><code class="fe nr ns nt ne b">Object.seal</code>æ–¹æ³•é˜»æ­¢ä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°å±æ€§ï¼Œå°†æ‰€æœ‰ç°æœ‰å±æ€§æ ‡è®°ä¸ºä¸å¯é…ç½®(ä¸å¯åˆ é™¤)ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="7cc6" class="ni la it ne b gy nj nk l nl nm">var user = {<br/>   name : "John"<br/>}</span><span id="7ef3" class="ni la it ne b gy nn nk l nl nm">user.age  = "20";</span><span id="9257" class="ni la it ne b gy nn nk l nl nm">user; // {name: "John", age: "20"}</span></pre><p id="c8af" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">å¯†å°åï¼Œ</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="f68c" class="ni la it ne b gy nj nk l nl nm">var sealedUser = Object.seal(user);</span><span id="0ae8" class="ni la it ne b gy nn nk l nl nm">user === sealedUser // true</span></pre><p id="9ac9" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">æˆ‘ä»¬å¯ä»¥æ”¹å˜ç°æœ‰è´¢äº§çš„ä»·å€¼ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="b85a" class="ni la it ne b gy nj nk l nl nm">sealedUser.name = "JOHN";</span><span id="10f0" class="ni la it ne b gy nn nk l nl nm">log(sealedUser); // {name: "JOHN", age: "20"}</span></pre><p id="2246" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½æ·»åŠ æ–°çš„å±æ€§ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="e715" class="ni la it ne b gy nj nk l nl nm">sealedUser.profession = "programmmer";</span><span id="200b" class="ni la it ne b gy nn nk l nl nm">log(sealedUser); // {name: "JOHN", age: "20"}</span></pre><p id="bddb" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">æ­¤å¤–ï¼Œæˆ‘ä»¬ä¸èƒ½åˆ é™¤å±æ€§ã€‚</p><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="56c9" class="ni la it ne b gy nj nk l nl nm">delete sealedUser.age;</span><span id="c7bb" class="ni la it ne b gy nn nk l nl nm">log(sealedUser); // {name: "JOHN", age: "20"}</span></pre><p id="2330" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">è¦æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¢«å¯†å°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code class="fe nr ns nt ne b">isSealed</code>ã€‚ä¸€ä¸ªç‰©ä½“è¢«è®¤ä¸ºæ˜¯å¯†å°çš„ï¼Œå¦‚æœ</p><ul class=""><li id="4502" class="mn mo it lt b lu mp lx mq ma mr me ms mi mt mm mu mv mw mx bi translated">å®ƒæ˜¯ä¸å¯æ‰©å±•çš„(ä¸èƒ½æ·»åŠ æ–°å±æ€§)</li><li id="637d" class="mn mo it lt b lu my lx mz ma na me nb mi nc mm mu mv mw mx bi translated">å¦‚æœå…¶æ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸å¯é…ç½®çš„(ä¸å¯ç§»é™¤çš„)</li></ul><pre class="kj kk kl km gt nd ne nf ng aw nh bi"><span id="063b" class="ni la it ne b gy nj nk l nl nm">var user = {<br/>   name : "John"<br/>}</span><span id="3aea" class="ni la it ne b gy nn nk l nl nm">Object.isSealed(user); // false</span><span id="b60c" class="ni la it ne b gy nn nk l nl nm">Object.seal(user);</span><span id="d6a0" class="ni la it ne b gy nn nk l nl nm">Object.isSealed(user); // true</span></pre><p id="55ee" class="pw-post-body-paragraph lr ls it lt b lu mp ju lw lx mq jx lz ma no mc md me np mg mh mi nq mk ml mm im bi translated">å‚è€ƒ:<a class="ae ky" href="https://developer.mozilla.org/en-US/" rel="noopener ugc nofollow" target="_blank"> MDNç½‘ç»œæ–‡æ¡£</a></p></div></div>    
</body>
</html>