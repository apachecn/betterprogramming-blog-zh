<html>
<head>
<title>Implement User Authentication With Next.js and Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨Next.jså’ŒFirebaseå®ç°ç”¨æˆ·è®¤è¯</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://betterprogramming.pub/implement-user-authentication-with-next-js-and-firebase-fb9414adba08?source=collection_archive---------0-----------------------#2020-08-27">https://betterprogramming.pub/implement-user-authentication-with-next-js-and-firebase-fb9414adba08?source=collection_archive---------0-----------------------#2020-08-27</a></blockquote><div><div class="fc ih ii ij ik il"/><div class="im in io ip iq"><div class=""/><div class=""><h2 id="8692" class="pw-subtitle-paragraph jq is it bd b jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh dk translated">Authä¸ä¸€å®šå¾ˆéš¾æˆ–è€…å¾ˆè€—æ—¶</h2></div><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/c0c200480c16522961be57e71184a55a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eYnazDZPQQyWh4ED"/></div></div><p class="ku kv gj gh gi kw kx bd b be z dk translated">é‡Œå¡å¤šÂ·æˆˆéº¦æ–¯Â·å®‰å‰å°”åœ¨<a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šçš„ç…§ç‰‡</p></figure><p id="eaaf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ„å»ºæ‚¨è‡ªå·±çš„èº«ä»½éªŒè¯ç³»ç»Ÿå¯èƒ½æ˜¯ä¸€é¡¹å›°éš¾ä¸”è€—æ—¶çš„ä»»åŠ¡ã€‚ä½¿ç”¨ç°æœ‰å¹³å°æ¥å¤„ç†æ‚¨çš„èº«ä»½éªŒè¯æµç¨‹å°†ä¸ºæ‚¨èŠ‚çœå¤§é‡æ—¶é—´ï¼Œç”šè‡³ä¸éœ€è¦èŠ±è´¹æ‚¨ä»»ä½•é‡‘é’±ã€‚Firebaseæ˜¯æœ€å—æ¬¢è¿çš„å¹³å°ä¹‹ä¸€ï¼Œå¯ä»¥ä¸ºæ‚¨å¤„ç†èº«ä»½éªŒè¯ï¼Œå®ƒçš„å…è´¹è®¡åˆ’å…è®¸ä»»ä½•å¼€å‘äººå‘˜è½»æ¾å¿«é€Ÿåœ°æ„å»ºå®‰å…¨çš„èº«ä»½éªŒè¯ç³»ç»Ÿã€‚å®ƒå¸®åŠ©æ‚¨å¿«é€Ÿæ„å»ºåº”ç”¨ç¨‹åºï¼Œè€Œæ— éœ€ç®¡ç†åŸºç¡€æ¶æ„ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªå¹³å°æ¥å¿«é€Ÿå®ç°æˆ‘ä»¬è‡ªå·±çš„è®¤è¯æµç¨‹ã€‚æˆ‘ä»¬å°†ä½¿ç”¨Next.jsã€Typescriptå’ŒTailwindCSSæ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><p id="f3b3" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¦è·Ÿè¿›ï¼Œä½ åº”è¯¥æœ‰ä¸€ä¸ªç°æœ‰çš„é¡¹ç›®ã€‚æ‚¨å¯ä»¥éµå¾ªä»¥ä¸‹å…³äºæ›´å¥½ç¼–ç¨‹çš„å…¶ä»–æ•™ç¨‹æ¥è®¾ç½®æ‚¨çš„é¡¹ç›®:</p><div class="lv lw gp gr lx ly"><a href="https://medium.com/better-programming/how-to-set-up-next-js-with-typescript-5f912766c88" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">å¦‚ä½•ç”¨TypeScriptè®¾ç½®Next.js</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">ä½¿ç”¨Next.jså’ŒTypeScriptå¯åŠ¨æ–°çš„Reacté¡¹ç›®</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm ks ly"/></div></div></a></div><div class="lv lw gp gr lx ly"><a href="https://medium.com/better-programming/how-to-set-up-next-js-with-tailwind-css-b93ccd2d4164" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">å¦‚ä½•ç”¨Tailwind CSSè®¾ç½®Next.js</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">åœ¨Reacté¡¹ç›®ä¸­ä½¿ç”¨Tailwind CSSå’ŒNext.js</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="mn l mj mk ml mh mm ks ly"/></div></div></a></div><div class="lv lw gp gr lx ly"><a href="https://medium.com/better-programming/how-to-use-eslint-and-prettier-in-your-next-js-application-with-typescript-8ffc9ac5b672" rel="noopener follow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd iu gy z fp md fr fs me fu fw is bi translated">å¦‚ä½•åœ¨å¸¦æœ‰TypeScriptçš„Next.jsåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ESLintå’Œappearlier</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">è®©æ¯ä¸ªäººéƒ½åœ¨åŒä¸€é¡µä¸Šï¼Œç”¨åŒä¸€ç§é£æ ¼</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">medium.com</p></div></div><div class="mh l"><div class="mo l mj mk ml mh mm ks ly"/></div></div></a></div></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="698f" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">æ¦‚è§‚</h1><p id="1eb2" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°ä»¥ä¸‹å†…å®¹:</p><ul class=""><li id="27dd" class="nt nu it lb b lc ld lf lg li nv lm nw lq nx lu ny nz oa ob bi translated">å®ç°ä¸€ä¸ªç™»å½•ã€æ³¨å†Œå’Œé‡ç½®å¯†ç çš„è¡¨å•ã€‚</li><li id="586a" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">åœ¨Firestoreæ•°æ®åº“ä¸­å­˜å‚¨é¢å¤–çš„ç”¨æˆ·æ•°æ®ï¼Œå¹¶åœ¨ç”¨æˆ·ç™»å½•æ—¶è·å–è¿™äº›æ•°æ®..</li><li id="ab54" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">åˆ›å»ºäº†ä¸€ä¸ªuseAuthæŒ‚é’©ï¼Œå¹¶ä½¿ç”¨ä¸Šä¸‹æ–‡APIå‘æ‰€æœ‰ç»„ä»¶æä¾›ç”¨æˆ·æ•°æ®ã€‚</li><li id="5579" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">æ¯å½“æˆ‘ä»¬è·å–æ•°æ®æ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªåŠ è½½å¾®è°ƒå›¾æ ‡ã€‚</li><li id="65fc" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">æ¯å½“å‡ºé”™æ—¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚</li><li id="68fa" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">åˆ›å»ºäº†ä¸€ä¸ªé’©å­ï¼Œå½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå·²éªŒè¯ä½†æœªç™»å½•æ—¶é‡å®šå‘ç”¨æˆ·ã€‚</li><li id="54cb" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">åˆ›å»ºä¸€ä¸ªæ³¨é”€æŒ‰é’®ã€‚</li></ul></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="7cd7" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">åˆ›å»ºç™»å½•å’Œæ³¨å†Œé¡µé¢</h1><p id="ec42" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">è®©æˆ‘ä»¬ä»è®¾ç½®æˆ‘ä»¬çš„è®¤è¯é¡µé¢å¼€å§‹ï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å¯¼èˆªè¿™äº›é¡µé¢ã€‚</p><p id="6461" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åˆ›å»ºæ–‡ä»¶<code class="fe oh oi oj ok b">/pages/signup.tsx</code>:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="eafb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„<code class="fe oh oi oj ok b">Login</code>é¡µé¢(<code class="fe oh oi oj ok b">/pages/login.tsx</code>)åšåŒæ ·çš„äº‹æƒ…ï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬å¯ä»¥åœ¨ä¸¤è€…ä¹‹é—´å¯¼èˆªã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="90c7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœä½ è¿˜æ²¡æœ‰è¿™æ ·åšï¼Œç”¨<code class="fe oh oi oj ok b">yarn dev</code>å¯åŠ¨ä½ çš„æœåŠ¡å™¨ï¼Œåœ¨ä½ çš„æµè§ˆå™¨ä¸­å¯¼èˆªåˆ°<code class="fe oh oi oj ok b">/login</code>æ¥æµ‹è¯•é¡µé¢æ˜¯å¦å·¥ä½œã€‚</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="a4cc" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">åˆ›å»ºè¡¨å•</h1><p id="a3c3" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†è‡ªå·±çš„é¡µé¢ï¼Œè®©æˆ‘ä»¬åˆ›å»ºå®é™…çš„æ³¨å†Œå’Œç™»å½•è¡¨å•ã€‚åœ¨Reactä¸­å¤„ç†è¡¨å•çš„ä¸€ä¸ªå¾ˆå¥½çš„åº“æ˜¯<code class="fe oh oi oj ok b">[react-hook-form](&lt;https://react-hook-form.com/&gt;)</code>ã€‚å®ƒå¸®åŠ©æ‚¨æ„å»ºé«˜æ€§èƒ½ã€çµæ´»ä¸”å¯æ‰©å±•çš„è¡¨å•ï¼Œå¹¶æä¾›æ˜“äºä½¿ç”¨çš„éªŒè¯ã€‚è®©æˆ‘ä»¬å…ˆå®‰è£…å®ƒ:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="7b24" class="or mx it ok b gy os ot l ou ov">yarn add react-hook-form</span></pre><p id="9fea" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºæˆ‘ä»¬çš„æ³¨å†Œè¡¨å•:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="0499" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨åœ¨<code class="fe oh oi oj ok b">pages/signup.tsx</code>ä¸­å¯¼å…¥<code class="fe oh oi oj ok b">SignUpForm</code>ç»„ä»¶ï¼Œå¹¶ç”¨åˆšåˆšåˆ›å»ºçš„<code class="fe oh oi oj ok b">&lt;SignUpForm /&gt;</code>æ›¿æ¢â€œtodoâ€æ³¨é‡Šã€‚</p><p id="b541" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ‚¨å¯ä»¥é€šè¿‡æäº¤è¡¨å•å¹¶åœ¨æ§åˆ¶å°ä¸­æ£€æŸ¥æ—¥å¿—æ¥æµ‹è¯•è¡¨å•ã€‚å®ƒåº”è¯¥ä¼šå‘æ‚¨æ˜¾ç¤ºä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„å¯¹è±¡:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="9385" class="or mx it ok b gy os ot l ou ov">{<br/>  name: Jake,<br/>  email: jake@prins.com,<br/>  password: secretpassword,<br/>}</span></pre><p id="6769" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ­¤å¤–ï¼Œå°è¯•éªŒè¯æ˜¯å¦æœ‰æ•ˆã€‚æ‰€æœ‰å­—æ®µéƒ½åº”è¯¥æ˜¯å¿…å¡«çš„ã€‚åº”è¯¥éªŒè¯ç”µå­é‚®ä»¶çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œå¹¶ä¸”å¯†ç åº”è¯¥è‡³å°‘æœ‰6ä¸ªå­—ç¬¦é•¿ã€‚</p><p id="0dca" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬åšå¾—å¾ˆå¥½ï¼Œè®©æˆ‘ä»¬å¯¹ç™»å½•è¡¨å•åšåŒæ ·çš„äº‹æƒ…ã€‚</p><p id="32bd" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åˆ›å»º<code class="fe oh oi oj ok b">/components/forms/LoginForm.tsx</code>ï¼Œå¤åˆ¶å¹¶ç²˜è´´ä½ çš„æ³¨å†Œè¡¨å•ä»£ç ã€‚æŠŠåå­—æ”¹æˆ<code class="fe oh oi oj ok b">LoginForm</code>ï¼Œå»æ‰â€œå§“åâ€è¾“å…¥ï¼Œå› ä¸ºæˆ‘ä»¬ç™»å½•åªéœ€è¦é‚®ç®±å’Œå¯†ç ã€‚å¦å¤–ï¼Œè°ƒæ•´<code class="fe oh oi oj ok b">LoginData</code>ç•Œé¢</p><p id="e7ab" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ‚¨çš„è¡¨å•åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="0164" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">åˆ›å»ºä¸€ä¸ªFirebaseé¡¹ç›®</h1><p id="2271" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†è¡¨å•ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä»¬ä¸Firebaseé›†æˆã€‚è®©æˆ‘ä»¬ä»å»ºç«‹ä¸€ä¸ªFirebaseé¡¹ç›®å¼€å§‹ã€‚</p><p id="5e06" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªFirebaseå¸æˆ·ã€‚å‰å¾€<a class="ae ky" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank">https://firebase.google.com/</a>ï¼Œç‚¹å‡»â€œå¼€å§‹â€æŒ‰é’®ï¼Œå¹¶æŒ‰ç…§æŒ‡ç¤ºåˆ›å»ºæ‚¨çš„é¡¹ç›®ã€‚</p><p id="096e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä¸€æ—¦åˆ›å»ºäº†é¡¹ç›®ï¼Œæ‚¨åº”è¯¥åœ¨Firebaseæ§åˆ¶å°ä¸­æ³¨å†Œæ‚¨çš„åº”ç”¨ç¨‹åºã€‚åœ¨é¡¹ç›®æ¦‚è¿°é¡µé¢ä¸­ï¼Œå•å‡»webå›¾æ ‡å°†Firebaseæ·»åŠ åˆ°æ‚¨çš„webåº”ç”¨ç¨‹åºä¸­ã€‚åˆ›å»ºå®Œæˆåï¼Œæ‚¨å°†æ”¶åˆ°firebaseé…ç½®ï¼Œçœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="b0b7" class="or mx it ok b gy os ot l ou ov">const firebaseConfig = {<br/>    apiKey: "xxxx",<br/>    authDomain: "your-project-name.firebaseapp.com",<br/>    databaseURL: "&lt;https://your-project-name.firebaseio.com&gt;",<br/>    projectId: "your-project-name",<br/>    storageBucket: "your-project-name.appspot.com",<br/>    messagingSenderId: "xxx",<br/>    appId: "xxx",<br/>    measurementId: "G-xxx"<br/>  };</span></pre><p id="1123" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬ç°åœ¨åº”è¯¥æ¿€æ´»è¦æ·»åŠ åˆ°åº”ç”¨ç¨‹åºä¸­çš„æ³¨å†Œæ–¹æ³•ã€‚å¯¼èˆªè‡³<em class="ow">è®¤è¯</em>ï¼Œé€šè¿‡æ¿€æ´»<em class="ow">ç”µå­é‚®ä»¶/å¯†ç </em>æ–¹æ³•å¼€å§‹ã€‚</p><h2 id="b573" class="or mx it bd my ox oy dn nc oz pa dp ng li pb pc ni lm pd pe nk lq pf pg nm ph bi translated"><strong class="ak">æ·»åŠ Firestore(å¯é€‰)</strong></h2><p id="22f4" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">å¦‚æœæ‚¨æƒ³åœ¨æ³¨å†Œæ—¶ä¿å­˜é¢å¤–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·åæˆ–å…¨åï¼Œæ‚¨éœ€è¦å»ºç«‹ä¸€ä¸ªæ•°æ®åº“æ¥ä¿å­˜è¿™äº›æ•°æ®ã€‚<a class="ae ky" href="https://firebase.google.com/docs/firestore" rel="noopener ugc nofollow" target="_blank"> Cloud Firestore </a>æ˜¯Firebaseçš„ä¸€æ¬¾çµæ´»ã€å¯æ‰©å±•çš„æ•°æ®åº“ã€‚å®ƒæä¾›äº†ä¸Firebaseå’Œå…¶ä»–è°·æ­Œäº‘å¹³å°äº§å“çš„æ— ç¼é›†æˆï¼Œæ¯”å¦‚äº‘åŠŸèƒ½ã€‚å°±åƒFirebaseä¸€æ ·ï¼Œå®ƒå®Œå…¨å…è´¹ã€‚åªæœ‰å½“æ‚¨çš„åº”ç”¨ç¨‹åºçœŸæ­£å¼€å§‹æ‰©å±•æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šè¶…è¿‡å…è´¹è®¡åˆ’ï¼Œä½†å³ä½¿è¿™æ ·ï¼Œæ‚¨ä¹Ÿåªéœ€ä¸ºæ‚¨ä½¿ç”¨çš„å†…å®¹ä»˜è´¹ã€‚ä¸€ä¸ªéå¸¸æœ‰è¶£çš„ä»·æ ¼æ¨¡å‹ï¼Œå¦‚æœä½ åˆšå¼€å§‹æ—¶ä¸æƒ³èŠ±å¾ˆå¤š(æˆ–ä»»ä½•)é’±çš„è¯ã€‚</p><p id="7223" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœæ‚¨æƒ³è¦è®¾ç½®Firestoreï¼Œè¯·å¯¼èˆªåˆ°<em class="ow">æ•°æ®åº“</em>ï¼Œç„¶åå•å‡»ç¬¬ä¸€ä¸ª<em class="ow">åˆ›å»ºæ•°æ®åº“</em>æŒ‰é’®ï¼Œå°†äº‘Firestoreæ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­ã€‚é€‰æ‹©åœ¨æµ‹è¯•æ¨¡å¼ä¸‹å¯åŠ¨çš„é€‰é¡¹ã€‚æˆ‘ä»¬ä»¥åå†æ¥æ‹…å¿ƒFirestoreè§„åˆ™ã€‚</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="b630" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">åœ¨æ‚¨çš„é¡¹ç›®ä¸­å®ç°Firebase</h1><p id="acc2" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">æˆ‘ä»¬ç°åœ¨å‡†å¤‡åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å®ç°Firebaseã€‚</p><p id="4606" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é¦–å…ˆï¼Œå®‰è£…Firebase:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="65f6" class="or mx it ok b gy os ot l ou ov">yarn add firebase</span></pre><p id="a600" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„Firebaseé…ç½®ä¿å­˜åˆ°ä¸€äº›ç¯å¢ƒå˜é‡ä¸­ã€‚</p><p id="c8ee" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">Next.jsè‡ªå¸¦å¯¹ç¯å¢ƒå˜é‡çš„å†…ç½®æ”¯æŒï¼Œå…è®¸ä½ <a class="ae ky" href="https://nextjs.org/docs/basic-features/environment-variables#loading-environment-variables" rel="noopener ugc nofollow" target="_blank">ä½¿ç”¨</a> <code class="fe oh oi oj ok b"><a class="ae ky" href="https://nextjs.org/docs/basic-features/environment-variables#loading-environment-variables" rel="noopener ugc nofollow" target="_blank">.env.local</a></code> <a class="ae ky" href="https://nextjs.org/docs/basic-features/environment-variables#loading-environment-variables" rel="noopener ugc nofollow" target="_blank">åŠ è½½ç¯å¢ƒå˜é‡</a>å’Œ<a class="ae ky" href="https://nextjs.org/docs/basic-features/environment-variables#exposing-environment-variables-to-the-browser" rel="noopener ugc nofollow" target="_blank">å°†ç¯å¢ƒå˜é‡æš´éœ²ç»™æµè§ˆå™¨</a>ã€‚</p><p id="2b41" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è½¬åˆ°æ‚¨çš„<code class="fe oh oi oj ok b">.env.local</code>æ–‡ä»¶(æˆ–è€…åˆ›å»ºå®ƒï¼Œå¦‚æœå®ƒè¿˜ä¸å­˜åœ¨çš„è¯)ã€‚ç„¶åï¼Œåœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ä¼ é€’ï¼Œç”¨æ‚¨è‡ªå·±çš„Firebaseå‡­è¯æ›´æ”¹è™šæ‹Ÿæ•°æ®ã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="c56b" class="or mx it ok b gy os ot l ou ov">NEXT_PUBLIC_FIREBASE_API_KEY="yourapikey"<br/>NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN="yourappname.firebaseapp.com"<br/>NEXT_PUBLIC_FIREBASE_DATABASE_URL="&lt;https://appname.firebaseio.com&gt;"<br/>NEXT_PUBLIC_FIREBASE_PROJECT_ID="yourappname"<br/>NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET="yourappname.appspot.com"<br/>NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID="yoursenderid"<br/>NEXT_PUBLIC_FIREBASE_APP_ID="yourappid"<br/>NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID="yourmeasurementid"</span></pre><p id="ce3a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åªæœ‰åœ¨ä½äº9.4çš„Next.jsç‰ˆæœ¬ä¸Šï¼Œä½ æ‰åº”è¯¥åˆ›å»ºä¸€ä¸ª<code class="fe oh oi oj ok b">next.config.ts</code>æ–‡ä»¶å¹¶è‡ªå·±å¯¼å‡ºä½ çš„ç¯å¢ƒå˜é‡ã€‚</p><p id="a763" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¤ªå¥½äº†ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è¿™æ ·è®¿é—®æˆ‘ä»¬çš„æ•°æ®äº†:<code class="fe oh oi oj ok b">process.env.NEXT_PUBLIC_FIREBASE_API_KEY</code>ã€‚ä»”ç»†æ£€æŸ¥<code class="fe oh oi oj ok b">.env.local</code>æ˜¯å¦è¢«æ·»åŠ åˆ°æ‚¨çš„<code class="fe oh oi oj ok b">.gitignore</code>ä¸­ï¼Œè¿™æ ·æ‚¨å°±ä¸ä¼šæ„å¤–åœ°æäº¤è¿™äº›æ•°æ®ã€‚è¿˜è¦è®°ä½ï¼Œåœ¨éƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶ï¼Œé¦–å…ˆéœ€è¦è®¾ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡ã€‚å½“åœ¨<a class="ae ky" href="https://vercel.com" rel="noopener ugc nofollow" target="_blank"> Vercel </a>ä¸Šéƒ¨ç½²æ—¶ï¼Œæ‚¨å¯ä»¥åœ¨Vercelä»ªè¡¨æ¿çš„é¡¹ç›®çš„<a class="ae ky" href="https://vercel.com/docs/v2/build-step#environment-variables" rel="noopener ugc nofollow" target="_blank">ç¯å¢ƒå˜é‡</a>éƒ¨åˆ†ä¸­é…ç½®ç§˜å¯†ã€‚</p><p id="c3ef" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶<code class="fe oh oi oj ok b">/config/firebase.ts</code>å¹¶æ·»åŠ æ‚¨çš„é…ç½®ã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="b936" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå£°æ˜æˆ‘ä»¬çš„Firebaseé…ç½®ï¼Œç„¶åç”¨<code class="fe oh oi oj ok b">firebase.initializeApp(firebaseConfig)</code>åˆå§‹åŒ–æˆ‘ä»¬é¡¹ç›®ä¸­çš„Firebaseã€‚</p><p id="ee67" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬è¿˜å¯¼å‡ºäº†ä¸€äº›åœ¨å¼€å‘åº”ç”¨ç¨‹åºæ—¶éœ€è¦çš„å‡½æ•°ã€‚</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="cf38" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">ç­¾çº¦é›‡ç”¨</h1><p id="1b48" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨Firebaseï¼Œè®©æˆ‘ä»¬è½¬åˆ°æˆ‘ä»¬çš„<code class="fe oh oi oj ok b">SignUpForm</code>ç»„ä»¶ï¼Œå¼€å§‹åˆ›å»ºæˆ‘ä»¬çš„<code class="fe oh oi oj ok b">signUp</code>å‡½æ•°ã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="0bb1" class="or mx it ok b gy os ot l ou ov">...<br/>import { auth } from 'config/firebase';<br/>...</span><span id="c1a1" class="or mx it ok b gy pi ot l ou ov">const signUp = ({ name, email, password }) =&gt; {<br/> return auth<br/>  .createUserWithEmailAndPassword(email, password)<br/>  .then((response) =&gt; {<br/>   console.log(response)<br/>  })<br/>  .catch((error) =&gt; {<br/>   return { error };<br/>  });<br/>};</span></pre><p id="3c02" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨ä½ å¯ä»¥å°è¯•ä½ çš„å½¢å¼:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="5dbd" class="or mx it ok b gy os ot l ou ov">const onSubmit = (data: SignUpData) =&gt; {<br/> return signUp(data).then((user) =&gt; {<br/>  console.log(user);<br/> });<br/>};</span></pre><p id="d0f1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœä½ ç°åœ¨å°è¯•è¿™ç§å½¢å¼ï¼Œä½ å°†æ³¨å†Œä½ çš„firebaseé¡¹ç›®ã€‚è½¬åˆ°Firebaseæ§åˆ¶å°ï¼Œå¹¶è½¬åˆ°èº«ä»½éªŒè¯æ¦‚è¿°ã€‚æ‚¨åº”è¯¥åœ¨è¿™é‡Œçœ‹åˆ°æäº¤çš„æ•°æ®ã€‚</p><p id="9003" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¤ªç¥å¥‡äº†ï¼ä»…ä»…ç”¨è¿™å‡ è¡Œä»£ç ï¼Œæ‚¨å°±æ„å»ºäº†ä¸€ä¸ªæ³¨å†Œè¡¨å•ï¼</p><p id="bd6d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¤ªå¥½äº†ï¼Œä½†æ˜¯<em class="ow"> name </em>å±æ€§ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿå—¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å­˜å‚¨é¢å¤–çš„æ•°æ®ï¼Œæˆ‘ä»¬è¿˜æƒ³åœ¨Firestoreæ•°æ®åº“ä¸­åˆ›å»ºç”¨æˆ·ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåœ¨æ•°æ®åº“ä¸­åˆ›å»ºç”¨æˆ·æ–‡æ¡£çš„å‡½æ•°ï¼Œå¹¶ç¡®ä¿è®°å½•çš„UIDæ˜¯ç›¸åŒçš„ã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="ac2f" class="or mx it ok b gy os ot l ou ov">...<br/>import { auth } from 'config/firebase';<br/>...</span><span id="9660" class="or mx it ok b gy pi ot l ou ov">const createUser = (user) =&gt; {<br/> return db<br/>  .collection('users')<br/>  .doc(user.uid)<br/>  .set(user)<br/>  .then(() =&gt; {<br/>   console.log("Success")<br/>  })<br/>  .catch((error) =&gt; {<br/>   console.log(error)<br/>  });<br/>};</span></pre><p id="0f8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨ï¼Œä¸€æ—¦ç”¨æˆ·æˆåŠŸæ³¨å†Œï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚ç»§ç»­æ›´æ–°æ‚¨çš„<code class="fe oh oi oj ok b">signUp</code>å‡½æ•°:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="1b94" class="or mx it ok b gy os ot l ou ov">const signUp = ({ name, email, password }) =&gt; {<br/> return auth<br/>  .createUserWithEmailAndPassword(email, password)<br/>  .then((response) =&gt; {<br/>   return createUser({ uid: response.user.uid, email, name });<br/>  })<br/>  .catch((error) =&gt; {<br/>   return { error };<br/>  });<br/>};</span></pre><p id="b866" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœä½ ç°åœ¨å†è¯•ä¸€æ¬¡ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œå› ä¸ºä½ ä¸èƒ½ç”¨åŒä¸€ä¸ªç”µå­é‚®ä»¶åœ°å€æ³¨å†Œä¸¤æ¬¡ã€‚ç¡®ä¿æ‚¨å·²ç»åˆ é™¤äº†<a class="ae ky" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebaseæ§åˆ¶å°</a>ä¸­çš„ç¬¬ä¸€ä¸ªæ¡ç›®ï¼Œç„¶åé‡è¯•(æˆ–è€…å°è¯•ä½¿ç”¨ä¸åŒçš„ç”µå­é‚®ä»¶)ã€‚</p><p id="28f8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æäº¤æ³¨å†Œè¡¨å•åï¼Œåœ¨<a class="ae ky" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebaseæ§åˆ¶å°</a>ä¸­çš„<em class="ow">è®¤è¯</em>å’Œ<em class="ow">æ•°æ®åº“</em>ä¸­æŸ¥çœ‹æ˜¯å¦åˆ›å»ºäº†ä¸¤æ¡è®°å½•ã€‚</p><p id="a07c" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¤ªå¥½äº†ï¼Œä½ ç°åœ¨åº”è¯¥æœ‰ä¸€ä¸ªå·¥ä½œçš„æ³¨å†Œè¡¨å•äº†ï¼</p><h2 id="c5a7" class="or mx it bd my ox oy dn nc oz pa dp ng li pb pc ni lm pd pe nk lq pf pg nm ph bi translated">å¥æŸ„çŠ¶æ€</h2><p id="83d4" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">åŸºäºæˆåŠŸå“åº”ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åœ¨ç”¨æˆ·æ³¨å†Œåå°†ä»–ä»¬é‡å®šå‘åˆ°ä¸åŒçš„è·¯ç”±ï¼Œä½†å”¯ä¸€çš„é—®é¢˜æ˜¯æˆ‘ä»¬å°†ä¸¢å¤±æˆ‘ä»¬çš„çŠ¶æ€ã€‚åœ¨é‡å®šå‘çš„é¡µé¢ä¸Šï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦èƒ½å¤Ÿåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•ã€‚æˆ‘ä»¬è¿˜å¸Œæœ›åœ¨åº”ç”¨ç¨‹åºçš„å¤šä¸ªåœ°æ–¹ä½¿ç”¨å½“å‰ç”¨æˆ·çš„æ•°æ®ã€‚</p><p id="87e1" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å…¨å±€çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åƒ<a class="ae ky" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>è¿™æ ·çš„çŠ¶æ€ç®¡ç†åº“ï¼Œä½†æ˜¯è¿™ä¹Ÿå¼•å…¥äº†å¾ˆå¤šå¤æ‚æ€§ï¼Œå¹¶ä¸æ€»æ˜¯ä½ æƒ³è¦çš„ã€‚ç‰¹åˆ«æ˜¯ç°åœ¨Reactæœ‰äº†ä¸Šä¸‹æ–‡å’Œé’©å­ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸€ç‚¹ä¸Šå¹¶ä¸çœŸæ­£éœ€è¦çŠ¶æ€ç®¡ç†åº“ã€‚</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="aec9" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">åˆ›å»ºèº«ä»½éªŒè¯æä¾›ç¨‹åº</h1><p id="9cfc" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated"><a class="ae ky" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">ä¸Šä¸‹æ–‡</a>æä¾›äº†ä¸€ç§é€šè¿‡ç»„ä»¶æ ‘ä¼ é€’æ•°æ®çš„æ–¹æ³•ï¼Œè€Œä¸å¿…åœ¨æ¯ä¸€å±‚æ‰‹åŠ¨å‘ä¸‹ä¼ é€’å±æ€§ã€‚</p><p id="11a0" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è®©æˆ‘ä»¬ä»åˆ›å»ºæˆ‘ä»¬çš„<code class="fe oh oi oj ok b">useAuthProvider</code>é’©å­å¼€å§‹ï¼Œå°†æˆ‘ä»¬çš„<code class="fe oh oi oj ok b">signUp</code>å’Œ<code class="fe oh oi oj ok b">createUser</code>å‡½æ•°ç§»åˆ°è¿™ä¸ªé’©å­ä¸­ã€‚æˆ‘ä»¬è¿˜ç”¨<code class="fe oh oi oj ok b">useState</code>è®¾ç½®æˆåŠŸæˆ–å‡ºé”™åçš„ç”¨æˆ·çŠ¶æ€ã€‚</p><p id="3342" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åˆ›å»ºä¸€ä¸ªåä¸º<code class="fe oh oi oj ok b">hooks/useAuth</code>çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç :</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="8415" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨<a class="ae ky" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">ä¸Šä¸‹æ–‡</a>æ¥åˆ›å»ºä¸€ä¸ªæä¾›è€…ã€‚åœ¨åˆšåˆšæ”¾å…¥<code class="fe oh oi oj ok b">hooks/useAuth.tsx</code>çš„ä»£ç ä¸Šæ·»åŠ ä»¥ä¸‹ä»£ç </p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="ff40" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¾ˆå¥½â€”â€”ç°åœ¨ç”¨è¿™ä¸ªæä¾›è€…åŒ…è£…ä½ çš„<code class="fe oh oi oj ok b">AppComponent</code>,è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹ä½¿ç”¨è¿™ä¸ª<code class="fe oh oi oj ok b">useAuth</code>é’©å­ã€‚åœ¨ä½ çš„<code class="fe oh oi oj ok b">_app.tsx</code>:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="8073" class="or mx it ok b gy os ot l ou ov">import { AppProps } from 'next/app';<br/>import { AuthProvider } from 'hooks/useAuth';<br/>export default function MyApp({ Component, pageProps }: AppProps): any {<br/> return (<br/>  &lt;AuthProvider&gt;<br/>   &lt;Component {...pageProps} /&gt;<br/>  &lt;/AuthProvider&gt;<br/> );<br/>}</span></pre><p id="316a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬ä¹Ÿæ¥åšä¸€ä¸ªå¦‚æœæˆåŠŸç™»å½•å¯ä»¥é‡å®šå‘åˆ°çš„é¡µé¢:<code class="fe oh oi oj ok b">pages/dashboard.tsx</code>ã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="432d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é…·ï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥è¯•è¯•å§ï¼å¦‚æœä½ æƒ³ç”¨åŒä¸€ä¸ªç”µå­é‚®ä»¶å†è¯•ä¸€æ¬¡ï¼Œé‚£ä¹ˆåœ¨ä½ æäº¤è¡¨æ ¼ä¹‹å‰ï¼Œé¦–å…ˆä»Firebaseä¸­åˆ é™¤ä½ çš„ç”¨æˆ·æ•°æ®(æˆ–è€…ä½¿ç”¨ä¸åŒçš„ç”µå­é‚®ä»¶)ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨ç°åœ¨åº”è¯¥ä¼šè¢«é‡å®šå‘åˆ°ä»ªè¡¨æ¿é¡µé¢ã€‚</p><p id="b637" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å™ªéŸ³ã€‚è¿™çœ‹èµ·æ¥è¶Šæ¥è¶Šåƒäº†ã€‚è®©æˆ‘ä»¬åˆ©ç”¨æˆ‘ä»¬çš„åŠ¿å¤´ï¼Œç»§ç»­å‰è¿›ã€‚</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="6088" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">æ³¨å†Œ</h1><p id="277e" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">è®©æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬çš„ç™»å½•åŠŸèƒ½ã€‚åœ¨<code class="fe oh oi oj ok b">useAuth.tsx</code>å†…æ·»åŠ ä»¥ä¸‹åŠŸèƒ½ã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="bb54" class="or mx it ok b gy os ot l ou ov">const signIn = ({ email, password }) =&gt; {<br/> return auth<br/>  .signInWithEmailAndPassword(email, password)<br/>  .then((response) =&gt; {<br/>   setUser(response.user);<br/>   return response.user;<br/>  })<br/>  .catch((error) =&gt; {<br/>   return { error };<br/>  });<br/>};</span></pre><p id="dffe" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç¡®ä¿å¯¼å‡ºå®ƒã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="c9ca" class="or mx it ok b gy os ot l ou ov">...<br/>return { user, signUp, signIn };<br/>...</span></pre><p id="5a55" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨åœ¨<code class="fe oh oi oj ok b">LoginForm.tsx</code>ä¸­è°ƒç”¨æäº¤æ—¶å‡½æ•°:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="3922" class="or mx it ok b gy os ot l ou ov">...</span><span id="6a6a" class="or mx it ok b gy pi ot l ou ov">const LoginForm: React.FC = () =&gt; {<br/> const { register, errors, handleSubmit } = useForm();<br/> const auth = useAuth();<br/> const router = useRouter();</span><span id="c491" class="or mx it ok b gy pi ot l ou ov">const onSubmit = (data: LoginData) =&gt; {<br/>  return auth.signIn(data).then(() =&gt; {<br/>   router.push('/dashboard');<br/>  });<br/> };</span><span id="141b" class="or mx it ok b gy pi ot l ou ov">...</span></pre><p id="9e58" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é…·ï¼Œç°åœ¨è®©æˆ‘ä»¬è¯•è¯•è¿™æ˜¯å¦å¯è¡Œã€‚</p><p id="dc25" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä½ ç°åœ¨åº”è¯¥å¯ä»¥ç™»å½•äº†ï¼Œæ¥å—æˆ‘ä»¬ç¼ºå°‘äº†<em class="ow">åå­—</em>ã€‚è¿™æ˜¯å› ä¸ºè¯¥åç§°ä¸æ˜¯æ¥è‡ªFirebaseèº«ä»½éªŒè¯ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨æˆ‘ä»¬çš„Firestoreæ•°æ®åº“ä¸­ã€‚æˆ‘ä»¬éœ€è¦ç›‘å¬èº«ä»½éªŒè¯çŠ¶æ€çš„å˜åŒ–ï¼Œå¹¶ä»æ•°æ®åº“ä¸­è·å–æ•°æ®ã€‚</p><p id="20d7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨<code class="fe oh oi oj ok b">useAuthProvider</code>é’©å­å†…æ·»åŠ è¿™ä¸ªå‡½æ•°:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="8632" class="or mx it ok b gy os ot l ou ov">const getUserAdditionalData = (user: firebase.User) =&gt; {<br/> return db<br/>  .collection('users')<br/>  .doc(user.uid)<br/>  .get()<br/>  .then((userData) =&gt; {<br/>   if (userData.data()) {<br/>    setUser(userData.data());<br/>   }<br/>  });<br/>};</span></pre><p id="3134" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç„¶åï¼Œåœ¨æˆåŠŸçš„ç™»å½•è¯·æ±‚åè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="3089" class="or mx it ok b gy os ot l ou ov">const signIn = ({ email, password }) =&gt; {<br/> return auth<br/>  .signInWithEmailAndPassword(email, password)<br/>  .then((response) =&gt; {<br/>   setUser(response.user);<br/>   getUserAdditionalData(user);<br/>   return response.user;<br/>  })<br/>  .catch((error) =&gt; {<br/>   return { error };<br/>  });<br/>};</span></pre><p id="4ef7" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¤ªå¥½äº†ï¼Œç°åœ¨è¿™åº”è¯¥å¯ä»¥è§£å†³æˆ‘ä»¬çš„é—®é¢˜äº†ã€‚ä½†å®ƒå¹¶ä¸èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œå› ä¸ºFirebaseè¿˜èƒ½å¸®åŠ©æˆ‘ä»¬ä¿æŒç”¨æˆ·ç™»å½•ã€‚ä½†æ˜¯åœ¨ç”¨æˆ·ç™»å½•åï¼Œå½“ä»–ä»¬é‡æ–°è¿›å…¥æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è·å–é¢å¤–çš„æ•°æ®ã€‚</p><p id="cee9" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å› æ­¤ï¼Œè®©æˆ‘ä»¬ä¹Ÿè®¢é˜…<code class="fe oh oi oj ok b">onAuthStateChanged</code>äº‹ä»¶ï¼Œå¹¶è°ƒç”¨<code class="fe oh oi oj ok b">getUserAdditionalData</code>æ¥è·å–æ•°æ®:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="4761" class="or mx it ok b gy os ot l ou ov">const handleAuthStateChanged = (user: firebase.User) =&gt; {<br/> setUser(user);<br/> if (user) {<br/>  getUserAdditionalData(user);<br/> }<br/>};</span><span id="ecbb" class="or mx it ok b gy pi ot l ou ov">useEffect(() =&gt; {<br/> const unsub = auth.onAuthStateChanged(handleAuthStateChanged);<br/> <br/> return () =&gt; unsub();<br/>}, []);</span></pre><p id="568b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœä½ åˆ·æ–°é¡µé¢ï¼Œä½ åº”è¯¥çœ‹åˆ°ä½ çš„åå­—ã€‚ç¥å¥‡ï¼ğŸ©</p><p id="bfb6" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä¸ºäº†è¿›ä¸€æ­¥æ”¹è¿›è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç¡®ä¿æ¯å½“ç”¨æˆ·çš„æ–‡æ¡£æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿæ›´æ–°åº”ç”¨ç¨‹åºä¸­çš„ç”¨æˆ·çŠ¶æ€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘useAuthé’©å­æ·»åŠ å¦ä¸€ä¸ªæ•ˆæœæ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯¥é’©å­è®¢é˜…ç”¨æˆ·çš„æ–‡æ¡£å¹¶åœ¨å®ƒæ”¹å˜æ—¶æ›´æ–°çŠ¶æ€ã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="73f0" class="or mx it ok b gy os ot l ou ov">useEffect(() =&gt; {<br/>  if (user?.uid) {<br/>    // Subscribe to user document on mount<br/>    const unsubscribe = db<br/>      .collection('users')<br/>      .doc(user.uid)<br/>      .onSnapshot((doc) =&gt; setUser(doc.data()));</span><span id="2e4d" class="or mx it ok b gy pi ot l ou ov">return () =&gt; unsubscribe();<br/>  }<br/>}, []);</span></pre></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="5961" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">æ³¨é”€</h1><p id="beb8" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">æˆ‘ä»¬ç°åœ¨ç¡®ä¿ä»æˆ‘ä»¬çš„æ•°æ®åº“ä¸­è·å–ç”¨æˆ·æ•°æ®ï¼Œå¹¶æ›´æ–°æˆ‘ä»¬çš„æœ¬åœ°çŠ¶æ€ï¼Œä»¥ä¾¿ç”¨æˆ·çŸ¥é“ä»–æˆ–å¥¹å·²ç»ç™»å½•ã€‚è¿™å¾ˆå¥½ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰å®Œæˆã€‚æˆ‘ä»¬è¿˜è¦ç¡®ä¿ç”¨æˆ·å¯ä»¥æ³¨é”€ã€‚</p><p id="6c46" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å°†æ­¤<code class="fe oh oi oj ok b">signOut</code>åŠŸèƒ½æ·»åŠ åˆ°<code class="fe oh oi oj ok b">useAuthProvider</code>ä¸­:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="26d7" class="or mx it ok b gy os ot l ou ov">...</span><span id="8926" class="or mx it ok b gy pi ot l ou ov">const signOut = () =&gt; {<br/>  return auth.signOut().then(() =&gt; setUser(false));<br/>};</span><span id="309a" class="or mx it ok b gy pi ot l ou ov">...</span></pre><p id="c57e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä¸è¦å¿˜è®°å¯¼å‡ºå®ƒã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="e7db" class="or mx it ok b gy os ot l ou ov">...<br/>return { user, signUp, signIn, signOut };<br/>...</span></pre><p id="5ccf" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åšä¸€ä¸ªæŒ‰é’®ï¼Œå½“å®ƒè¢«ç‚¹å‡»æ—¶è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚å°†æ­¤æŒ‰é’®æ·»åŠ åˆ°æ‚¨çš„<code class="fe oh oi oj ok b">pages/dashboard.tsx</code>:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="8cd3" class="or mx it ok b gy os ot l ou ov">...<br/>&lt;button<br/> onClick={() =&gt; auth.signOut()}<br/> className="w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out"<br/>&gt;<br/> Sign out<br/>&lt;/button&gt;</span></pre><p id="ced2" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¯•è¯•å§ï¼</p><p id="dbb8" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœå·¥ä½œæ­£å¸¸ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªç™½å±ã€‚è¿™ä¸æ˜¯æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„ã€‚æˆ‘ä»¬å®é™…ä¸Šä»æ¥ä¸å¸Œæœ›ç”¨æˆ·åœ¨æ²¡æœ‰ç™»å½•çš„æƒ…å†µä¸‹èƒ½å¤Ÿè¿›å…¥<code class="fe oh oi oj ok b">/dashboard</code>ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé’©å­ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œå®ƒå°†é‡å®šå‘ç”¨æˆ·ã€‚</p><p id="bddb" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨<code class="fe oh oi oj ok b">hooks/useRequireAuth.tsx</code>å¤„åˆ›å»ºä»¥ä¸‹é’©å­</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="d9c4" class="or mx it ok b gy os ot l ou ov">import { useEffect } from 'react';<br/>import { useRouter } from 'next/router';<br/>import { useAuth } from 'hooks/useAuth';</span><span id="2278" class="or mx it ok b gy pi ot l ou ov">export const useRequireAuth = () =&gt; {<br/> const auth = useAuth();<br/> const router = useRouter();</span><span id="eca6" class="or mx it ok b gy pi ot l ou ov">useEffect(() =&gt; {<br/>  if (auth.user === false) {<br/>   router.push('/login');<br/>  }<br/> }, [auth, router]);<br/> <br/> return auth;<br/>};</span></pre><p id="ed87" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨ä½¿ç”¨<code class="fe oh oi oj ok b">dashboard.tsx</code>é‡Œé¢çš„è¿™ä¸ªé’©å­ã€‚ç”¨æˆ‘ä»¬çš„æ–°åŠé’©æ›¿æ¢æ—§çš„<code class="fe oh oi oj ok b">const auth = useAuth()</code>:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="33a9" class="or mx it ok b gy os ot l ou ov">...<br/>const auth = useRequireAuth()<br/>...</span></pre><p id="c061" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åˆæ¥äº†ï¼Œé­”æ³•ï¼ğŸ©</p><p id="1a8b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ä½ åšå¾—å¤ªæ£’äº†ã€‚æˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªå·¥ä½œæ³¨å†Œå’Œç™»å½•æµç¨‹ã€‚ä¸é”™ï¼å»å–æ¯å’–å•¡å§ï¼Œè¿™æ˜¯ä½ åº”å¾—çš„ã€‚å½“ä½ å›æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å†å†™ä¸€äº›ä»£ç ã€‚</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="d791" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">é‡ç½®å¯†ç </h1><p id="d16b" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">å› ä¸ºå½“ç”¨æˆ·å¿˜è®°å¯†ç æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæˆ‘ä»¬ä¹Ÿéœ€è¦å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç»™æˆ‘ä»¬çš„<code class="fe oh oi oj ok b">useAuth</code>é’©å­æ·»åŠ ä¸€ä¸ªå‡½æ•°æ¥å‘é€ä¸€ä¸ªé‡ç½®å¯†ç é“¾æ¥ã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="962a" class="or mx it ok b gy os ot l ou ov">const sendPasswordResetEmail = (email) =&gt; {<br/>  return auth.sendPasswordResetEmail(email).then((response) =&gt; {<br/>   return response;<br/>  });<br/> };</span><span id="f128" class="or mx it ok b gy pi ot l ou ov">...</span><span id="c4d0" class="or mx it ok b gy pi ot l ou ov">return {<br/> user,<br/> signUp,<br/> signIn,<br/> signOut,<br/> sendPasswordResetEmail,<br/>};</span></pre><p id="c31f" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨åˆ›å»ºä¸€ä¸ª<code class="fe oh oi oj ok b">ResetPasswordForm</code>ç»„ä»¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­è¾“å…¥ä»–ä»¬çš„ç”µå­é‚®ä»¶ã€‚åœ¨æäº¤æ—¶ï¼Œå®ƒåº”è¯¥è°ƒç”¨æ–°<code class="fe oh oi oj ok b">sendPasswordResetEmail</code>å‡½æ•°ã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="fd0d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¤ªå¥½äº†ã€‚ç°åœ¨åˆ›å»ºæ˜¾ç¤ºæˆ‘ä»¬æ–°çš„<code class="fe oh oi oj ok b">ResetPasswordForm</code>ç»„ä»¶çš„<code class="fe oh oi oj ok b">reset-password</code>é¡µé¢ã€‚</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ol om l"/></div></figure><p id="d583" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ­¤å¤–ï¼Œåœ¨æˆ‘ä»¬çš„ç™»å½•è¡¨å•ä¸Šæ·»åŠ ä¸€ä¸ªåˆ°è¿™ä¸ªæ–°çš„<code class="fe oh oi oj ok b">reset-password</code>é¡µé¢çš„é“¾æ¥ã€‚å°†æ­¤ä»£ç æ·»åŠ åˆ°å¯†ç è¾“å…¥çš„æ­£ä¸‹æ–¹:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="f043" class="or mx it ok b gy os ot l ou ov">...</span><span id="3514" class="or mx it ok b gy pi ot l ou ov">&lt;div className="mt-4 flex items-end"&gt;<br/> &lt;div className="text-sm leading-5"&gt;<br/>  &lt;Link href="/reset-password"&gt;<br/>   &lt;a<br/>    href="#"<br/>    className="font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none focus:underline transition ease-in-out duration-150"<br/>   &gt;<br/>    Forgot your password?<br/>   &lt;/a&gt;<br/>  &lt;/Link&gt;<br/> &lt;/div&gt;<br/>&lt;/div&gt;</span><span id="c589" class="or mx it ok b gy pi ot l ou ov">...</span></pre><p id="4e8d" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¾ˆå¥½ã€‚ç°åœ¨æµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹æ‚¨å…¨æ–°çš„è®¤è¯æµç¨‹ï¼</p><p id="d244" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">è¿™é‡Œæ€»æ˜¯æœ‰ä¸€äº›æ”¹è¿›çš„ç©ºé—´ã€‚è®©æˆ‘ä»¬æ¥å¤„ç†åŠ è½½çŠ¶æ€å’Œé”™è¯¯æ¶ˆæ¯ã€‚</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="01ac" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">åŠ è½½çŠ¶æ€å’Œé”™è¯¯æ¶ˆæ¯</h1><p id="c816" class="pw-post-body-paragraph kz la it lb b lc no ju le lf np jx lh li nq lk ll lm nr lo lp lq ns ls lt lu im bi translated">æˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ä¸ªæœ‰æ•ˆçš„è®¤è¯æµç¨‹ï¼Œè¿™å¾ˆå¥½ï¼Œä½†ä»æœ‰å¾ˆå¤§çš„æ”¹è¿›ç©ºé—´ã€‚è®©æˆ‘ä»¬ä»å¤„ç†åŠ è½½çŠ¶æ€å¼€å§‹ï¼Œå¹¶ç¡®ä¿åœ¨å‡ºé”™æ—¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚</p><p id="a70e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨æ‚¨çš„<code class="fe oh oi oj ok b">SignInForm</code>ç»„ä»¶ä¸­ï¼Œå¯¼å…¥<code class="fe oh oi oj ok b">useState</code>å¹¶ä½¿ç”¨å®ƒæ¥è®¾ç½®<code class="fe oh oi oj ok b">isLoading</code>å’Œ<code class="fe oh oi oj ok b">error</code>çš„çŠ¶æ€ã€‚å½“æˆ‘ä»¬æäº¤è¡¨å•æ—¶ï¼Œæˆ‘ä»¬å°†<code class="fe oh oi oj ok b">isLoading</code>è®¾ç½®ä¸º<code class="fe oh oi oj ok b">true</code>å¹¶æ¸…é™¤é”™è¯¯ã€‚å“åº”è¿”å›åï¼Œæˆ‘ä»¬å°†<code class="fe oh oi oj ok b">isLoading</code>è®¾ç½®å›<code class="fe oh oi oj ok b">false</code>ï¼Œåªæœ‰å½“å‡ºç°é”™è¯¯æ—¶ï¼Œæˆ‘ä»¬æ‰è®¾ç½®é”™è¯¯ã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="5886" class="or mx it ok b gy os ot l ou ov">import { useState } from 'react';</span><span id="a471" class="or mx it ok b gy pi ot l ou ov">const [isLoading, setIsLoading] = useState(false);<br/>const [error, setError] = useState(null);</span><span id="929f" class="or mx it ok b gy pi ot l ou ov">const onSubmit = (data: LoginData) =&gt; {<br/> setIsLoading(true);<br/> setError(null);<br/> return auth.signIn(data).then((response) =&gt; {<br/>  setIsLoading(false);<br/>  response.error ? setError(response.error) : router.push('/dashboard');<br/> });<br/>};</span></pre><p id="450a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å¦‚æœå­˜åœ¨é”™è¯¯ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨è¡¨å•ä¸­æ˜¾ç¤ºå‡ºæ¥:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="f720" class="or mx it ok b gy os ot l ou ov">{error?.message &amp;&amp; (<br/> &lt;div className="mb-4 text-red-500 text-center border-dashed border border-red-600 p-2 rounded"&gt;<br/>  &lt;span&gt;{error.message}&lt;/span&gt;<br/> &lt;/div&gt;<br/>)}</span></pre><p id="b272" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æˆ‘ä»¬ä¹Ÿå–œæ¬¢å‘ç”¨æˆ·æ˜¾ç¤ºæˆ‘ä»¬æ­£åœ¨è·å–æ•°æ®ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åœ¨<code class="fe oh oi oj ok b">isLoading</code>ä¸º<code class="fe oh oi oj ok b">true</code>æ—¶æ›´æ”¹æäº¤æŒ‰é’®çš„æ–‡æœ¬ã€‚</p><p id="4f13" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å› ä¸ºæˆ‘ä»¬åœ¨æ‰€æœ‰çš„è¡¨å•ä¸Šéƒ½ä½¿ç”¨è¿™ä¸ªæŒ‰é’®ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨çš„æŒ‰é’®ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒçš„åœ°æ–¹å¯¼å…¥å®ƒã€‚</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="812e" class="or mx it ok b gy os ot l ou ov">interface ButtonProps {<br/> title?: string;<br/> isLoading?: boolean;<br/>}</span><span id="b7aa" class="or mx it ok b gy pi ot l ou ov">const Button = ({<br/> isLoading,<br/> title,<br/> children,<br/> ...buttonProps<br/>}: ButtonProps &amp;<br/> React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;): JSX.Element =&gt; {<br/> return (<br/>  &lt;button<br/>   className="w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out"<br/>   {...buttonProps}<br/>  &gt;<br/>   {isLoading ? 'Loading...' : title}<br/>   {children}<br/>  &lt;/button&gt;<br/> );<br/>};</span><span id="4f4a" class="or mx it ok b gy pi ot l ou ov">export default Button;</span></pre><p id="2f38" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åœ¨è¡¨å•ç»„ä»¶ä¸­ä½¿ç”¨æŒ‰é’®:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="522a" class="or mx it ok b gy os ot l ou ov">import Button from 'components/elements/Button';</span><span id="498e" class="or mx it ok b gy pi ot l ou ov">...</span><span id="52ab" class="or mx it ok b gy pi ot l ou ov">&lt;Button title="Login" type="submit" isLoading={isLoading} /&gt;</span><span id="975d" class="or mx it ok b gy pi ot l ou ov">...</span></pre><p id="0f24" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">é‚£å¥½å¤šäº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ˜¾ç¤ºä¸€ä¸ªå¾®è°ƒå›¾æ ‡æ¥ä»£æ›¿â€œåŠ è½½â€¦â€æ–‡æœ¬ï¼Œè¿™æ ·ä¼šæ›´å¥½ã€‚</p><p id="b2bc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">åœ¨<code class="fe oh oi oj ok b">icons/spinner.tsx</code>ï¼Œåˆ›å»ºå¾®è°ƒå›¾æ ‡ç»„ä»¶:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="9c1c" class="or mx it ok b gy os ot l ou ov">const Spinner = (props: React.SVGProps&lt;SVGSVGElement&gt;): JSX.Element =&gt; {<br/> return (<br/>  &lt;svg viewBox="0 0 100 100" {...props}&gt;<br/>   &lt;path d="M90.9 58.2c-3.8 18.9-20.1 32.7-39.7 33-22 .4-40.7-17-41.9-39C8 28.5 26.9 8.8 50.4 8.8c19 0 35.5 13.1 40 31.2.3 1.2 1.4 2.1 2.7 2.1 1.8 0 3.1-1.7 2.7-3.5C90.6 18.1 72 3.3 50.4 3.3c-27.2 0-49 23.4-46.6 51.1 2.1 23 21 41.2 44 42.4C71.6 98 91.7 81.9 96.2 59.4c.3-1.7-1-3.3-2.7-3.3-1.3-.1-2.4.8-2.6 2.1z" /&gt;<br/>  &lt;/svg&gt;<br/> );<br/>};</span><span id="544a" class="or mx it ok b gy pi ot l ou ov">export default Spinner;</span></pre><p id="7d6a" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">ç°åœ¨ï¼Œåœ¨æˆ‘ä»¬çš„<code class="fe oh oi oj ok b">Button</code>ç»„ä»¶ä¸­ï¼Œç”¨å¾®è°ƒç»„ä»¶æ›¿æ¢åŠ è½½æ–‡æœ¬:</p><pre class="kj kk kl km gt on ok oo op aw oq bi"><span id="9a7e" class="or mx it ok b gy os ot l ou ov">{isLoading ? (<br/> &lt;Spinner width="20" fill="white" className="animate-spin" /&gt;<br/>) : (<br/> title<br/>)}</span></pre><p id="e81b" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">æ³¨æ„:ç¡®ä¿ä½ çš„ç‰ˆæœ¬è‡³å°‘æ˜¯1.7ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨<code class="fe oh oi oj ok b">animate-spin</code>ç±»ã€‚</p><p id="0d3e" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å™ªéŸ³ã€‚ç°åœ¨ï¼Œç»§ç»­ä¸ºæ³¨å†Œå’Œé‡ç½®å¯†ç è¡¨å•åšåŒæ ·çš„äº‹æƒ…ï¼Œä»Šå¤©åˆ°æ­¤ä¸ºæ­¢ã€‚</p></div><div class="ab cl mp mq hx mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="im in io ip iq"><h1 id="9861" class="mw mx it bd my mz na nb nc nd ne nf ng jz nh ka ni kc nj kd nk kf nl kg nm nn bi translated">æ‘˜è¦</h1><ul class=""><li id="becd" class="nt nu it lb b lc no lf np li pj lm pk lq pl lu ny nz oa ob bi translated">æˆ‘ä»¬ä¸ºèº«ä»½éªŒè¯è¡¨å•å®ç°äº†ä¸åŒçš„é¡µé¢ã€‚</li><li id="958e" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">æˆ‘ä»¬å·²ç»å®ç°äº†ç™»å½•ã€æ³¨å†Œå’Œé‡ç½®å¯†ç è¡¨å•ã€‚</li><li id="9b12" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">æˆ‘ä»¬åœ¨Firestoreæ•°æ®åº“ä¸­å­˜å‚¨é¢å¤–çš„ç”¨æˆ·æ•°æ®ï¼Œå¹¶åœ¨ç”¨æˆ·ç™»å½•æ—¶è·å–è¿™äº›æ•°æ®ã€‚</li><li id="847a" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ³¨é”€æŒ‰é’®ã€‚</li><li id="e197" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªuseAuthæŒ‚é’©ï¼Œå¹¶ä½¿ç”¨ä¸Šä¸‹æ–‡APIå‘æ‰€æœ‰ç»„ä»¶æä¾›ç”¨æˆ·æ•°æ®ã€‚</li><li id="0329" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">æ¯å½“æˆ‘ä»¬è·å–æ•°æ®æ—¶ï¼Œæˆ‘ä»¬æ˜¾ç¤ºä¸€ä¸ªåŠ è½½å¾®è°ƒå›¾æ ‡ã€‚</li><li id="46d0" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">æ¯å½“å‡ºç°é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€‚</li><li id="c8e0" class="nt nu it lb b lc oc lf od li oe lm of lq og lu ny nz oa ob bi translated">æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªé’©å­ï¼Œå½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªç»è¿‡èº«ä»½éªŒè¯ä½†æ²¡æœ‰ç™»å½•æ—¶ï¼Œå®ƒå¯ä»¥é‡å®šå‘ç”¨æˆ·ã€‚</li></ul><p id="08dc" class="pw-post-body-paragraph kz la it lb b lc ld ju le lf lg jx lh li lj lk ll lm ln lo lp lq lr ls lt lu im bi translated">å°±æ˜¯è¿™æ ·ï¼æ„Ÿè°¢é˜…è¯»ã€‚æˆ‘å¸Œæœ›å®ƒæœ‰å¸®åŠ©ã€‚ç¥ä½ é¡¹ç›®çš„ä¸‹ä¸€æ­¥é¡ºåˆ©ã€‚</p></div></div>    
</body>
</html>