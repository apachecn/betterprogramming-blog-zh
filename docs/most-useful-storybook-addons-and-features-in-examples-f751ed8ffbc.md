# 9 ä¸ªæœ€æœ‰ç”¨çš„æ•…äº‹ä¹¦æ’ä»¶å’ŒåŠŸèƒ½ç¤ºä¾‹

> åŸæ–‡ï¼š<https://betterprogramming.pub/most-useful-storybook-addons-and-features-in-examples-f751ed8ffbc>

## æ’ä»¶è§£é”æ•…äº‹ä¹¦çš„é«˜çº§åŠŸèƒ½å’Œæ–°å·¥ä½œæµç¨‹

![](img/b2516064458be17583ff9ef1e9d5cf07.png)

# å°†æ¶µç›–å“ªäº›å†…å®¹

*   [é“¾æ¥](#e086)ï¼›
*   [å¯è¾¾æ€§](#5b08)ï¼›
*   [è®¾è®¡](#c217)ï¼›
*   [æ•…äº‹æ¥æº](#9f8d)ï¼›
*   [æ¨¡æ‹ŸæœåŠ¡äººå‘˜](#82dd)ï¼›
*   [@æ•…äº‹ä¹¦/æµ‹è¯•-ååº”](#595f)ï¼›
*   [äº’åŠ¨](#496c)ï¼›
*   [åŠéŸ³é˜¶](#0779)ï¼›
*   [ä¼ªå·](#15fc)ï¼›

**æ³¨æ„**:åœ¨ä½ çš„é¡¹ç›®ä¸­æ·»åŠ äº†æ’ä»¶ä¾èµ–åï¼Œä½ éœ€è¦æ›´æ–°`**.storybook/main.js**`æ–‡ä»¶ä¸­çš„`**addons**`æ•°ç»„ã€‚

![](img/fb1226792b2360ba1b1ca226f984f091.png)

æˆ‘ä»¬å¼€å§‹å§ã€‚

# é“¾æ¥

å°†æ•…äº‹é“¾æ¥åœ¨ä¸€èµ·ï¼Œç”¨æ‚¨çš„ UI ç»„ä»¶æ„å»ºæ¼”ç¤ºå’ŒåŸå‹ã€‚

```
yarn add -D @storybook/addon-links
```

[](https://storybook.js.org/addons/@storybook/addon-links/) [## é“¾æ¥æ’ä»¶|æ•…äº‹ä¹¦

### æ•…äº‹ä¹¦é“¾æ¥æ’ä»¶å¯ä»¥ç”¨æ¥åˆ›å»ºé“¾æ¥ï¼Œåœ¨æ•…äº‹ä¹¦çš„æ•…äº‹ä¹‹é—´å¯¼èˆªã€‚

storybook.js.org](https://storybook.js.org/addons/@storybook/addon-links/) 

`linkTo`ä¸¾ä¾‹:

ç»“æœ:

![](img/ec8f598548efc81bed14eebbc7a3e1b5.png)

`withLinks`ä¸¾ä¾‹:

# æ˜“æ¥è¿‘

æµ‹è¯•ç»„ä»¶æ˜¯å¦ç¬¦åˆ web å¯è®¿é—®æ€§æ ‡å‡†ã€‚

```
yarn add @storybook/addon-a11y --dev
```

[](https://storybook.js.org/addons/@storybook/addon-a11y/) [## è¾…åŠ©åŠŸèƒ½æ’ä»¶|æ•…äº‹ä¹¦

### è¿™ä¸ªæ•…äº‹ä¹¦æ’ä»¶æœ‰åŠ©äºä½¿ä½ çš„ UI ç»„ä»¶æ›´æ˜“è®¿é—®ã€‚æ¡†æ¶æ”¯æŒé¦–å…ˆï¼Œå®‰è£…â€¦

storybook.js.org](https://storybook.js.org/addons/@storybook/addon-a11y/) 

ç»“æœ:

![](img/378191affc7adb581b1b68ba194ecf9a.png)

æ­¤å¤–ï¼Œæ‚¨å¯ä»¥æ£€æŸ¥è¾…åŠ©åŠŸèƒ½å·¥å…·æ :

![](img/c4229fb4c28eb3e911ea9e73561de3f5.png)

# **è®¾è®¡**

æ•…äº‹ä¹¦æ’ä»¶ï¼Œç”¨äºåœ¨æ’ä»¶é¢æ¿ä¸­åµŒå…¥ä½ çš„è®¾è®¡é¢„è§ˆã€‚

```
yarn add -D storybook-addon-designs
```

[](https://storybook.js.org/addons/storybook-addon-designs/) [## è®¾è®¡æ’ä»¶|æ•…äº‹ä¹¦

### ä¸€ä¸ªæ•…äº‹ä¹¦æ’ä»¶ï¼Œåœ¨æ’ä»¶é¢æ¿ä¸­åµŒå…¥ Figma æˆ–ç½‘ç«™ï¼Œä»¥ä¾¿æ›´å¥½åœ°è®¾è®¡å¼€å‘å·¥ä½œæµç¨‹ã€‚è¿™ä¸ªæ’ä»¶â€¦

storybook.js.org](https://storybook.js.org/addons/storybook-addon-designs/) 

ç¤ºä¾‹:

ç»“æœ:

![](img/8e124670238939141fa5cb5c1a295183.png)

# **æ•…äº‹æ¥æº**

æŸ¥çœ‹æ•…äº‹çš„æºä»£ç ï¼Œäº†è§£å…¶å·¥ä½œåŸç†ï¼Œå¹¶å°†å…¶ç²˜è´´åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ã€‚

```
yarn add @storybook/addon-storysource -D
```

[](https://storybook.js.org/addons/@storybook/addon-storysource/) [## æ•…äº‹ä¹¦

### è¿™ä¸ªæ’ä»¶ç”¨äºåœ¨æ’ä»¶é¢æ¿ä¸­æ˜¾ç¤ºæ•…äº‹æºã€‚

storybook.js.org](https://storybook.js.org/addons/@storybook/addon-storysource/) 

ç»“æœ:

![](img/3648c57f3437a9cb43332d076e49fb78.png)

# **æ¨¡æ‹ŸæœåŠ¡å‘˜**

ç”¨æ¨¡æ‹ŸæœåŠ¡äººå‘˜åœ¨æ•…äº‹ä¹¦ä¸­æ¨¡æ‹Ÿ API è¯·æ±‚ã€‚

## ç‰¹å¾

*   åœ¨æ‚¨çš„æ•…äº‹ä¸­æ¨¡æ‹Ÿ Rest å’Œ GraphQL è¯·æ±‚ã€‚
*   è®°å½•ç»„ä»¶åœ¨å„ç§åœºæ™¯ä¸­çš„è¡Œä¸ºã€‚
*   å…è´¹ä½¿ç”¨å…¶ä»–æ’ä»¶è·å¾— a11yã€å¿«ç…§å’Œè§†è§‰æµ‹è¯•ã€‚

[](https://storybook.js.org/addons/msw-storybook-addon/) [## æ¨¡æ‹ŸæœåŠ¡äººå‘˜æ’ä»¶|æ•…äº‹ä¹¦

### åœ¨æ‚¨çš„æ•…äº‹ä¸­æ¨¡æ‹Ÿ Rest å’Œ GraphQL è¯·æ±‚ã€‚è®°å½•ç»„ä»¶åœ¨å„ç§åœºæ™¯ä¸­çš„è¡Œä¸ºã€‚è·å¾—â€¦

storybook.js.org](https://storybook.js.org/addons/msw-storybook-addon/) 

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–æ¨¡æ‹ŸæœåŠ¡å·¥ä½œè€…æ¥å¯ç”¨å…¨å±€æ¨¡æ‹Ÿã€‚è¿™äº›ä¹Ÿå¯ä»¥åœ¨æ‚¨çš„å¼€å‘ç¯å¢ƒä¸­å¯ç”¨ã€‚

[](https://mswjs.io/) [## æ¨¡æ‹ŸæœåŠ¡äººå‘˜

### é€šè¿‡åœ¨ç½‘ç»œå±‚æ‹¦æˆªè¯·æ±‚æ¥æ¨¡ä»¿ã€‚æ— ç¼é‡ç”¨ç›¸åŒçš„æ¨¡æ‹Ÿå®šä¹‰è¿›è¡Œæµ‹è¯•ã€å¼€å‘â€¦

mswjs.io](https://mswjs.io/) 

å°† [msw](https://www.npmjs.com/package/msw) å’Œ [msw-storybook-addon](https://www.npmjs.com/package/msw-storybook-addon) åº“æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­:

```
**yarn** add msw msw-storybook-addon -D
```

è¿è¡Œ MSW init å‘½ä»¤:

```
**npx** msw init public/ --save
```

å®ƒå°†åˆ›å»º`public/mockServiceWorker.js`æ–‡ä»¶:

![](img/9e61c719c078416fbc036ca42002d815.png)

æ¥ä¸‹æ¥ï¼Œç”¨`.storybook/main.js`æ–‡ä»¶ä¸­çš„`msw-storybook-addon`æ›´æ–° **addon** æ•°ç»„:

![](img/fb1226792b2360ba1b1ca226f984f091.png)

æ›´æ–°`.storybook/preview.js`æ–‡ä»¶

![](img/a2178f86a6d1cb75f02806817a15cd65.png)

æ¥ä¸‹æ¥ï¼Œç”¨ msw decorator æ›´æ–°æ‚¨çš„æ•…äº‹ï¼Œå¹¶æ·»åŠ  API æ¨¡æ‹Ÿ:

![](img/2d55ee5dae08a3ed9ac8d00749b3a732.png)

ç¤ºä¾‹:

# **@ story book/testing-react**

å…è®¸ä½ åœ¨å•å…ƒæµ‹è¯•ä¸­é‡ç”¨ä½ çš„æ•…äº‹çš„æµ‹è¯•å·¥å…·ã€‚

```
yarn add @storybook/testing-react -D
```

[](https://storybook.js.org/addons/@storybook/testing-react/) [## @ story book/testing-react Addon | story book

### å…è®¸ä½ åœ¨å•å…ƒæµ‹è¯•ä¸­é‡ç”¨ä½ çš„æ•…äº‹çš„æµ‹è¯•å·¥å…·ä½ æ­£åœ¨ä¸ºä½ çš„ç»„ä»¶ä½¿ç”¨æ•…äº‹ä¹¦â€¦

storybook.js.org](https://storybook.js.org/addons/@storybook/testing-react/) 

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„ç»„ä»¶:

ä¸‰ä¸ªç®€å•çš„æ•…äº‹:

*   è£…è½½çŠ¶æ€ï¼›
*   æ•°æ®æˆåŠŸæå–çŠ¶æ€ï¼›
*   é”™è¯¯çŠ¶æ€ï¼›

æ•…äº‹

![](img/d263abce8c173af56e4b1fdb927b0fa3.png)![](img/c943a50ab54c29386f22c86bfff07a02.png)![](img/6a70bb3c62bd59a2c37c299866347fcf.png)

æˆ‘ä»¬å·²ç»æœ‰äº†æ¨¡æ‹Ÿæ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦åœ¨æµ‹è¯•ä¸­å†æ¬¡è¿™æ ·åšã€‚æˆ‘ä»¬å¯ä»¥é‡å¤ä½¿ç”¨æˆ‘ä»¬çš„æ•…äº‹:

# ç›¸äº’ä½œç”¨

æ•…äº‹ä¹¦æ’ä»¶äº¤äº’æ”¯æŒå¯¹[æ•…äº‹ä¹¦](https://storybook.js.org/)ä¸­çš„äº¤äº’å’Œæµ‹è¯•è¿›è¡Œå¯è§†åŒ–è°ƒè¯•ã€‚

```
yarn add -D @storybook/addon-interactions @storybook/jest @storybook/testing-library
```

[](https://storybook.js.org/addons/@storybook/addon-interactions/) [## äº’åŠ¨æ’ä»¶|æ•…äº‹ä¹¦

### æ•…äº‹ä¹¦æ’ä»¶äº¤äº’æ”¯æŒå¯¹æ•…äº‹ä¹¦ä¸­çš„äº¤äº’å’Œæµ‹è¯•è¿›è¡Œå¯è§†åŒ–è°ƒè¯•ã€‚é€šè¿‡â€¦å®‰è£…æ­¤æ’ä»¶

storybook.js.org](https://storybook.js.org/addons/@storybook/addon-interactions/) 

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„ç»„ä»¶ã€‚æˆ‘ä»¬æœ‰å¾ˆå¤šä¸åŒçš„æ¡ä»¶:

ä½¿ç”¨[äº¤äº’](https://storybook.js.org/addons/@storybook/addon-interactions/)æ’ä»¶ï¼Œæ‚¨ä¸éœ€è¦ä¸€æ¬¡åˆä¸€æ¬¡åœ°æ‰‹åŠ¨éµå¾ªç»„ä»¶æ­¥éª¤:

![](img/4c710a77b93320d9bd7b3e4b9c2d1315.png)

ä½¿ç”¨`play`åŠŸèƒ½ï¼Œä½ å¯ä»¥æè¿°äº¤äº’æ­¥éª¤ï¼Œæ•…äº‹ä¹¦å°†ä¼šé‡ç°å®ƒä»¬ã€‚

å»¶è¿Ÿçš„ç»“æœ:

![](img/c8b46658fc7f731cddc5603b3b88334e.png)

æ²¡æœ‰å»¶è¿Ÿçš„ç»“æœ(å¯¹æµ‹è¯•æœ‰ç”¨):

![](img/86c1701c0ecc85599d4711c0922bb156.png)

âš ï¸ **æ³¨**:è™½ç„¶æŠ€æœ¯ä¸Šå¯ä»¥ä½¿ç”¨`screen`ï¼Œä½†å»ºè®®ä½¿ç”¨`within(canvasElement)`ã€‚é™¤äº†åœ¨æ‰¾ä¸åˆ° DOM å…ƒç´ æ—¶ç»™ä½ ä¸€ä¸ªæ›´å¥½çš„é”™è¯¯æ¶ˆæ¯ï¼Œå®ƒè¿˜èƒ½ç¡®ä¿ä½ çš„ play å‡½æ•°ä¸æ•…äº‹ä¹¦æ–‡æ¡£å…¼å®¹ã€‚

![](img/3d3e9446c8ef1011117f5f3041e7b9ba.png)

âš ï¸:æ³¨æ„:ä½ ä¹Ÿå¯ä»¥åœ¨æµ‹è¯•ä¸­é‡ç”¨æ’­æ”¾åŠŸèƒ½

# å½©è‰²çš„

è·¨æµè§ˆå™¨è‡ªåŠ¨åŒ–è§†è§‰æµ‹è¯•ã€‚æ”¶é›†ç”¨æˆ·ç•Œé¢åé¦ˆã€‚ç‰ˆæœ¬åŒ–æ–‡æ¡£ã€‚ä½ å¯ä»¥åœ¨æˆ‘çš„å¦ä¸€ä¸ªæ•…äº‹ä¸­æ‰¾åˆ°ç­”æ¡ˆ:

[](https://artem-diashkin.medium.com/react-and-chromatic-automated-visual-regression-testing-22551b8ebc93) [## ååº”å’Œè‰²åº¦ã€‚è‡ªåŠ¨åŒ–è§†è§‰å›å½’æµ‹è¯•

### ä¸€æ­¥ä¸€æ­¥çš„è‡ªåŠ¨åŒ–è§†è§‰å›å½’æµ‹è¯•

artem-diashkin.medium.com](https://artem-diashkin.medium.com/react-and-chromatic-automated-visual-regression-testing-22551b8ebc93) 

# ä¼ªçŠ¶æ€

æ•…äº‹ä¹¦çš„ CSS ä¼ªçŠ¶æ€ã€‚

```
yarn add storybook-addon-pseudo-states -D
```

[](https://storybook.js.org/addons/storybook-addon-pseudo-states) [## ä¼ªå›½å®¶æ’ä»¶|æ•…äº‹ä¹¦

### åœ¨ Storybook ä¸­åˆ‡æ¢ç»„ä»¶çš„ CSS ä¼ªçŠ¶æ€ã€‚è¿™ä¸ªæ’ä»¶è¯•å›¾â€œå¼ºè¿«â€ä½ çš„ç»„ä»¶çš„ä¼ªâ€¦

storybook.js.org](https://storybook.js.org/addons/storybook-addon-pseudo-states) 

ç»“æœ:

![](img/331e326454b7d707d12fcaeaff5ed7aa.png)

ç¤ºä¾‹:

![](img/e2a3afd10f155db09b59a42ff7bd5ab0.png)

# **æ€§èƒ½**

ä¸€ä¸ªæ•…äº‹ä¹¦æ’ä»¶ï¼Œå¸®åŠ©æ›´å¥½åœ°ç†è§£å’Œè°ƒè¯• React ç»„ä»¶çš„æ€§èƒ½

```
yarn add storybook-addon-performance --dev
```

[](https://storybook.js.org/addons/storybook-addon-performance/) [## æ€§èƒ½æ’ä»¶|æ•…äº‹ä¹¦

### ä¸€ä¸ªæ•…äº‹ä¹¦æ’ä»¶ï¼Œå¸®åŠ©æ›´å¥½åœ°ç†è§£å’Œè°ƒè¯• React ç»„ä»¶çš„æ€§èƒ½ğŸš§è¿™ä¸ªæ’ä»¶æ˜¯å®éªŒæ€§çš„â€¦

storybook.js.org](https://storybook.js.org/addons/storybook-addon-performance/) 

`.storybook/main.js`æ–‡ä»¶æ›´æ–°:

```
module.exports = {
  addons: ['storybook-addon-performance/register'],
};
```

ç»„ä»¶ç¤ºä¾‹:

æ•…äº‹:

ç»“æœ:

![](img/e0ebd5ab7d70de2a92ec0f03544593bb.png)

æ‚¨å¯ä»¥é€‰æ‹©è¦æ¸²æŸ“ç»„ä»¶çš„å¤šå°‘ä¸ªå‰¯æœ¬ï¼Œç„¶åå•å‡»`**Start all**` **ã€‚ç»“æœæ¯æ¬¡éƒ½ä¼šæ›´æ–°æ²¡æœ‰ä¿å­˜ï¼Œä½†æ˜¯â€¦â€¦**

å¦‚æœæ‚¨ç‚¹å‡»`**Pin as baseline**`æŒ‰é’®ï¼Œå¯¹æ‚¨çš„ç»„ä»¶è¿›è¡Œæ›´æ”¹ï¼Œå¹¶å†æ¬¡ç‚¹å‡»`**Start all**`ï¼Œæ‚¨å°†çœ‹åˆ°ä¸åŒä¹‹å¤„ã€‚

æˆ‘å°†æ·»åŠ ä¸€ä¸ªç®€å•çš„ onClick å‡½æ•°ï¼Œå¹¶é‡æ–°å¯åŠ¨:

![](img/661573e00299804cfe262714ad353c6c.png)

ç»“æœç»è¿‡`Start all`:

![](img/a23f72fa5543d666d3f9167ffc36ae21.png)

GitHub repo çš„é“¾æ¥:

[](https://github.com/nemrosim/react-visual-regression-testing-example) [## GitHub-nemrosim/react-visual-regression-testing-example

### æ­¤æ—¶æ‚¨ä¸èƒ½æ‰§è¡Œè¯¥æ“ä½œã€‚æ‚¨å·²ä½¿ç”¨å¦ä¸€ä¸ªæ ‡ç­¾é¡µæˆ–çª—å£ç™»å½•ã€‚æ‚¨å·²åœ¨å¦ä¸€ä¸ªé€‰é¡¹å¡ä¸­æ³¨é”€ï¼Œæˆ–è€…â€¦

github.com](https://github.com/nemrosim/react-visual-regression-testing-example)