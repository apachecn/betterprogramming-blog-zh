# TypeScript 4.3 æœ‰ä»€ä¹ˆæ–°åŠŸèƒ½ï¼Ÿ

> åŸæ–‡ï¼š<https://betterprogramming.pub/whats-new-in-typescript-4-3-72f74289e765>

## TypeScript çš„æƒŠäººå¢é‡å‡çº§

![](img/fa079f3cc87ef974fa7ac54de952690d.png)

å‡¯æ–‡Â·Ku åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šæ‹æ‘„çš„ç…§ç‰‡ã€‚

TypeScript 4.3 äº 5 æœˆ 26 æ—¥å‘å¸ƒğŸ‰ã€‚å‘å¸ƒçš„é¡¶çº§åŠŸèƒ½æœ‰å“ªäº›ï¼Ÿå®ƒä»¬ä¼šæé«˜æˆ‘ä»¬çš„ç”Ÿäº§ç‡å—ï¼Ÿæ˜¯å¦åº”è¯¥ç«‹å³æ›´æ–°ï¼Ÿ

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ç»å†æ‰€æœ‰æœ€ä»¤äººå…´å¥‹çš„ã€‚ä»¥ä¸‹æ˜¯æ€»ç»“:

*   `import`æŠ¥è¡¨åŠ©æ‰‹
*   å±æ€§ä¸Šçš„ç‹¬ç«‹å†™å…¥ç±»å‹
*   é‡å†™æ–¹æ³•
*   æ¨¡æ¿å­—ç¬¦ä¸²ç±»å‹æ”¹è¿›
*   ECMAScript `#private`ç±»å…ƒç´ 
*   æ¡ä»¶å¥ä¸­ç¼ºå°‘`await`çš„é”™è¯¯
*   é™æ€ç´¢å¼•ç­¾å
*   æ”¹è¿›äº†å¯¹çŸ¥åç¬¦å·çš„æ”¯æŒ

# å¯¼å…¥æŠ¥è¡¨åŠ©æ‰‹

è¿™ä¸ªç‰ˆæœ¬ä¸­æœ€é…·çš„ç‰¹æ€§ä¹‹ä¸€å®é™…ä¸Šå°†ä¼šå†…ç½®åˆ°æ‚¨çš„ç¼–è¾‘å™¨ä¸­:æ”¯æŒ`import`è¯­å¥ã€‚

ç°åœ¨ï¼Œå½“ä½¿ç”¨`import`è¯­æ³•æ—¶ï¼ŒTypeScript å°†ä¸ºæ‚¨æä¾›ä¸€ä¸ªå¯¼å…¥å€™é€‰é¡¹çš„åˆ—è¡¨ã€‚å½“æ‚¨é€‰æ‹©ä¸€ä¸ªæ—¶ï¼Œ`import`è¯­å¥å°†è‡ªåŠ¨ä¸ºæ‚¨ç”Ÿæˆã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­:

![](img/70310a38670546ca201d3444f302d2a0.png)

å¯¼å…¥è‡ªåŠ¨å®Œæˆä¸€ç›´æ˜¯ä¸ªéš¾é¢˜ã€‚é—®é¢˜æ˜¯åœ¨ ES å¯¼å…¥ä¸­ï¼Œå¯¼å…¥çš„å®ä½“åœ¨å¯¼å…¥ä½ç½®ä¹‹å‰ã€‚å¦‚æœå¯¼å…¥è¯­æ³•é¢ å€’è¿‡æ¥ï¼Œå¯¹å¼€å‘äººå‘˜æ¥è¯´ä¼šæ›´å®¹æ˜“:

```
// an example of a more intuitive import statementfrom 'react' import { useState }
```

æœ‰ä¸€äº›`VS Code`æ’ä»¶å¯¹æ­¤æœ‰æ‰€å¸®åŠ©ï¼Œä½†æ²¡æœ‰ä»€ä¹ˆåƒå†…ç½®åŠŸèƒ½ä¸€æ ·ã€‚

# å±æ€§ä¸Šçš„ç‹¬ç«‹å†™å…¥ç±»å‹

å¦‚æœæ‚¨ç»å¸¸ä½¿ç”¨ TypeScript çš„å…¬å…±è®¿é—®å™¨ï¼Œæ‚¨å¾ˆå¯èƒ½ä¼šçœ‹åˆ°è¿™ä¸ªé”™è¯¯:`'get' and 'set' accessors must have the same type`ã€‚å½“`get`å’Œ`set`å…¬å…±è®¿é—®å™¨æ²¡æœ‰å®Œå…¨ç›¸åŒçš„ç±»å‹æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚

è®©æˆ‘ä»¬ç”¨ä»¥å‰çš„ç‰ˆæœ¬æ¥çœ‹ä¸€ä¸ªä¾‹å­:

å‡çº§åˆ° TypeScript 4.3 åï¼Œæ­¤ä»£ç æ— éœ€ä»»ä½•æ›´æ”¹å³å¯è¿è¡Œã€‚

æˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°æ§åˆ¶å¦‚ä½•å®šä¹‰æˆ‘ä»¬çš„ getters å’Œ setters ä»¥åŠå®ƒä»¬çš„ç­¾åæ–¹æ³•ï¼Œè¿™æ€»æ˜¯å¾ˆæ£’çš„ã€‚

# é‡å†™æ–¹æ³•

åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ï¼Œå¢åŠ äº†ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„å…³äº OOP çš„å…³é”®å­—:`override`ã€‚ä»¥å‰ï¼Œæ˜¾å¼é‡å†™çˆ¶æ–¹æ³•æ˜¯ä¸å¯èƒ½çš„ã€‚å®ƒå¿…é¡»ä»¥ä¸€ç§å«è“„çš„æ–¹å¼å®Œæˆ:

çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œä¸æ¸…æ¥šè¿™æ˜¯å¼€å‘äººå‘˜æœ‰æ„ä¸ºä¹‹çš„è¡Œä¸ºè¿˜æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä»æˆ‘ä»¬çš„`Foo`å¯¹è±¡ä¸­ç§»é™¤`bar`æ–¹æ³•ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ²¡ä»€ä¹ˆã€‚ä»£ç ä»ç„¶æœ‰æ•ˆã€‚è¿™æ˜¯å¼€å‘å•†çš„æ„å›¾å—ï¼Ÿçœ‹ç¼–è¯‘å™¨å¾ˆéš¾çŸ¥é“ã€‚

åœ¨ 4.3 ä¸­ï¼Œå¢åŠ äº†ä¸€ä¸ªæ–°çš„æ——å¸œ:`--noImplicitOverride`ã€‚è¿™å°†ä½¿ä¸Šé¢çš„ä»£ç å¤±è´¥ï¼Œå¹¶å‡ºç°ä»¥ä¸‹é”™è¯¯:

```
This member must have an 'override' modifier because it overrides a member in the base class 'Foo'
```

è¿™å°†é˜²æ­¢ä»»ä½•éšå¼è¦†ç›–ã€‚ä½ å¯ä»¥å‘ç¼–è¯‘å™¨æš—ç¤ºä½ çš„ç¼–ç æ„å›¾ã€‚

å¯ç”¨æ ‡å¿—`--noImplicitOverride`æ„å‘³ç€åˆ›å»ºè¦†ç›–æ–¹æ³•çš„å”¯ä¸€æ–¹å¼æ˜¯ä½¿ç”¨æ–°æ·»åŠ çš„`override`å…³é”®å­—ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­:

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬ä»`Foo`ç±»ä¸­ç§»é™¤`bar`æ–¹æ³•ï¼Œæˆ‘ä»¬å°†é¢ä¸´ä»¥ä¸‹é”™è¯¯:

```
This member cannot have an 'override' modifier because it is not declared in the base class 'Foo'
```

è¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºæ„Ÿè§‰ä¸Šæˆ‘ä»¬æ›´èƒ½æ§åˆ¶æ–¹å‘ç›˜ã€‚

# æ¨¡æ¿å­—ç¬¦ä¸²ç±»å‹æ”¹è¿›

æ¨¡æ¿æ–‡å­—ç±»å‹æ˜¯åœ¨ 4.1 ä¸­å¼•å…¥çš„ã€‚ä»é‚£ä»¥åï¼Œæ¯ä¸ª TypeScript ç‰ˆæœ¬éƒ½åŒ…å«äº†ä¸€äº›æ”¹è¿›ã€‚

å½“ä½¿ç”¨ä¸ string ç»„åˆçš„æ¨¡æ¿ç±»å‹æ—¶ï¼ŒTypeScript ç°åœ¨å°†å°è¯•å°†è¿™äº›ç±»å‹æ¨æ–­ä¸ºæ¨¡æ¿ç±»å‹ã€‚

è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­:

è¿™åŒæ ·é€‚ç”¨äºç±»å‹æ¨æ–­ã€‚è®©æˆ‘ä»¬æ¯”è¾ƒä¸€ä¸‹ä»¥å‰ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬çš„è¾“å‡º:

ç”±äº TypeScript è¯•å›¾å°†è¿™äº›å­—ç¬¦ä¸²æ¨æ–­ä¸ºæ¨¡æ¿ç±»å‹ï¼Œæ‰€ä»¥ä¸€åˆ‡æ­£å¸¸ã€‚TypeScript ç°åœ¨å¯ä»¥æ›´å¥½åœ°ç†è§£æ¨¡æ¿ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·åš:

# æ”¹è¿›çš„#private ç±»è®¿é—®å™¨

ä» 3.8 ç‰ˆæœ¬å¼€å§‹ï¼Œ`private`è®¿é—®å™¨å°±æ˜¯ TypeScript ä¸­çš„ä¸€ä¸ªç‰¹æ€§ã€‚

æ¦‚æ‹¬ä¸€ä¸‹:

> "é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»å±æ€§æ˜¯å…¬å…±çš„ï¼Œå¯ä»¥åœ¨ç±»å¤–æ£€æŸ¥æˆ–ä¿®æ”¹ã€‚ç„¶è€Œ[æœ‰ä¸€ä¸ªé˜¶æ®µ 3 æè®®](https://github.com/tc39/proposal-private-methods)å…è®¸ä½¿ç”¨æ•£åˆ—å‰ç¼€`#`å®šä¹‰ç§æœ‰ç±»å­—æ®µã€‚
> 
> â€¦
> 
> ç§æœ‰å­—æ®µå¯ä»¥åœ¨ç±»æ„é€ å‡½æ•°ä¸Šä»ç±»å£°æ˜æœ¬èº«å†…éƒ¨è®¿é—®ã€‚â€â€” [MDN ç½‘ç»œæ–‡æ¡£](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_class_fields)

ç„¶è€Œï¼Œç›´åˆ°ç°åœ¨ï¼Œæœ‰äº›äº‹æƒ…ä½ è¿˜ä¸èƒ½åš:

*   ç”¨`private`ä¿®é¥°ç¬¦å£°æ˜ä¸€ä¸ªæ–¹æ³•ã€‚
*   ç”¨`private`ä¿®é¥°ç¬¦å£°æ˜ä¸€ä¸ª getterã€‚
*   ç”¨`private`ä¿®é¥°ç¬¦å£°æ˜ä¸€ä¸ªé™æ€å±æ€§ã€‚

æœ‰äº†è¿™ä¸ªæ–°ç‰ˆæœ¬ï¼Œä»¥ä¸Šæ‰€æœ‰éƒ½æˆä¸ºå¯èƒ½ã€‚è¿™ä¸ªç‰¹æ€§ç°åœ¨å‡ ä¹å®Œå…¨ç¬¦åˆ ECMAScript `private`ä¿®é¥°ç¬¦çš„å®šä¹‰ã€‚

# æ¡ä»¶ä¸­ç¼ºå°‘ await çš„é”™è¯¯

ä»ç°åœ¨å¼€å§‹ï¼Œå½“å¯ç”¨`strictNullChecks`é…ç½®æ—¶ï¼ŒTypeScript åœ¨æ–­è¨€ä¸€ä¸ªæ‰¿è¯ºæ—¶ä¼šç»™å‡ºä¸€ä¸ªé”™è¯¯ã€‚

é‚£ä¸ªæ¡ä»¶æ€»æ˜¯`true`ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨è¦æ±‚ä½ æ”¹å˜`if`è¯­å¥ã€‚

# é™æ€ç´¢å¼•ç­¾å

ç´¢å¼•ç­¾åæ˜¯æˆ‘ä»¬ä¹ æƒ¯ç›´è§‚ä½¿ç”¨çš„ä¸œè¥¿ã€‚å®ƒä»¥éšå¼è€Œä¸æ˜¯æ˜¾å¼çš„æ–¹å¼å£°æ˜å±æ€§ã€‚

åªè¦ç¬¦åˆç´¢å¼•ç­¾åï¼Œå°±å¯ä»¥å£°æ˜æ˜¾å¼å˜é‡ã€‚

æ—¢ç„¶æˆ‘ä»¬å·²ç»äº†è§£äº†ä»€ä¹ˆæ˜¯ç´¢å¼•ç­¾åï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªæ–°ç‰ˆæœ¬ä¸­æœ‰ä»€ä¹ˆå˜åŒ–å‘¢ï¼Ÿå˜åŒ–å…¶å®å¾ˆç®€å•:`static`å€¼ç°åœ¨æ”¯æŒç´¢å¼•ç­¾åã€‚

åœ¨ 4.3 ä¹‹å‰ï¼Œå°†æ˜¾ç¤ºæ¶ˆæ¯`'static' modifier cannot appear on an index signature.`ã€‚

# æ”¹è¿›äº†å¯¹çŸ¥åç¬¦å·çš„æ”¯æŒ

æ·»åŠ äº†å¯¹ä¼—æ‰€å‘¨çŸ¥çš„ TypeScript ç¬¦å·çš„æ”¯æŒã€‚é‚£äº›æ˜¯ä»€ä¹ˆï¼Ÿå†…ç½®åœ¨ TypeScript ä¸­çš„`Symbol.*`ã€‚

# æœ€åçš„æƒ³æ³•

è¿™æ˜¯å¦ä¸€ä¸ªå¾ˆå¥½çš„ç‰ˆæœ¬ï¼ŒåŒ…å«äº†è®¸å¤šå°çš„ã€æœ‰ç”¨çš„ä¸œè¥¿ã€‚å¾ˆé«˜å…´çœ‹åˆ°æ¨¡æ¿æ–‡å­—åŠŸèƒ½è¶Šæ¥è¶Šæˆç†Ÿã€‚

å±•æœ›æœªæ¥ï¼Œæˆ‘å¾ˆæœŸå¾…çœ‹åˆ°`Generalized index signatures`æ˜¯å¦èƒ½è¿›å…¥ä¸‹ä¸€ä¸ªç‰ˆæœ¬ã€‚ä»–ä»¬å·²ç»è®¡åˆ’äº†å‡ ä¸ªç‰ˆæœ¬ï¼Œä½†ä»æœªå®ç°ã€‚è¿™æ˜¯ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿç®€è€Œè¨€ä¹‹ï¼Œå®ƒæ˜¯åœ¨ä¸€ä¸ªç±»å‹ä¸Šå®šä¹‰å¤šä¸ªç±»å‹é”®çš„èƒ½åŠ›:

```
interface PropertyMap {
  [x: string | number | symbol]: string;
}
```

ç›®å‰ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹é”™è¯¯æ¶ˆæ¯:

```
An index signature parameter type must be either 'string' or 'number'
```

å¯ä»¥åœ¨ GitHub ä¸Šè·Ÿè¿› PR [ã€‚](https://github.com/microsoft/TypeScript/pull/26797)

# **ç›¸å…³æ–‡ç« **

[](/top-5-typescript-features-you-should-master-2358db9ab3d5) [## æ‚¨åº”è¯¥æŒæ¡çš„äº”å¤§æ‰“å­—ç¨¿åŠŸèƒ½

### ä½¿ç”¨è¿™äº›å¿…é¡»çŸ¥é“çš„ç‰¹æ€§æ¥æé«˜æ‚¨çš„æ‰“å­—ç¨¿çŸ¥è¯†

better ç¼–ç¨‹. pub](/top-5-typescript-features-you-should-master-2358db9ab3d5) [](/typescript-a-gentle-introduction-to-mapped-types-f65e45fa2598) [## TypeScript:æ˜ å°„ç±»å‹çš„ç®€æ˜ä»‹ç»

### å­¦ä¹ æ„å»ºè‡ªå·±çš„ä¸€å¥— TypeScript å·¥å…·

better ç¼–ç¨‹. pub](/typescript-a-gentle-introduction-to-mapped-types-f65e45fa2598)