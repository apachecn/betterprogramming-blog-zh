# æ„å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å‡½æ•°æ¥è¿”å›ä¸€ä¸ªåŸºäºå€¼å’ŒèŒƒå›´çš„é¢œè‰²

> åŸæ–‡ï¼š<https://betterprogramming.pub/build-a-user-defined-function-to-return-a-color-based-on-a-value-and-range-1f4838b29b2d>

## ä»¥åŠå¤ä¹ åå…­è¿›åˆ¶é¢œè‰²ä»£ç 

![](img/234b391ddd5a239d3d4596b69fddc309.png)

åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) ä¸Šç”± [Harshal Desai](https://unsplash.com/@harshaldesai?utm_source=medium&utm_medium=referral) æ‹æ‘„çš„ç…§ç‰‡ã€‚

*è¢«å›°åœ¨ä»˜è´¹å¢™åé¢ï¼Ÿç‚¹å‡»* [ä½ å¯ä»¥è¯•ç€ç”¨è°·æ­Œçš„é¢œè‰²é€‰æ‹©å™¨](https://medium.com/better-programming/build-a-user-defined-function-to-return-a-color-based-on-a-value-and-range-1f4838b29b2d#RRGGBB çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­ RRã€GG å’Œ BB è¡¨ç¤ºåå…­è¿›åˆ¶æ ¼å¼çš„çº¢è‰²ã€ç»¿è‰²å’Œè“è‰²åˆ†é‡çš„å¼ºåº¦ã€‚åè¿›åˆ¶é¢œè‰²å¼ºåº¦ä» 0(æœ€æš—)åˆ° 255(æœ€äº®)ä¸ç­‰ã€‚å½“è½¬æ¢æˆåå…­è¿›åˆ¶æ—¶ï¼Œè¿™è½¬æ¢æˆ 00 åˆ° FF çš„èŒƒå›´ã€‚å› æ­¤ï¼Œé»‘è‰²çš„åå…­è¿›åˆ¶ä»£ç æ˜¯#000000(è¡¨ç¤ºæ‰€æœ‰ä¸‰ç§æˆåˆ†éƒ½å¤„äºæœ€å¤§é»‘æš—çŠ¶æ€)ã€‚åŒæ ·ï¼Œå¯¹äºç™½è‰²æ¥è¯´ï¼Œæ˜¯#FFFFFFã€‚å¯¹äºçº¯çº¢è‰²ã€ç»¿è‰²å’Œè“è‰²ï¼Œä»£ç åˆ†åˆ«ä¸º#FF0000ã€#00FF00 å’Œ#0000FFã€‚</p><p id=)[æ¥äº†è§£å®ƒæ˜¯å¦‚ä½•å¤„ç†é»„è‰²ã€æ£•è‰²ç­‰å¤åˆè‰²çš„ã€‚](https://www.google.com/search?q=color+picker)

ç°åœ¨æ¥çœ‹ä»£ç ã€‚

æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæœ€å°çš„ tkinter UIï¼Œå®ƒç”±ä¸€ä¸ªçª—å£ä¸­çš„æ ‡ç­¾ç»„æˆ:

è¿è¡Œè¿™ä¸ªç¨‹åºåï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸‹é¢çš„çª—å£:

![](img/c8561cac825edc85ba3d423db4353e78.png)

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å€¼ä¸º 0ï¼ŒèƒŒæ™¯ä¸ºç°è‰²ã€‚å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æä¾›èƒŒæ™¯é¢œè‰²ï¼Œæ‰€ä»¥å®ƒé»˜è®¤ä¸ºç°è‰²ã€‚

è¦æ·»åŠ èƒŒæ™¯é¢œè‰²ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨`bg` å‚æ•°å°†å®ƒæä¾›ç»™`Label`ã€‚è®©æˆ‘ä»¬æ·»åŠ é»‘è‰²:

```
pred = Label(mainframe, width=25, text=f"{value}%", bg='#000000', anchor='c',padx=5, font=('TkTextFont',12))
```

![](img/ccb6d2b6d2c7a1b78fa80ff6e24be2c9.png)

ç°åœ¨æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å€¼å’Œè°ƒè‰²æ¿ä¸ºæ ‡ç­¾æä¾›é¢œè‰²ã€‚

é¦–å…ˆï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œè®©æˆ‘ä»¬å°†æˆ‘ä»¬çš„èŒƒå›´å®šä¹‰ä¸º 0 åˆ° 100ï¼Œ0 è¡¨ç¤ºä¸å¥½(çº¢è‰²)ï¼Œ100 è¡¨ç¤ºå¥½(ç»¿è‰²)ã€‚50 ä¼šæ˜¯ä¸­æ€§(é»„è‰²)ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸è‰¯ã€ä¸­æ€§å’Œè‰¯å¥½çš„ä»£ç åº”ä¸º#ff0000ã€#ffff00 å’Œ#00ff00ã€‚ä» 0 åˆ° 50ï¼Œçº¢è‰²ä¸º 255 (ff)ï¼Œç»¿è‰²ä» 0 (00)é€æ¸å¢åŠ åˆ° 255 (ff)ã€‚ä» 50 åˆ° 100ï¼Œçº¢è‰²ä» 255 é™åˆ° 0ï¼Œç»¿è‰²ä¿æŒ 255ã€‚è“è‰²åœ¨ä¸¤ç§æƒ…å†µä¸‹éƒ½ä¿æŒä¸º 0ã€‚

è¿™å¯ä»¥è¡¨ç¤ºä¸º:

è¿™ä¸ª RGB ä»£ç ç°åœ¨éœ€è¦è½¬æ¢æˆåå…­è¿›åˆ¶é¢œè‰²ä»£ç ã€‚Python æœ‰ä¸€ä¸ªå†…ç½®çš„æ•´æ•°åˆ°åå…­è¿›åˆ¶çš„è½¬æ¢å™¨ã€‚

`print(hex(0))`è¿”å›`0x0`ï¼Œå…¶ä¸­`0x`æ˜¯æ ‡è¯†æ•°å­—åŸºæ•°çš„å‰ç¼€ã€‚`print(hex(255))`è¿”å›`0xff`ã€‚æˆ‘ä»¬åªéœ€è¦å¿½ç•¥å‰ä¸¤ä¸ªå­—ç¬¦ï¼Œç”¨ 0 å³å¡«å……è¾“å‡ºï¼Œä½¿å…¶é•¿åº¦ä¸º 2ã€‚å¯¹æ‰€æœ‰ä¸‰ä¸ª RGB ä»£ç éƒ½è¿™æ ·åšï¼Œå¾—åˆ°çš„å­—ç¬¦ä¸²ä»¥`#`ä¸ºå‰ç¼€ï¼Œå°†å…¶è¯†åˆ«ä¸ºåå…­è¿›åˆ¶é¢œè‰²ä»£ç ã€‚è¿™ä¸ªä¸€è¡Œç¨‹åºåšåˆ°äº†:

```
"#%s%s%s" % tuple([hex(c)[2:].rjust(2, "0") for c in (r, g, b)])
```

æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªé€»è¾‘ï¼

æˆ‘ä¿®æ”¹äº†æ ‡ç­¾æ–‡æœ¬ä»¥æ˜¾ç¤ºå€¼å’Œåå…­è¿›åˆ¶ä»£ç ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ 0ã€25ã€50ã€75 å’Œ 100 çš„æ ‡ç­¾æ˜¯ä»€ä¹ˆæ ·å­çš„:

![](img/86ccf28ece8ff1f1617a81227997d348.png)

å®Œç¾ï¼

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ”¹å˜æ–¹å‘å‘¢ï¼Ÿå°±æ˜¯ç°åœ¨ 0 æ˜¯å¥½çš„ï¼Œ100 æ˜¯åçš„ï¼Ÿæˆ‘ä»¬åªæ˜¯äº’æ¢äº†çº¢è‰²å’Œç»¿è‰²çš„å€¼ï¼

ç”¨`color = hexcolor(value, reverse=True)`è¿è¡Œç›¸åŒçš„è„šæœ¬ï¼Œæˆ‘ä»¬å¾—åˆ°:

![](img/577ef66288cae7b7c132676e5182614d.png)

æœ€åï¼Œè‡ªå®šä¹‰èŒƒå›´æ€ä¹ˆæ ·ï¼Ÿæ¯”å¦‚ 0 åˆ° 500ï¼Ÿæˆ‘ä»¬å°† UDF ä¿®æ”¹å¦‚ä¸‹:

ç”¨`range = [0, 500]`è¿è¡Œè„šæœ¬ç»™å‡º:

![](img/4e162b24f371a8373a6e868ce4513ab8.png)

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡é¡ºåˆ©ã€‚[-100ï¼Œ500]æ€ä¹ˆæ ·ï¼Ÿä»å€¼-100 å¼€å§‹:

`_tkinter.TclError: invalid color name â€œ#ffx7f00â€`

æ˜¾ç„¶ï¼Œç”±äºè´Ÿå€¼ï¼Œé¢œè‰²ä»£ç è¢«è®¡ç®—ä¸ºè´Ÿå€¼ï¼Œä»è€Œå¯¼è‡´æ— æ•ˆçš„åå…­è¿›åˆ¶ä»£ç ã€‚

æˆ‘ä»¬éœ€è¦åšçš„æ˜¯ç¡®ä¿è¯¥èŒƒå›´åœ¨ UDF è½¬æ¢ä¸ºæ­£èŒƒå›´ã€‚è¿™å¯ä»¥é€šè¿‡å°†æœ€å°å€¼è®¾ç½®ä¸º 0 å¹¶å°†æœ€å¤§å€¼è®¾ç½®ä¸º`abs(range[1]-range[0])`æ¥å®ç°ï¼Œè¿™æ ·èŒƒå›´å¤§å°ä¿æŒä¸å˜ã€‚è¾“å…¥å€¼ä¹Ÿéœ€è¦ç¼©æ”¾ä¸º`value-range[0]`ã€‚

æˆ‘ä»¬çš„æœ€ç»ˆä»£ç å¦‚ä¸‹æ‰€ç¤º:

åœ¨-100 åˆ° 500 çš„èŒƒå›´å†…è¿è¡Œï¼Œæˆ‘ä»¬å¾—åˆ°:

![](img/bb61cd8cda15711800569c2edf6c7ecf.png)

å¤ªå¥½äº†ï¼ä¸€åˆ‡æŒ‰é¢„æœŸè¿è¡Œã€‚

è¿™ä¸ª UDF å¯ä»¥ç”¨äºä»»ä½•å¸Œæœ›ç”¨é¢œè‰²æ¥è¡¨ç¤ºå€¼çš„ UI å…ƒç´ ã€‚å®ç°å¯èƒ½ä¸æ˜¯æœ€æœ‰æ•ˆçš„ï¼Œç”šè‡³å¯èƒ½æœ‰ä¸€ä¸ªåŒ…æˆ–å†…ç½®çš„ Python å‡½æ•°å·²ç»è¿™æ ·åšäº†ã€‚å¦‚æœä½ çŸ¥é“ä»»ä½•è¿™æ ·çš„æ–¹æ³•ï¼Œè¯·è®©æˆ‘çŸ¥é“ã€‚

Medium ä»ç„¶ä¸æ”¯æŒå‘å°åº¦ä»¥å¤–çš„ä½œè€…æ”¯ä»˜è´¹ç”¨ã€‚å¦‚æœä½ å–œæ¬¢æˆ‘çš„å†…å®¹ï¼Œä½ å¯ä»¥ç»™æˆ‘ä¹°æ¯å’–å•¡:)

[](https://www.buymeacoffee.com/siddhantsadangi) [## Siddhant Sadangi æ­£åœ¨ Streamlit ä¸Šåˆ›å»º python ç½‘ç»œåº”ç”¨ç¨‹åº

### å˜¿ğŸ‘‹æˆ‘åˆšåˆšåœ¨è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªé¡µé¢ã€‚ä½ ç°åœ¨å¯ä»¥ç»™æˆ‘ä¹°æ¯å’–å•¡äº†ï¼

www.buymeacoffee.com](https://www.buymeacoffee.com/siddhantsadangi)