# Vite ä¸ web packâ€”â€”åœ¨å¼•æ“ç›–ä¸‹

> åŸæ–‡ï¼š<https://betterprogramming.pub/vite-vs-webpack-3286e188aaae>

## å¸®åŠ©æ‚¨é™ä½ç¼–è¯‘æ—¶é—´çš„æ·±å…¥æŒ‡å—

![](img/e56c78945b400956a9ffeffa2f12b615.png)

ç…§ç‰‡ç”±[é˜¿è¯ºå¾·Â·å¼—æœ—è¥¿æ–¯å¡](https://unsplash.com/@clark_fransa?utm_source=medium&utm_medium=referral)åœ¨ [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) æ‹æ‘„

ä½ çš„ç¼–è¯‘æ—¶é—´æœ‰å¤šé•¿ï¼Ÿä½ èƒ½ç‹‚é¥®ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ä¸‰éƒ¨æ›²ç›´åˆ°å®ƒç»“æŸå—â€”â€”æˆ‘æ­£çœ‹ç€ä½ å‘¢ï¼Œç½‘ç»œåŒ…ï¼Ÿè¿˜æ˜¯æ¯«ç§’å†…å®Œæˆï¼Ÿé‡è§: [Vite](https://vitejs.dev/) ã€‚

# æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç¼–è¯‘ï¼Ÿ

ç½‘ç«™å¯ä»¥å¾ˆç®€å•ã€‚HTMLã€CSS å’Œ Javascript æ˜¯æ‚¨å¯åŠ¨å’Œè¿è¡Œæ‰€éœ€çš„å…¨éƒ¨å·¥å…·ï¼Œä½†æ˜¯ä¸€æ—¦æ‚¨å¼€å§‹æ„å»ºçœŸæ­£çš„åº”ç”¨ç¨‹åºå’Œä¼ä¸šåº”ç”¨ç¨‹åºï¼Œè¿˜éœ€è¦å…¶ä»–å·¥å…·ã€‚

åç«¯çš„ Reactã€Vue æˆ– Angular ä¹‹ç±»çš„å·¥å…·ï¼Œä½œä¸º CSS å¤„ç†å™¨çš„ SASSï¼Œå¯èƒ½æ˜¯ TypeScript è€Œä¸æ˜¯æ™®é€šçš„ JavaScriptã€‚è¿™äº›æ˜¯ç°ä»£å¼€å‘å›¢é˜Ÿæœ€å¸¸ç”¨çš„å·¥å…·ã€‚

é—®é¢˜æ˜¯â€¦æµè§ˆå™¨ä¸çŸ¥é“ Reactã€SASS æˆ– Typescript æ˜¯ä»€ä¹ˆã€‚å®ƒä¸å…³å¿ƒä»»ä½•ä¸æ˜¯ HTMLã€CSS å’Œ JavaScript çš„ä¸œè¥¿ã€‚

> ç¼–è¯‘å™¨ç¿»è¯‘ä½ çš„ Reactï¼ŒSASSï¼ŒTypescript ç­‰ç­‰ã€‚JSã€CSS å’Œ Htmlï¼Œè¿™æ ·ä½ çš„æµè§ˆå™¨å°±å¯ä»¥ä½¿ç”¨è¿™äº›ä»£ç ã€‚

# æˆ‘ä»¬å¦‚ä½•ç¼–è¯‘ï¼Ÿ

ç¼–è¯‘å™¨ä½¿ç”¨æ†ç»‘å™¨å°†å¤šä¸ª JavaScript æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„æ–‡ä»¶ã€‚è¿™ä¸ªåŒ…å°†åŒ…å«è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„å…¨éƒ¨æºä»£ç å’Œæ‰€æœ‰å¯¼å…¥çš„ä¾èµ–é¡¹ã€‚

ä¸ºäº†ä½¿ç”¨ä½ çš„èŠ±å“¨ SASSï¼Œæˆ‘ä»¬éœ€è¦åŠ è½½å™¨å°†å…¶ç›´æ¥ç¿»è¯‘æˆ CSSã€‚

Webpackã€Rollup å’Œ Vite ç­‰å·¥å…·ä½¿è¿™äº›äº‹æƒ…æˆä¸ºå¯èƒ½ã€‚

# Vite æ˜¯ä»€ä¹ˆï¼Ÿ

[Vite](https://vitejs.dev/guide/) (è¿™æ˜¯æ³•è¯­ï¼Œæ„æ€æ˜¯â€œå¿«â€)ï¼Œæ˜¯ç”± [Vue](https://vuejs.org/) çš„åˆ›å»ºè€…å’Œç»´æŠ¤è€…å°¤é›¨æºªåˆ›å»ºçš„ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ä¸å¯çŸ¥æ†ç»‘å™¨ï¼Œç¼–è¯‘é€Ÿåº¦æé«˜äº† 10 åˆ° 100 å€ï¼Œå†…ç½®äº†è¿‘ä¹å®æ—¶çš„çƒ­é‡æ–°åŠ è½½åŠŸèƒ½ï¼Œç»™å¼€å‘è€…å¸¦æ¥äº†æƒŠäººçš„ä½“éªŒã€‚

è¿™æ˜¯é€šè¿‡åˆ©ç”¨æµè§ˆå™¨æœ¬åœ° ESM æ”¯æŒå®ç°çš„ï¼Œç±»ä¼¼äº [snowpack](https://www.snowpack.dev/) å’Œ`[preact/wmr](https://github.com/preactjs/wmr)`ã€‚æ‚¨çš„åº”ç”¨ç¨‹åºæ¨¡å—å°†è¢«åˆ†ä¸ºä¾èµ–é¡¹å’Œæºä»£ç ã€‚

*   ä¾èµ–å…³ç³»ä¸ç»å¸¸å˜åŒ–ï¼Œæ‰€ä»¥å’Œ[https://github.com/evanw/esbuild](https://github.com/evanw/esbuild)(ä¸€ä¸ªç”¨ Go å†™çš„ JavaScript bundler)é¢„æ†ç»‘ï¼›é™¤éä¾èµ–å…³ç³»å‘ç”Ÿå˜åŒ–ï¼Œå¦åˆ™è¿™ç§æƒ…å†µåªä¼šå‘ç”Ÿä¸€æ¬¡
*   åœ¨æ‚¨ä½¿ç”¨æºä»£ç æ—¶ï¼Œæºä»£ç ä¼šå‘ç”Ÿå¤šæ¬¡å˜åŒ–ï¼Œå®ƒå°†è¢«è½¬æ¢ä¸ºæµè§ˆå™¨æœ¬æœº ESM (Ecma-Script-Modules ),å…¶ä¸­æµè§ˆå™¨åªåŠ è½½å½“å‰é¡µé¢æ‰€éœ€çš„æ–‡ä»¶

# å¼•æ“ç›–ä¸‹çš„ç½‘ç»œåŒ…

![](img/bb1d4a9e6365d5741cab62a103a1bf36.png)

å› ä¸º Webpack æ˜¯ä¸€ä¸ªåŸºäº bundler çš„æ„å»ºå·¥å…·ï¼Œå®ƒå¿…é¡»æŠ“å–ã€å¤„ç†å’Œè¿æ¥æ•´ä¸ª JavaScript æ–‡ä»¶æ¥äº¤ä»˜æ‚¨çš„åº”ç”¨ç¨‹åºã€‚è¿™é€‚ç”¨äºæ‚¨çš„åº”ç”¨ç¨‹åºä»£ç å’Œæ‚¨çš„ä¾èµ–é¡¹ã€‚

å½“æ‚¨ä¿å­˜æ–‡ä»¶æ—¶ï¼Œæ•´ä¸ª JavaScript åŒ…å°†ç”± Webpack é‡æ–°æ„å»ºï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå³ä½¿æ‰“å¼€äº† HMRï¼Œæ›´æ”¹ä¹Ÿå¯èƒ½éœ€è¦ 10 ç§’é’Ÿæ‰èƒ½æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸­ã€‚ç”±äº Webpack çš„å»¶è¿Ÿåé¦ˆå¾ªç¯ï¼Œå¤„ç†å¤§é‡ JavaScript åº”ç”¨ç¨‹åºå°†å¯¼è‡´ç³Ÿç³•çš„å¼€å‘äººå‘˜ä½“éªŒã€‚

# è¯·åˆ°è½¦ä¸‹

![](img/bca2d4071189db5410e0c835e46c44cf.png)

åƒ Webpack è¿™æ ·çš„åŸºäº bundler çš„å·¥ä½œæµå¿…é¡»åœ¨å•ä¸ªæµè§ˆå™¨è¯·æ±‚ä¹‹å‰å¤„ç†æ•´ä¸ª JavaScript æ¨¡å—ï¼Œè€Œ Vite åªåœ¨å•ä¸ªæµè§ˆå™¨è¯·æ±‚ä¹‹å‰å¤„ç†ä¾èµ–æ¨¡å—ã€‚

# Vite çš„æ†ç»‘äº§å“ç‰ˆæœ¬

è™½ç„¶ç°åœ¨æ‰€æœ‰ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒåŸç”Ÿ ES æ¨¡å—ï¼Œä½†æ˜¯æä¾›å®ç°æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯(å¦‚æ ‘æŠ–åŠ¨ã€å»¶è¿ŸåŠ è½½å’Œå…¬å…±å—åˆ†å‰²)çš„æ†ç»‘åº”ç”¨ä»ç„¶æ¯”éæ†ç»‘åº”ç”¨å…·æœ‰æ›´å¥½çš„æ•´ä½“æ€§èƒ½ã€‚

å‡ºäºè¿™ä¸ªåŸå› ï¼ŒVite é™„å¸¦äº†ä¸€ä¸ªé¢„é…ç½®çš„`build`å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä½¿ç”¨ [Rollup](http://rollupjs.org/) æ†ç»‘æ‚¨çš„åº”ç”¨ç¨‹åºã€‚Vite è¿˜ä¸ºæ‚¨æä¾›äº†ä¸€ä¸ªåˆç†çš„é»˜è®¤æ±‡æ€»é…ç½®[ï¼Œæ‚¨å¯ä»¥åœ¨éœ€è¦æ—¶å®šåˆ¶](https://vitejs.dev/guide/build.html#customizing-the-build)ã€‚

# å¦‚ä½•ä½¿ç”¨å®ƒ

> åƒå¤§å¤šæ•°å‰ç«¯å¼€å‘äººå‘˜ä¸€æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ Webpack å’Œ Rollup æ¥æ„å»ºåŸºäº JavaScript çš„ web åº”ç”¨ç¨‹åºã€‚ä¸€æ—¦æˆ‘ä»¬è¾¾åˆ°ä¸€å®šçš„é¡¹ç›®è§„æ¨¡(è¶…è¿‡ 500 ä¸ªæ¨¡å—)ï¼Œåœ¨æµè§ˆå™¨ä¸­æ£€æŸ¥å˜æ›´å°±æˆäº†ä¸€ä»¶ç—›è‹¦çš„äº‹æƒ…ã€‚ä½¿ç”¨ Create React åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬çš„å¯åŠ¨æ—¶é—´æ˜æ˜¾è¶…è¿‡äº† 20 ç§’ã€‚æˆ‘ä»¬åˆ‡æ¢åˆ° Vite ä½œä¸ºæˆ‘ä»¬çš„å¼€å‘æœåŠ¡å™¨ï¼Œç°åœ¨äº«å— 20 å€çš„åŠ è½½é€Ÿåº¦ã€‚äº†è§£æ›´å¤šæœ‰å…³æˆ‘ä»¬è¿ˆå‘æ›´å¥½çš„å¼€å‘äººå‘˜ä½“éªŒä¹‹æ—…çš„ä¿¡æ¯ã€‚

Sipgate | [æ¥æº](https://www.sipgate.de/blog/how-we-set-up-vite-dev-server)

replit | [æ¥æº](https://twitter.com/amasad/status/1355379680275128321?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E1355379680275128321%7Ctwgr%5E%7Ctwcon%5Es1_c10&ref_url=https%3A%2F%2Fwww.sipgate.de%2F%3Fp%3D30276)

# æ„è¯†åˆ°

æ²¡æœ‰ä»€ä¹ˆæ˜¯å®Œç¾çš„ï¼Œå³ä½¿æ˜¯ Vite ä¹Ÿæœ‰ä½ éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚

## Vite dev æœåŠ¡å™¨æ²¡æœ‰å†…ç½®çš„ç±»å‹æ£€æŸ¥

é—®é¢˜:

Vite ä½¿ç”¨ [esbuild](https://esbuild.github.io/) å°† Typescript ç¼–è¯‘æˆ Javascriptã€‚é—æ†¾çš„æ˜¯ï¼ŒEslint å¹¶ä¸å…³å¿ƒç±»å‹ï¼Œåœ¨ç¼–è¯‘æ—¶ä¹Ÿä¸ä¼šåšä»»ä½•ç±»å‹æ£€æŸ¥ã€‚

è§£å†³æ–¹æ¡ˆ:

*   åˆ©ç”¨ EsLint(ç”šè‡³å¯ä»¥æ·»åŠ é¢„æ¨é€/é¢„æäº¤ git æŒ‚é’©)
*   æ·»åŠ  [ViteTypeCheck](https://github.com/fi3ework/vite-plugin-checker) æ’ä»¶

## æ‚¨å¿…é¡»æ›´æ–°æ‚¨çš„ TypeScript æ¥å£å¯¼å…¥

å¦‚æœæ‚¨åƒå…¶ä»–äººä¸€æ ·ä½¿ç”¨äº† TypeScript æ¥å£çš„é€šç”¨é»˜è®¤å¯¼å…¥:

```
import SomeInterface from '@/types/SomeInterface'
```

æ‚¨éœ€è¦åœ¨ import è¯­å¥åæ˜¾å¼è®¾ç½®`type`:

```
import type SomeInterface from '@/types/SomeInterface'
```

# â€œå¿«:å‘ƒâ€ç¼–è¯‘æ—¶é—´çš„å…¶ä»–é€‰æ‹©

Vite å¹¶ä¸æ„å‘³ç€é€‚åˆæ¯ä¸€ä¸ªç”¨ä¾‹ã€‚æ­£å¦‚å°¤é›¨æºªè‡ªå·±æ‰€è¯´:

> â€œå®Œå…¨å–ä»£ webpack å¹¶ä¸æ˜¯ Vite çš„ç›®æ ‡ã€‚å¯èƒ½æœ‰ä¸€äº›ç°æœ‰ webpack é¡¹ç›®æ‰€ä¾èµ–çš„å°‘é‡ç‰¹æ€§/åŠŸèƒ½åœ¨ Vite ä¸­ä¸å­˜åœ¨ï¼Œä½†è¿™äº›ç‰¹æ€§åœ¨é•¿å°¾ä¸­ï¼Œåªæœ‰å°‘æ•°ç¼–å†™å®šåˆ¶ webpack é…ç½®çš„é«˜çº§ç”¨æˆ·éœ€è¦ã€‚è¿™é‡Œçš„ä¸€äº›è¯„è®ºè€…å¯èƒ½å±äºè¿™ä¸ªç¾¤ä½“ã€‚
> 
> å¦‚æœæ‚¨è¿™æ ·åšäº†(ä¾‹å¦‚ï¼Œæ‚¨è¯•å›¾è¿ç§»å¹¶å‘ç°äº†éšœç¢ï¼Œæˆ–è€…è¯„ä¼°å¹¶å¾—å‡ºç»“è®º Vite ä¸é€‚åˆæ‚¨çš„éœ€æ±‚)ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨ webpackï¼ä½ å¹¶ä¸æ˜¯ Vite è®¾è®¡çš„ç›®æ ‡å—ä¼—â€”â€”ä½ ç»å¯¹åº”è¯¥ä¸ºè¿™é¡¹å·¥ä½œé€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚ *â€”* [*æ¥æº*](https://news.ycombinator.com/item?id=26972400)

æ‰€ä»¥ï¼Œä¸‡ä¸€ä½ æœ‰ä¸€ä¸ªä¸å¤ªé€‚åˆ Vite çš„é¡¹ç›®ï¼›ä»¥ä¸‹æ˜¯å…¶ä»–è§£å†³æ–¹æ¡ˆçš„åˆ—è¡¨:

*   æ›´æ–°æ‚¨çš„ webpack æˆ– CRA(åˆ›å»º-ååº”-åº”ç”¨ç¨‹åº)é…ç½®
*   è€ƒè™‘ç”¨ esbuild æ›¿æ¢ Babel/TSï¼›æ‚¨ç”šè‡³å¯ä»¥ç”¨`[esbuild-loader](<https://github.com/privatenumber/esbuild-loader>)`å°† eslint æ·»åŠ åˆ° webpack ä¸­ï¼Œå¹¶åœ¨ç¼–è¯‘`[fork-ts-checker-webpack-plugin](<https://github.com/TypeStrong/fork-ts-checker-webpack-plugin#readme>)`æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œè¿™å¾ˆæ–¹ä¾¿ï¼› [Marcin Wosinek](https://hashnode.com/@marcin-wosinek) ç”šè‡³å†™äº†ä¸€ç¯‡[å¦‚ä½•ä½¿ç”¨ esbuild-loder åŠ é€Ÿ webpack çš„æŒ‡å—](https://how-to.dev/how-to-speed-up-webpack-with-esbuild-loader)ã€‚

# ç»“è®º

[ä¸ä¼ ç»Ÿæ†ç»‘å™¨ç›¸æ¯”ï¼ŒVite](https://vitejs.dev/) å°†å¼€å‘äººå‘˜çš„ä½“éªŒå’Œç¼–è¯‘æ—¶é—´æé«˜äº† 10-100 å€ã€‚è¿™ä¸æ˜¯é é­”æ³•å®Œæˆçš„ã€‚è¿™æ˜¯é€šè¿‡ä½¿ç”¨ç°ä»£è¯­è¨€çš„ç°ä»£æ ‡å‡†å®ç°çš„ã€‚

ä½ åº”è¯¥ä¸ºé—ç•™é¡¹ç›®ä½¿ç”¨ Vite å—ï¼Ÿå¦‚æœå¯èƒ½ï¼Œä¸ºä»€ä¹ˆä¸å‘¢ï¼Ÿæ£€æŸ¥éœ€æ±‚ï¼Œå¦‚æœä¸æ˜¯å¾ˆåˆé€‚ï¼Œæ£€æŸ¥ä¸Šé¢çš„å…¶ä»–è§£å†³æ–¹æ¡ˆã€‚

ä½ åº”è¯¥ä¸ºä¸€ä¸ªæ–°é¡¹ç›®ä½¿ç”¨ Vite å—ï¼Ÿå½“ä½ æƒ³å­¦ä¹  react æ—¶ï¼Œå¯ä»¥åšæŒä½¿ç”¨ create-react-appï¼Œè¿™æ ·ä½ å°±å¯ä»¥å…ˆå­¦ä¹  Reactï¼Œç„¶åå†å­¦ä¹  BundlersğŸ˜‰ã€‚

# æ¥æº

*   ğŸ“„[äº†è§£æ¯”è¾ƒ:Webpack vs ViteJS](https://radixweb.com/blog/webpack-vs-vitejs-comparison)
*   ğŸ“„[Vite æ¯” Webpack å¥½å—ï¼Ÿ](https://blog.bitsrc.io/vite-is-better-than-webpack-d5dd59610d56)
*   ğŸ“„[ç§»è¿‡ Webpackï¼æˆ‘ä»¬å¦‚ä½•è®¾ç½® Vite(ä¸€ä¸ªæ›´å¿«çš„å¼€å‘æœåŠ¡å™¨)](https://www.sipgate.de/blog/how-we-set-up-vite-dev-server)
*   ğŸ“„[Vite æ˜¯ Webpack çš„é»‘ä»”å—ï¼Ÿ](/is-vite-the-killer-of-webpack-a515d9e77a4)
*   ğŸ“„[ä¸ºä»€ä¹ˆæˆ‘ä»¬ä» Webpack è½¬å‘ Vite](https://blog.replit.com/vite)
*   ğŸ“„[æˆ‘ä»¬çš„ Vite ä¹‹æ—…ä»¥åŠæˆ‘ä»¬ä¸ºä½•å›å½’ Webpack](/our-journey-with-vite-and-why-we-turned-back-to-webpack-b9a84ba7a223)
*   ğŸ“„[ã€AskJSã€‘Vite æ¯”ç”¨ Create React App å¥½å—ï¼Ÿ](https://www.reddit.com/r/javascript/comments/u8m6c8/askjs_is_vite_better_than_using_create_react_app/)
*   ğŸ“„ [ELI5:ä¸ºä»€ä¹ˆ Vite æ¯” Webpack å¿«é‚£ä¹ˆå¤šï¼Ÿ](https://www.reddit.com/r/vuejs/comments/r0fbfw/eli5_why_is_vite_so_much_faster_than_webpack/)