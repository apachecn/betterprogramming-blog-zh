# 5 ä¸ª JavaScript WTFs

> åŸæ–‡ï¼š<https://betterprogramming.pub/5-javascript-wtfs-62b6742ff3dd>

## JavaScript çš„å¤æ€ªä¹‹å¤„ä¼šè®©å¼€å‘äººå‘˜ç´§å¼ åœ°å¤§ç¬‘

![](img/635db975817741faa69e148b55d90a15.png)

ä½œè€…ç…§ç‰‡ã€‚

æˆ‘ä»¬éƒ½çˆ± JavaScriptã€‚è¿™æ˜¯ä¸€é—¨ä¼Ÿå¤§çš„è¯­è¨€ã€‚è®©å®ƒæ›´å—æ¬¢è¿çš„æ˜¯ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±â€œæœ‰è¶£â€çš„ä¸€é¢ã€‚ä»Šå¤©ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤º JavaScript ä¸­çš„äº”ä¸ª wtfï¼Œå¹¶è§£é‡Šå…¶ä¸­çš„å†…å®¹ã€‚

ä¸ï¼Œè¿™äº›ä¸æ˜¯è™«å­ã€‚

# 1.é¦™è•‰

ä½ ä¼šæ€ä¹ˆå†™é¦™è•‰ï¼Ÿåœ¨ JavaScript ä¸­ï¼Œè¿™å°†å®Œæˆ:

```
'b' + 'a' + + 'a' + 'a' // -> baNaNa
```

## å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

`'b' +'a' + + 'a' + 'a'`å¯¼è‡´`baNaNa`ï¼Œå› ä¸º`'b' + 'a' + + 'a' + 'a'`è¯»å–`'b' + 'a' + (+'a') + 'a'`ï¼Œè€Œ`(+'a')`è¢«è½¬æ¢ä¸º*è€Œä¸æ˜¯æ•°å­—*ã€`NaN`ã€‚è¿™åè¿‡æ¥ä¼šå‘ç”Ÿï¼Œå› ä¸ºåœ¨ JavaScript ä¸­ï¼ŒäºŒè¿›åˆ¶åŠ æ³•è¿ç®—ç¬¦`+`è¯•å›¾å°†æ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—ï¼Œä½†`'a'`æ˜¯*è€Œä¸æ˜¯æ•°å­—*ã€‚

# 2.å¸ƒå°”æ•°å­¦

å¦‚æœä½ åœ¨æ•´å¤©ä¸æ•°å­—æ‰“äº¤é“åæ„Ÿåˆ°æ²®ä¸§ï¼Œå°±æ¢æˆå¸ƒå°”å‹å§ã€‚åœ¨ JavaScript ä¸­ï¼Œä½ çœŸçš„å¯ä»¥ç”¨å¸ƒå°”æ¥åšæ•°å­¦è¿ç®—ã€‚ä¾‹å¦‚:

```
**true** + **true**; // -> 2(**true** + **true**) * (**true** + **true** + **true**) // -> 6
```

## å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

åœ¨ JavaScript ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`Number`æ„é€ å‡½æ•°å°†*çš„å€¼å¼ºåˆ¶è½¬æ¢ä¸ºæ•°å­—ã€‚è¿™å°†`true`è½¬æ¢ä¸º`1`å¹¶å°†`false`è½¬æ¢ä¸º`0`:*

```
Number(true);  // -> 1
Number(false); // -> 0
```

ç±»ä¼¼åœ°ï¼Œä¸€å…ƒè¿ç®—ç¬¦`+`è¯•å›¾å°†ä»»ä½•æ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—ã€‚å¯¹äº`true`å’Œ`false`ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ„å‘³ç€ä½¿ç”¨ä¸€å…ƒè¿ç®—ç¬¦`+`å°†`true`å¼ºåˆ¶ä¸º`1`å¹¶å°†`false`å¼ºåˆ¶ä¸º`0`:

```
+true;  // -> 1
+false; // -> 0
```

æœ€åï¼Œå½“ä½ åšåŠ æ³•æˆ–ä¹˜æ³•æ—¶ï¼Œ`ToNumber`æ–¹æ³•ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚æ ¹æ®[è§„æ ¼](https://www.ecma-international.org/publications-and-standards/standards/ecma-262/#sec-tonumber):

> â€œå¦‚æœ`argument`æ˜¯`true`ï¼Œåˆ™è¿”å›`1`ã€‚å¦‚æœ`argument`æ˜¯`false`ï¼Œåˆ™è¿”å›`+0`ã€‚

JavaScript ä¸­çš„å¸ƒå°”æ•°å­¦ç°åœ¨å˜å¾—æœ‰æ„ä¹‰äº†ï¼Œä¸æ˜¯å—ï¼Ÿ

# 3.NaN å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°å­—

è®©æˆ‘ä»¬é—®é—® JavaScript ä»€ä¹ˆæ˜¯*è€Œä¸æ˜¯æ•°å­—*ã€`NaN`çš„æ„æ€:

```
typeof NaN; // -> 'number'
```

çœŸçš„å—ï¼Ÿ

## å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

`NaN` *å¬èµ·æ¥å¾ˆç¥ç§˜ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°å€¼ç±»å‹ã€‚* `NaN`åªæ˜¯åœ¨æ•°å€¼å‹çš„é™åˆ¶å†…æ— æ³•è¡¨ç¤ºæŸä¸ªç‰¹å®šå€¼æ—¶ä½¿ç”¨ã€‚ä»å­—é¢ä¸Šçœ‹ï¼Œå®ƒå°±åƒä¸€ä¸ªæ•°å­—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè®¾è®¡å¥½çš„æ•°å­—ã€‚

# 4.ä½¿ç”¨æ•°ç»„è®¿é—®å±æ€§

æˆ‘ç¡®ä¿¡ä½ å·²ç»ç”¨ä¸€ä¸ªæ•°å­—æˆ–ä¸€ä¸ªå­—ç¬¦ä¸²é€šè¿‡`[]`æ“ä½œç¬¦è®¿é—®è¿‡å±æ€§ã€‚ä½†æ˜¯ä½ çŸ¥é“ä½ ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„å—ï¼Ÿä¾‹å¦‚:

```
var data = { number: 1 };
var array = ["number"];data[array]; // -> 1
```

## å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

è¿™æ˜¯å› ä¸ºï¼Œåœ¨å¹•åï¼Œ`[]`æ“ä½œç¬¦å¯¹å…¶å‚æ•°è¿è¡Œ`toString`æ–¹æ³•ã€‚åœ¨ JavaScript ä¸­ï¼Œå°†ä¸€ä¸ª*å•å…ƒç´ æ•°ç»„*è½¬æ¢æˆ string ä¼šäº§ç”Ÿä¸€ä¸ªå­—ç¬¦ä¸²å½¢å¼çš„å•ä¸ªå…ƒç´ ã€‚

ä¾‹å¦‚:

```
["test"].toString() // -> test
```

# 5.æ•´ç†

è¿™ä¸ªä»»åŠ¡åº”è¯¥å¾ˆç®€å•:è®©æˆ‘ä»¬ä½¿ç”¨`sort()`æ–¹æ³•å¯¹ä¸€ç»„æ•°å­—è¿›è¡Œæ’åº:

```
[1, 5, 2, 10, 30].sort()
```

ç»“æœ:

```
[1, 10, 2, 30, 5]
```

ä½†æ˜¯ç­‰ä¸€ä¸‹ JavaScript è®¤ä¸ºè¿™äº›æ•°å­—ç°åœ¨å·²ç»æ’åºäº†å—ï¼Ÿæ‹¿ç€æˆ‘çš„å•¤é…’ã€‚

## å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

è¿™ä¸æ˜¯ bugã€‚ä½¿ç”¨é»˜è®¤çš„`sort()`æ–¹æ³•å®é™…ä¸Šå°†æ•°ç»„çš„å…ƒç´ è½¬æ¢æˆ*å­—ç¬¦ä¸²*ï¼Œç„¶åæ¯”è¾ƒå®ƒä»¬çš„ *UTF-16 å€¼*æ¥å¯¹åˆ—è¡¨è¿›è¡Œæ’åºã€‚å› æ­¤ï¼Œå¦‚æœä½ çœŸçš„æƒ³æ’åºé™¤å­—ç¬¦ä¸²ä»¥å¤–çš„ä»»ä½•ä¸œè¥¿ï¼Œä¼ é€’ä¸€ä¸ª*æ¯”è¾ƒå‡½æ•°*åˆ°`sort`æ–¹æ³•ä¸­ã€‚

ä¾‹å¦‚ï¼Œè¦æŒ‰å‡åºå¯¹æ•°å­—è¿›è¡Œæ’åº:

```
[1,5,2,10,30].sort((a, b) => a - b); // -> [1, 2, 5, 10, 30]
```

# ç»“è®º

æ„Ÿè°¢é˜…è¯»ã€‚æˆ‘å¸Œæœ›ä½ å·²ç»æœ‰äº†ä¸€äº›æƒŠäººçš„ WTF æ—¶åˆ»ï¼Œä¹Ÿè®¸ä¹Ÿå­¦åˆ°äº†ä¸€äº›ä¸œè¥¿ï¼

æˆ‘å¾ˆæƒ³åŠ å…¥ä½ çš„ LinkedIn ç½‘ç»œã€‚éšæ„è¿æ¥ [Artturi Jalli](https://www.linkedin.com/in/artturi-jalli-29619413a) ã€‚

# èµ„æº

[](https://github.com/denysdovhan/wtfjs) [## ä¸¹å°¼æ–¯å¤šå¤«æ±‰/wtfjs

### ğŸ¤ªæœ‰è¶£è€Œæ£˜æ‰‹çš„ JavaScript ç¤ºä¾‹åˆ—è¡¨ã€‚é€šè¿‡åˆ›å»ºå¸æˆ·ä¸º denysdovhan/wtfjs çš„å‘å±•åšå‡ºè´¡çŒ®â€¦

github.com](https://github.com/denysdovhan/wtfjs) [](https://stackoverflow.com/questions/2801601/why-does-typeof-nan-return-number) [## ä¸ºä»€ä¹ˆ typeof NaN è¿”å›' number 'ï¼Ÿ

### å¯¹ NaN æ¥è¯´ï¼Œä¸€ä¸ªæ›´å¥½çš„åå­—ï¼Œæ›´å‡†ç¡®åœ°æè¿°å®ƒçš„æ„æ€ï¼Œæ›´å°‘æ··æ·†ï¼Œå°†æ˜¯ä¸€ä¸ªæ•°å­—ä¸Šçš„ä¾‹å¤–ã€‚å®ƒâ€¦

stackoverflow.com](https://stackoverflow.com/questions/2801601/why-does-typeof-nan-return-number)