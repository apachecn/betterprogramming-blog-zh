# åœ¨ Linux ä¸­è°ƒåº¦ Cron ä»»åŠ¡

> åŸæ–‡ï¼š<https://betterprogramming.pub/how-to-schedule-cron-tasks-in-linux-fc605bf4911e>

## ç¼–è¾‘ã€åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡å’Œåˆ é™¤

![](img/fef31c18f208291dc1bf1edc6a52053d.png)

ç°åœ¨ä½ ä¸èƒ½ä¸€ä¸ªäººåšæ‰€æœ‰çš„äº‹æƒ…ï¼Œå¦‚æœä½ æƒ³ä»ä½ çš„ä¸€å¤©ä¸­å¾—åˆ°æ›´å¤šï¼Œè‡ªåŠ¨åŒ–ä½ æ¯å¤©åšçš„äº‹æƒ…ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨åšäº†ã€‚

é‡è¦æ•°æ®ã€ç³»ç»Ÿæ—¥å¿—ã€è¿è¡Œç‰¹å®šè„šæœ¬çš„å¤‡ä»½ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨ crontab åœ¨ [*Linux*](https://blog.devgenius.io/6-essential-commands-to-get-better-at-linux-system-you-should-know-d1a85b175fde) ä¸­è°ƒåº¦ä½œä¸šï¼Œcrontab æ˜¯æ¯ä¸ªç±» UNIX æ“ä½œç³»ç»Ÿä¸­éƒ½æœ‰çš„è½¯ä»¶å®ç”¨ç¨‹åºï¼Œç”¨äºåœ¨ç‰¹å®šæ—¶é—´è°ƒåº¦ä»»åŠ¡ã€‚

Cron ä»¥å¸Œè…Šå•è¯â€œChronosâ€å‘½åï¼Œæ„æ€æ˜¯æ—¶é—´ã€‚å®ƒæ˜¯æŒ‰ç…§ç‰¹å®šè®¡åˆ’æ‰§è¡Œä»»åŠ¡çš„å‘½ä»¤åˆ—è¡¨ã€‚

crontab æ˜¯æ‚¨æƒ³è¦è°ƒåº¦çš„ä»»åŠ¡åˆ—è¡¨çš„ç¼–è¾‘å™¨ã€‚

# **crontab çš„è¯­æ³•**

```
* * * * * command* * * * * /path/to/script.sh
```

è¿™é‡Œæ˜Ÿå·(* * * * *)ç”¨äºåŒ¹é…*åˆ†é’Ÿ*ã€*å°æ—¶*ã€*ä¸€æœˆä¸­çš„æ—¥å­*ã€*ä¸€å¹´ä¸­çš„æœˆä»½*ã€*ä¸€å‘¨ä¸­çš„æ—¥å­*ã€‚

![](img/fe117c2389680b03a0a2aafd8646e9aa.png)

è¯¥å‘½ä»¤å¯ä»¥æ˜¯æ‚¨å¸Œæœ›åœ¨ç‰¹å®šæ—¶é—´æ‰§è¡Œçš„è„šæœ¬ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹åœ¨ crontab ä¸­ç¼–è¾‘ã€åˆ—å‡ºå’Œåˆ é™¤ä½œä¸šçš„å‘½ä»¤ã€‚

# åœ¨ crontab ä¸­ç¼–è¾‘

```
crontab -u <your_username> -e
```

æˆ–è€…

```
crontab -e
```

ç¬¬ä¸€æ¬¡ï¼Œå®ƒä¼šè¦æ±‚ä½ é€‰æ‹©ä¸€ä¸ªç¼–è¾‘å™¨ï¼Œä½ å¯ä»¥é€‰æ‹© nanoï¼Œå®ƒéå¸¸å®¹æ˜“ä½¿ç”¨ï¼Œæ¯ä¸ª Linux ç³»ç»Ÿéƒ½æœ‰ã€‚

**ç¤ºä¾‹ 1 :** æˆ‘æƒ³å‘é€ä¸€ä¸ª Linux é€šçŸ¥ï¼Œæé†’æˆ‘åœ¨å¤§éƒ¨åˆ†æ—¶é—´é‡Œç”¨ç¬”è®°æœ¬ç”µè„‘å·¥ä½œæ—¶çœ¨çœ¼â€”â€”ç§‘å­¦è¡¨æ˜ï¼Œä½ åœ¨å±å¹•ä¸Šå·¥ä½œæ—¶ç»å¸¸å¿˜è®°çœ¨çœ¼â€”â€”è¿™æ˜¯çœŸçš„ã€‚

å‡è®¾æˆ‘æƒ³æ¯ 25 åˆ†é’Ÿå‘é€ä¸€æ¬¡é€šçŸ¥ã€‚

å‘½ä»¤å°†æ˜¯:

![](img/cbd6de6ce5c4bdd5b6357a35c21f8315.png)

è¿™æ˜¯å¯¹ Linux çš„é€šçŸ¥ï¼Œä¸ crontab æ— å…³ã€‚
`Notify-send`å°†æœŸå¾…ä¸¤ä¸ªè®ºç‚¹:

1.  é€šçŸ¥çš„æ ‡é¢˜
2.  2.é€šçŸ¥æ­£æ–‡

æ‰€ä»¥â€ğŸ‘€çœ¼ç›å¥åº·â€æ˜¯`Title`å’Œâ€œè®°å¾—çœ¨çœ¼ï¼ï¼!"æ˜¯`Body`

`XDG_RUNTIME_DIR=/run/user/$(id -u)` â€”è¿™é‡Œçš„`XDG_RUNTIME_DIR`æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œåœ¨ä½ ç™»å½•æ—¶è‡ªåŠ¨è®¾ç½®ã€‚å½“ä½ ä» crontab è¿è¡Œ`notify-send`å‘½ä»¤æ—¶ï¼Œä½ å¿…é¡»æŒ‡å®šè¿™ä¸ªå˜é‡â€”â€”å› ä¸ºå®ƒå…è®¸ç¨‹åºåœ¨ç”¨æˆ·ç›®å½•ä¸­å­˜å‚¨ä¸´æ—¶æ–‡ä»¶ã€‚ä½†æ˜¯å½“ä½ ç»™å‡ºä»»ä½•ä¸éœ€è¦ä¸æ˜¾ç¤ºå™¨äº¤äº’çš„è„šæœ¬æˆ–å‘½ä»¤æ—¶ï¼Œä½ ä¸éœ€è¦æŒ‡å®šå®ƒã€‚

`* * * * *` â€”è¿™å°†åœ¨æ¯åˆ†é’Ÿã€æ¯å°æ—¶ã€æ¯å¤©ã€æ¯æœˆã€æ¯å¹´æ‰§è¡Œã€‚

ä½†æ˜¯æ‚¨å¸Œæœ›æ¯ 25 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡è¯¥å‘½ä»¤ã€‚æ‰€ä»¥ä½ å¯ä»¥ç”¨ 25 åˆ†é’ŸåŒ¹é…æ¥è®¡ç®—ã€‚å®ƒå°†æ˜¯:

```
*/25 * * * */ â†’for step value
- â†’ for range vaule
, â†’ for seprating value
```

å¦‚æœä½ æƒ³å¯¹è¿™ç§æ­é…æœ‰æ›´æ·±çš„äº†è§£ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹é¢çš„ç½‘ç«™ã€‚

ä½ å¯ä»¥ä»è¿™é‡Œæ‰¾åˆ°(* * * * *)çš„å€¼ã€https://crontab.tech/ 

![](img/9b14e43239f1ac15a0b3a3153444bf5f.png)

æ¥æº:https://crontab.tech/

æ‰€ä»¥è¿™å°†æ¯ 25 åˆ†é’Ÿå‘é€ä¸€æ¬¡é€šçŸ¥ã€‚

![](img/626b9c49d045aa1f92bc08768e3e6eec.png)

**ä¾‹ 2:** å¯ä»¥å°† crontab çš„è¾“å‡ºæˆ–ä»»ä½•è¿è¡Œæ—¶é”™è¯¯ä¿å­˜åœ¨ txt æ–‡ä»¶ä¸­ã€‚

![](img/5a7383a58806faf930da98415f3b635f.png)

åœ¨ crontab æ–‡ä»¶ä¸­ï¼Œæ³¨æ„:# is æ³¨é‡Šå°†è¢«å¿½ç•¥

æ‰€ä»¥ crontab å°†åœ¨æ¯å¤© 12:45 è¿è¡Œï¼Œå¹¶åœ¨`crontab_log.txt`æ–‡ä»¶ä¸­å‘é€ echo å‘½ä»¤è¾“å‡º

è®°ä½:
> â†’ single è¡¨ç¤ºå¦‚æœä¸å­˜åœ¨å°†åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¹¶è¦†ç›–è¾“å‡ºã€‚(overwrite)
>>â†’double è¡¨ç¤ºå¦‚æœä¸å­˜åœ¨å°†åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶å¹¶è¿½åŠ è¾“å‡ºã€‚(é™„åŠ )

# åœ¨ crontab ä¸­åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡

è¿™å°†åˆ—å‡º crontab ä¸­ä¸ºè¯¥ç‰¹å®šç”¨æˆ·å†™å…¥çš„æ‰€æœ‰ä½œä¸šï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œå®ƒå°†ä¸ºæ´»åŠ¨çš„ç™»å½•ç”¨æˆ·è¿è¡Œã€‚

```
crontab -u <your_username> -l
```

æˆ–è€…

```
crontab -l
```

# åˆ é™¤ crontab ä½œä¸š

è¿™å°†åˆ é™¤æ•´ä¸ªä»»åŠ¡åˆ—è¡¨ã€‚

```
crontab -r
```

## crontab ä¸­æœ‰ä¸€äº›å†…ç½®çš„å­—ç¬¦ä¸²ã€‚

```
@hourly â†’ command â†’will run command every hour ( 0 * * * * )
@midnight â†’ ( 0 0 * * *)
@daily â†’ ( 0 0 * * *) same as midnight
@weekly â†’ ( 0 0 * * 0)
@monthly â†’( 0 0 1 * *)
@yearly â†’(0 0 1 1 *)
@reboot â†’run cron job at every reboot
```

**ç¤ºä¾‹ 3:** ä½¿ç”¨ crontab è¿è¡Œ python è„šæœ¬

![](img/b7dd0a890273a690bc17b0dd00c345fc.png)

åœ¨ crontab æ–‡ä»¶ä¸­ï¼Œcrontab ä½¿ç”¨ 24 å°æ—¶åˆ¶ï¼Œå› æ­¤ä¸‹åˆ 2:45 æ„å‘³ç€ 14:45

è¿™å°†åœ¨æ¯å¤©ä¸Šåˆ 10:45 è¿è¡Œ`backup.py` python æ–‡ä»¶

**ç¤ºä¾‹ 4:** ä½¿ç”¨ crontab è¿è¡Œ bash è„šæœ¬

è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨ Linux ä¸­è‡ªåŠ¨æ›´æ”¹ mac åœ°å€

![](img/6b1b387dc1684525a12915dc4844e3e7.png)

åœ¨ crontab æ–‡ä»¶ä¸­

è¿™é‡Œæˆ‘é…ç½®äº† change-mac å‘½ä»¤æ¥è¿è¡Œæˆ‘çš„æ›´æ”¹ mac åœ°å€ bash è„šæœ¬ã€‚

ç°åœ¨éµå¾ªè¿™ä¸€ç³»åˆ—å‘½ä»¤

![](img/d6e50e215e460968335386f9f64836d6.png)

ç°åœ¨ï¼Œè¿™äº›å‘½ä»¤å°†ä»å‘½ä»¤è¡Œè¿è¡Œ

![](img/f5e5046b9dcc3f52985e2c642b755ae9.png)

åœ¨ Linux ä¸­æ”¹å˜ mac åœ°å€çš„ bash è„šæœ¬

# **æ€»ç»“**

```
â†’ cron is used to schedule jobs in Linux OS
â†’ crontab is used to edit , list , remove crontab in Linux for cron.
â†’ crontab -e â†’ for edit
â†’ crontab -l â†’ for listing jobs
â†’ crontab -r â†’ fro removing crontab
â†’ Some predefined strings like @daily ( 0 0 * * * )
```

# èµ„æº

1.  æ›´æ”¹ mac åœ°å€çš„ Shell è„šæœ¬ä»£ç :[https://github.com/techdobz/scripts](https://github.com/techdobz/scripts)

2.æŸ¥æ‰¾å€¼(* * * *) Crontab è¯­æ³•:[https://crontab.tech/](https://crontab.tech/)