# Swift å’Œ iOS é¢†åŸŸä¸­çš„å·¥å‚æ–¹æ³•å’ŒæŠ½è±¡å·¥å‚

> åŸæ–‡ï¼š<https://betterprogramming.pub/factory-method-and-abstract-factory-in-swift-and-ios-universe-47c716667287>

## æ¢ç´¢åˆ›é€ æ€§çš„è®¾è®¡æ¨¡å¼

![](img/919f9f026bc73746bb454c0382676930.png)

æ³•æ¯”å®‰Â·æ ¼ç½—æ–¯åœ¨ [Unsplash](https://unsplash.com/search/photos/programming?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) ä¸Šæ‹æ‘„çš„ç…§ç‰‡

åœ¨è®¨è®ºä»–ä»¬æˆ–å…¶ä»–äººçš„ç¨‹åºæ—¶ï¼Œ*å·¥å‚*è¿™ä¸ªè¯æ— ç–‘æ˜¯ç¨‹åºå‘˜æœ€å¸¸ç”¨çš„è¯ä¹‹ä¸€ã€‚åŒæ—¶ï¼Œå®ƒä»¬çš„ç¡®åˆ‡å«ä¹‰æ˜¯ä¸åŒçš„ã€‚å®ƒå¯èƒ½æ˜¯ä¸€ä¸ªç”Ÿæˆå¯¹è±¡ç±»(å¤šæ€æˆ–éå¤šæ€)ï¼Œä¸€ä¸ªè¿”å›å¯¹è±¡æ–¹æ³•(é™æ€æˆ–éé™æ€)ï¼Œç”šè‡³æ˜¯ä¸€ä¸ªå¸¸è§„çš„[æ„é€ å‡½æ•°](https://en.wikipedia.org/wiki/Constructor_(object-oriented_programming))ã€‚

ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰ç”Ÿæˆå¯¹è±¡çš„ä¸œè¥¿éƒ½å¯ä»¥ç§°ä¸ºå·¥å‚ã€‚æ­¤å¤–ï¼Œè¿™ä¸ªè¯å¯ä»¥æè¿°â€œå››äººå¸®â€æ­¦å™¨åº“ä¸­ä¸¤ç§ä¸åŒçš„åˆ›é€ æ€§è®¾è®¡æ¨¡å¼â€”â€”[å·¥å‚æ–¹æ³•](https://en.wikipedia.org/wiki/Factory_method_pattern)å’Œ[æŠ½è±¡å·¥å‚](https://en.wikipedia.org/wiki/Abstract_factory_pattern)ã€‚

æˆ‘æƒ³æ·±å…¥ç ”ç©¶å®ƒä»¬çš„ç»†èŠ‚ï¼Œç‰¹åˆ«å…³æ³¨å®ƒä»¬çš„ç»å…¸å®ç°å’Œç†è§£ã€‚

è¿™ç¯‡æ–‡ç« çš„çµæ„Ÿæ¥è‡ªäº[Joshua Kerievsky](https://twitter.com/joshuakerievsky)([å·¥ä¸šé€»è¾‘](https://industriallogic.com/)çš„è´Ÿè´£äºº)ï¼Œæˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´ï¼Œæ˜¯ä»–çš„ä¹¦ã€Šé‡æ„æ¨¡å¼ã€‹ã€‚è¿™æœ¬ä¹¦æ˜¯åœ¨ä¸–çºªä¹‹äº¤é©¬ä¸Â·ç¦å‹’ç­¾åç³»åˆ—ä¸­å‘è¡Œçš„ã€‚ç¦å‹’æ˜¯ç°ä»£ç¼–ç¨‹ç»å…¸è‘—ä½œã€Šé‡æ„:æ”¹è¿›ç°æœ‰è½¯ä»¶çš„è®¾è®¡ã€‹çš„è‘—åä½œè€…

å¦‚æœä½ æ²¡æœ‰è¯»è¿‡å…‹é‡Œè€¶å¤«æ–¯åŸºçš„ä¹¦ï¼Œæˆ–è€…æ²¡æœ‰å¬è¯´è¿‡è¿™æœ¬ä¹¦ï¼Œè¯·æ¯«ä¸çŠ¹è±«åœ°æŠŠå®ƒåŠ å…¥ä½ çš„é˜…è¯»æ¸…å•ã€‚è¿™æ˜¯â€œé‡æ„â€å’Œæ›´ç»å…¸çš„â€œè®¾è®¡æ¨¡å¼:å¯é‡ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„å…ƒç´ â€çš„æœ‰ä»·å€¼çš„ç»­ç¯‡é™¤æ­¤ä¹‹å¤–ï¼Œè¿™æœ¬ä¹¦è¿˜åŒ…å«äº†å‡ åç§é€šè¿‡ä½¿ç”¨[è®¾è®¡æ¨¡å¼](https://en.wikipedia.org/wiki/Software_design_pattern)æ¥æ¶ˆé™¤ä¸åŒ[ä»£ç æ°”å‘³](https://en.wikipedia.org/wiki/Code_smell)çš„æ–¹æ³•ã€‚

# æŠ½è±¡å·¥å‚

![](img/77615bd9bc805802e24b93d87c9b3450.png)

æŠ½è±¡å·¥å‚ UML

åœ¨ä»–çš„ä¹¦ä¸­ï¼ŒKerievsky ç»™å‡ºäº†ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ç§æ¨¡å¼ä½•æ—¶å˜å¾—æœ‰ç”¨ã€‚

1.  [é€šè¿‡å…¬å…±æ¥å£ç»‘å®šçš„å…·ä½“ç±»å‹çš„å°è£…](https://en.wikipedia.org/wiki/Encapsulation_(computer_programming))ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„çŸ¥è¯†å°†å±äºä¸€ç§ç±»å‹ï¼Œå³å·¥å‚ã€‚å·¥å‚çš„å…¬å…± [API](https://en.wikipedia.org/wiki/Application_programming_interface) ç”±æ–¹æ³•é›†(é™æ€æˆ–éé™æ€)ç»„æˆï¼Œè¯¥æ–¹æ³•é›†è¿”å›å…¬å…±æ¥å£ç±»å‹çš„å®ä¾‹ï¼Œå¹¶å…·æœ‰æœ‰æ„ä¹‰çš„åç§°ï¼Œå› æ­¤æˆ‘ä»¬çŸ¥é“ä¸ºäº†ç‰¹å®šçš„ç›®çš„å¿…é¡»è°ƒç”¨å“ªä¸€ä¸ªã€‚
2.  ç¬¬äºŒä¸ªä¸ç¬¬ä¸€ä¸ªç›¸ä¼¼ï¼Œæ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ‰€æœ‰åœºæ™¯éƒ½æˆ–å¤šæˆ–å°‘ç›¸ä¼¼ã€‚è¿™æ˜¯å› ä¸ºä¸€ç§ç±»å‹æˆ–ä¸€ç»„ç±»å‹çš„å®ä¾‹çš„åˆ›å»ºå‘ç”Ÿåœ¨ç¨‹åºçš„ä¸åŒéƒ¨åˆ†ã€‚åŒæ ·ï¼Œå·¥å‚å°è£…äº†åˆ›é€ æ€§çš„ä»£ç ï¼Œä½†å®ƒçš„åŠ¨æœºä¸åŒã€‚å¦‚æœä»£ç å¾ˆå¤æ‚ï¼Œå¹¶ä¸”ä¸å—åˆå§‹åŒ–å™¨è°ƒç”¨çš„é™åˆ¶ï¼Œè¿™ä¸€ç‚¹å°¤å…¶é‡è¦ã€‚

ä¸ºäº†è·Ÿä¸Š [iOS](https://apple.com/ru/ios/ios-12) å¼€å‘ä¸–ç•Œï¼Œä½¿ç”¨`[UIViewController](https://developer.apple.com/documentation/uikit/uiviewcontroller)`å­ç±»ç›¸å½“æ–¹ä¾¿ã€‚äº‹å®ä¸Šï¼Œå®ƒæ˜¯ iOS è½¯ä»¶å¼€å‘ä¸­æœ€æµè¡Œçš„ç±»å‹ä¹‹ä¸€ï¼Œå‡ ä¹æ€»æ˜¯åœ¨ä½¿ç”¨å‰è¢«å­ç±»åŒ–ã€‚å…·ä½“çš„ç±»å¯¹äºå®¢æˆ·ç«¯ä»£ç æ¥è¯´é€šå¸¸å¹¶ä¸é‡è¦ã€‚

*å°½ç®¡ç°å®ä¸–ç•Œä¸­çš„ä»£ç å¯ä»¥ä»¥æŸç§æ–¹å¼ç®€åŒ–ï¼Œä½†æˆ‘ä¼šå°½é‡è®©ä»£ç ç¤ºä¾‹å°½å¯èƒ½æ¥è¿‘å››äººå¸®ä¹¦ä¸­çš„ç»å…¸æ¨¡å¼å®ç°ã€‚åªæœ‰æ·±åˆ»ç†è§£åŸºç¡€ä¸­çš„åŸç†ï¼Œæ‰èƒ½æ›´è‡ªç”±åœ°ä½¿ç”¨å®ƒã€‚*

## è¯¦ç»†ç¤ºä¾‹

å‡è®¾æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé”€å”®è½¦è¾†ï¼Œè§†å›¾/æ¼”ç¤ºä¾èµ–äºå®ƒçš„ç±»å‹ã€‚æˆ‘ä»¬å°†ä¸ºä¸åŒçš„è½¦è¾†ç±»å‹ä½¿ç”¨ä¸åŒçš„`UIViewController`å­ç±»ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ‰€æœ‰è½¦è¾†çš„çŠ¶æ€éƒ½ä¸ä¸€æ ·â€”â€”æ–°è½¦å’ŒäºŒæ‰‹è½¦ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç›¸åŒç»„çš„ç±»å‹å®¶æ—ï¼Œå®ƒçš„å®ä¾‹æ ¹æ®æ¡ä»¶åœ¨ç›¸ä¼¼çš„åœ°æ–¹è¢«åˆ›å»ºã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»åˆ—è¡¨ä¸­çš„ä¸€ä¸ªé¡¹ç›®â€”â€”æ ¹æ®ç‚¹å‡»çš„è½¦è¾†ç±»å‹ï¼Œå®ƒä¼šä»¥ä¸åŒçš„æ–¹å¼åˆ›å»ºã€‚è§†å›¾æ§åˆ¶å™¨çš„åˆå§‹åŒ–å™¨æœ‰å‚æ•°å€¼ï¼Œæ¯æ¬¡éƒ½å¿…é¡»ä¼ é€’ã€‚éš¾é“è¿™äº›äº‰è®ºæ²¡æœ‰æ­ç¤ºåˆ›å»ºå·¥å‚çš„ä¼˜åŠ¿å—ï¼Ÿå·¥å‚æ˜¯å”¯ä¸€çŸ¥é“æ‰€éœ€çš„æ§åˆ¶å™¨åˆ›å»ºç»†èŠ‚çš„ç±»å‹ã€‚

æ˜¾ç„¶ï¼Œè¿™ä¸ªä¾‹å­ç›¸å½“ç®€å•ã€‚åœ¨ç°å®ä¸–ç•Œä¸­ï¼Œå¼•å…¥è¿™ä¸ªå·¥å‚å°†æ˜¯[è¿‡åº¦å·¥ç¨‹](https://en.wikipedia.org/wiki/Overengineering)ã€‚ç„¶è€Œï¼Œäººä»¬å¯ä»¥æƒ³è±¡æ›´å¤šçš„è½¦è¾†ç±»å‹åœ¨å®ƒä»¬çš„åˆå§‹åŒ–å™¨ä¸­æœ‰ä¸æ­¢ä¸€ä¸ªå‚æ•°ï¼ŒæŠ½è±¡å·¥å‚çš„ä¼˜åŠ¿å˜å¾—æ›´åŠ æ˜æ˜¾ã€‚

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬çš„æŠ½è±¡å·¥å‚[æ¥å£](https://en.wikipedia.org/wiki/Interface_(computing)):

```
**protocol** VehicleViewControllerFactory {
    **func** makeBicycleViewController() -> UIViewController
    **func** makeScooterViewController() -> UIViewController
}
```

*ç®€ä»‹* [*Swift API ç¼–ç¨‹æŒ‡å—*](https://swift.org/documentation/api-design-guidelines) *å»ºè®®ä»¥â€œmakeâ€ä¸ºå‰ç¼€å‘½åå·¥å‚æ–¹æ³•*

å››äººå¸®çš„ä¾‹å­æ˜¯ç”¨ [C++](https://en.wikipedia.org/wiki/C%2B%2B) ç¼–å†™çš„ï¼ŒåŸºäº[ç»§æ‰¿](https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming))å’Œ[è™šå‡½æ•°](https://en.wikipedia.org/wiki/Virtual_function)ã€‚åœ¨ Swift ä¸­ï¼Œæˆ‘ä»¬æ›´æ¥è¿‘é¢å‘åè®®çš„ç¼–ç¨‹æŠ€æœ¯ã€‚

Factory interface åªåŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸ºè‡ªè¡Œè½¦å’Œè¸æ¿è½¦åˆ›å»ºè§†å›¾æ§åˆ¶å™¨ã€‚è¿™äº›æ–¹æ³•è¿”å›å…¬å…±çˆ¶ç±»çš„å®ä¾‹ã€‚å› æ­¤ï¼Œæ„è¯†çš„åŒºåŸŸä¼ æ’­å—åˆ°çœŸæ­£éœ€è¦å®ƒçš„åœ°åŒºçš„é™åˆ¶ã€‚

è®©æˆ‘ä»¬æ·»åŠ ä¸¤ä¸ªå®ç°æŠ½è±¡å·¥å‚æ¥å£çš„å…·ä½“å·¥å‚:

å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œæ··å‡åœŸå·¥å‚è´Ÿè´£ä¸åŒçŠ¶å†µçš„è½¦è¾†ï¼Œæ–°çš„å’Œæ—§çš„ã€‚

ä»Šåï¼Œå¿…è¦çš„è§†å›¾æ§åˆ¶å™¨æ˜¯è¿™æ ·åˆ›å»ºçš„:

```
**let** factory: VehicleViewControllerFactory 
    = NewVehicleViewControllerFactory()
**let** vc = factory.makeBicycleViewController()
```

## ç”¨å·¥å‚å°è£…ç±»

![](img/30ad1e5147392cd4c8fac23dd76665c3.png)

ç”¨å·¥å‚å°è£…ç±»

ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç®€çŸ­åœ°è€ƒè™‘ä¸€ä¸‹å…‹é‡Œè€¶å¤«æ–¯åŸºçš„ä¹¦ä¸­ç»™å‡ºçš„ä¾‹å­ã€‚

ç¬¬ä¸€ä¸ªæ˜¯å…³äº[å…·ä½“ç±»å‹](https://industriallogic.com/xp/refactoring/classesWithFactory.html)çš„å°è£…ã€‚è®°ä½æ˜¾ç¤ºè½¦è¾†æ•°æ®çš„ç›¸åŒè§†å›¾æ§åˆ¶å™¨å­ç±»:

```
**final** **class** BicycleViewController: UIViewController { }
**final** **class** ScooterViewController: UIViewController { }
```

å‡è®¾æˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ï¼Œä¾‹å¦‚ä¸€ä¸ªåº“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸Šé¢çš„è§†å›¾æ§åˆ¶å™¨ç±»ä¿æŒ`[internal](https://docs.swift.org/swift-book/LanguageGuide/AccessControl.html)`(é»˜è®¤æƒ…å†µä¸‹)ï¼Œå·¥å‚å……å½“å…¬å…± APIã€‚å·¥å‚çš„æ–¹æ³•è¿”å›ä¼—æ‰€å‘¨çŸ¥çš„è§†å›¾æ§åˆ¶å™¨çš„çˆ¶ç±»å®ä¾‹ã€‚å› æ­¤ï¼Œå…³äºå…·ä½“ç±»å‹çš„çŸ¥è¯†å—åˆ°æ¨¡å—çš„é™åˆ¶:

```
**public** **struct** VehicleViewControllerFactory {
    **func** makeBicycleViewController() -> UIViewController {
        **return** BicycleViewController()
    }
    **func** makeScooterViewController() -> UIViewController {
        **return** ScooterViewController()
    }
}
```

## å°†åˆ›é€ çŸ¥è¯†è½¬ç§»åˆ°å·¥å‚

![](img/7156dc0e38815529b39b57aa50d7c09a.png)

å°†åˆ›é€ çŸ¥è¯†è½¬ç§»åˆ°å·¥å‚

ç¬¬äºŒä¸ªæ¡ˆä¾‹æè¿°äº†[å¯¹è±¡](https://industriallogic.com/xp/refactoring/creationWithFactory.html)çš„å¤æ‚åˆå§‹åŒ–ï¼Œä¸ºäº†ç®€åŒ–ä»£ç å’Œå°è£…ï¼ŒKerievsky æå‡ºç”¨å·¥å‚ç±»é™åˆ¶æ¥çº¦æŸè¿›ç¨‹çš„çŸ¥è¯†ã€‚

å‡è®¾æˆ‘ä»¬ä¹Ÿå–æ±½è½¦ã€‚æ¯«æ— ç–‘é—®ï¼Œè¿™æ˜¯ä¸€è¾†æ›´å¤æ‚çš„è½¦ï¼Œæœ‰æ›´å¤šçš„å‚æ•°å’Œé€‰æ‹©ã€‚è®©æˆ‘ä»¬ç”¨ç‡ƒæ–™ç±»å‹ã€ä¼ è¾“ç±»å‹å’Œè½¦è½®ç›´å¾„çš„é™„åŠ å‚æ•°å®ç°ç›¸åº”çš„è§†å›¾æ§åˆ¶å™¨:

è§†å›¾æ§åˆ¶å™¨çš„åˆå§‹åŒ–æ–¹å¼å¦‚ä¸‹:

æˆ–è€…æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªä¸“é—¨çš„å·¥å‚æ¥å¤„ç†åˆå§‹åŒ–:

â€¦å¹¶åƒè¿™æ ·ä½¿ç”¨å®ƒ:

```
**let** factory = UsedCarViewControllerFactory(
    engineType: .gas, transmissionType: .manual, wheelDiameter: 17
)
**let** vc = factory.makeCarViewController()
```

# å·¥å‚æ–¹æ³•

![](img/3ad3f952c9cfe4a4d038260ee09e8896.png)

å·¥å‚æ–¹æ³• UML

å¦ä¸€ç§å•æ ¹æ¨¡å¼ä¹Ÿå°è£…äº†å…³äºå…·ä½“ç±»å‹çš„çŸ¥è¯†ã€‚å®ƒé€šè¿‡å¤šæ€æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œè€Œä¸æ˜¯å°†å®ç°ç»†èŠ‚éšè—åœ¨ä¸“é—¨çš„ç±»ä¸­ã€‚Kerievsky åœ¨ä»–çš„ä¹¦ä¸­æä¾›äº†ç”¨ [Java](https://java.com/) ç¼–å†™çš„ä¾‹å­ï¼Œå¹¶æè®®ä½¿ç”¨[æŠ½è±¡ç±»](https://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)ï¼Œä½†æ˜¯æ•æ·ç”¨æˆ·ä¸çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬ç‹¬ç«‹è‡ªä¸»ï¼Œæˆ‘ä»¬æœ‰åè®®ã€‚

å››äººå¸®çš„ä¹¦ä¸Šè¯´è¿™ç§æ¨¡å¼ä¹Ÿè¢«ç§°ä¸ºè™šæ‹Ÿæ„é€ å‡½æ•°ï¼Œè¿™æ˜¯æœ‰é“ç†çš„ã€‚åœ¨ C++ä¸­ï¼Œå¦‚æœå‡½æ•°è¢«æ´¾ç”Ÿç±»é‡å†™ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºè™šå‡½æ•°ã€‚ç„¶è€Œï¼Œäººä»¬ä¸èƒ½å°†æ„é€ å‡½æ•°å£°æ˜ä¸ºè™šæ‹Ÿçš„ï¼Œå¹¶ä¸”å¯ä»¥æ¨æµ‹ï¼Œæ¨¡å¼å‘æ˜æ˜¯ç”±æ¨¡æ‹Ÿæ‰€éœ€è¡Œä¸ºçš„å°è¯•å¼•èµ·çš„ã€‚

## å¤šæ€åˆ›å»º

![](img/1750351620f3ac285a4dd580fdfc8601.png)

ä»‹ç» Joshua Kerievsky ç”¨å·¥å‚æ–¹æ³•åˆ›å»ºå¤šæ€

ä½œä¸ºä½¿ç”¨æ¨¡å¼çš„ç»å…¸ä¾‹å­ï¼Œè®©æˆ‘ä»¬è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µ:é™¤äº†åœ¨æ–¹æ³•å†…éƒ¨åˆ›å»ºçš„å¯¹è±¡å®ç°ä¹‹å¤–ï¼ŒåŒä¸€å±‚æ¬¡ç»“æ„ä¸­çš„[ä¸åŒç±»å‹å…·æœ‰ç›¸ä¼¼çš„æ–¹æ³•å®ç°ã€‚è®©æˆ‘ä»¬å°è¯•é€šè¿‡å°†å¯¹è±¡åˆ›å»ºç§»åˆ°å¤–éƒ¨æ¥æ”¹å–„è¿™ç§æƒ…å†µï¼Œå¹¶é€šè¿‡å°†å®ƒåœ¨å±‚æ¬¡ç»“æ„ä¸­å‘ä¸Šç§»åŠ¨ä¸€æ­¥æ¥ä½¿ç±»ä¼¼çš„æ–¹æ³•å˜å¾—å¸¸è§ã€‚](https://industriallogic.com/xp/refactoring/polymorphicCreationFactory.html)

è®©æˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„è½¦è¾†è§†å›¾æ§åˆ¶å™¨:

```
**final** **class** BicycleViewController: UIViewController { }
**final** **class** ScooterViewController: UIViewController { }
```

ç°åœ¨ï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹è¿™ä¸ªè§†å›¾æ§åˆ¶å™¨æ¼”ç¤ºï¼Œå¹¶å£°æ˜ä¸€ä¸ª[åè°ƒå™¨](https://habr.com/ru/post/444038/):

```
**protocol** Coordinator {
    **var** presentingViewController: UIViewController? { **get** **set** }
    **func** start()
}
```

è€ƒè™‘è¿™äº›åè°ƒå™¨å®ç°:

æ–¹æ³•`start()`æœ‰ç±»ä¼¼çš„å®ç°ï¼Œé™¤äº†åœ¨å†…éƒ¨åˆ›å»ºçš„è§†å›¾æ§åˆ¶å™¨ã€‚è®©æˆ‘ä»¬å°†åˆ›ä½œç§»è‡³å®¤å¤–:

```
**protocol** Coordinator { **var** presentingViewController: UIViewController? { **get** **set** } **func** start()
    **func** makeViewController() -> UIViewController}
```

â€¦å¹¶ä½¿ç”¨`start()`æ–¹æ³•çš„é»˜è®¤å®ç°æ‰©å±•åè®®:

```
**extension** Coordinator {
    **func** start() {
        **let** vc = makeViewController()
        presentingViewController?.present(vc, animated: true)
    }
}
```

é‚£ä¹ˆå®ç°å°†æ˜¯:

# ç»“è®º

æˆ‘è¯•å›¾é€šè¿‡ç»“åˆä¸‰ç§æ–¹æ³•æ¥å¼ºè°ƒè¿™ä¸ªç›¸å½“ç®€å•çš„ä¸»é¢˜:

*   ç»å…¸çš„å®£è¨€æ–¹æ³•çš„å­˜åœ¨å—åˆ°äº†å››äººå¸®çš„ä¹¦çš„é¼“åŠ±ã€‚
*   ä½¿ç”¨ç”±åŸºé‡Œè€¶å¤«æ–¯åŸºçš„ä¹¦èµ¤è£¸è£¸åœ°å¯å‘çš„åŠ¨æœºã€‚
*   åº”ç”¨ä½¿ç”¨æˆ‘æ‰€ç†Ÿæ‚‰çš„è½¯ä»¶å·¥ç¨‹åˆ†æ”¯ã€‚

åœ¨è¿™æ ·åšçš„æ—¶å€™ï¼Œæˆ‘è¯•å›¾å°½å¯èƒ½æ¥è¿‘æ¨¡å¼çš„æ•™ç§‘ä¹¦ç»“æ„ï¼Œä¸è¿åå½“ä»£çš„ iOS ç¼–ç¨‹åŸåˆ™ï¼Œå¹¶ä½¿ç”¨ Swift è¯­è¨€çš„å¯èƒ½æ€§(è€Œä¸æ˜¯æ›´å¹¿æ³›çš„ C++å’Œ Java)ã€‚

æ˜¾ç„¶ï¼Œå¾ˆéš¾æ‰¾åˆ°ä¸€ä¸ªå¥½çš„åº”ç”¨å®ä¾‹ã€‚ä¸ç»å…¸å®ç°ç›¸æ¯”ï¼Œå¤§å¤šæ•°ç°æœ‰æ–‡ç« å’ŒæŒ‡å—ä»…åŒ…å«è‚¤æµ…çš„è¯„è®ºå’Œå‡å°‘çš„ç¤ºä¾‹ã€‚

å¸Œæœ›ï¼Œæˆ‘è¾¾åˆ°äº†æˆ‘çš„ç›®æ ‡ï¼Œä½ å–œæ¬¢æ›´æ–°æˆ–åˆ·æ–°ä½ çš„ç›¸å…³çŸ¥è¯†ï¼

**æ›´å¤šå…³äºè®¾è®¡æ¨¡å¼çš„ç²¾é€‰**

[](https://medium.com/devexperts/real-world-example-of-using-coordinator-pattern-in-an-ios-app-d13df10496a5) [## åœ¨ iOS åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨åè°ƒæ¨¡å¼çš„çœŸå®ä¾‹å­

### å½“ä»£ç¼–ç¨‹ä¸–ç•Œå……æ»¡äº†è¶‹åŠ¿ï¼Œè°ˆè®º iOS åº”ç”¨æ›´æ˜¯ä¸€ä¸ªçœŸç†ã€‚å¸Œæœ›â€¦

medium.com](https://medium.com/devexperts/real-world-example-of-using-coordinator-pattern-in-an-ios-app-d13df10496a5) [](https://lazarevzubov.medium.com/composite-data-source-object-and-elements-of-functional-approach-b93356fdb49e) [## å¤åˆæ•°æ®æºå’ŒåŠŸèƒ½æ–¹æ³•çš„è¦ç´ 

lazarevzubov.medium.com](https://lazarevzubov.medium.com/composite-data-source-object-and-elements-of-functional-approach-b93356fdb49e) [](https://lazarevzubov.medium.com/compatible-with-objective-c-swift-code-e7c3239d949) [## ä¸ Objective-C Swift ä»£ç å…¼å®¹

### å°½ç®¡è‹¹æœå·²ç»å‘æˆ‘ä»¬æä¾›äº†å…³äºå¦‚ä½•åœ¨ Objective-C ä¸­ä½¿ç”¨ Swift ä»£ç çš„è¯¦ç»†æ–‡æ¡£â€¦

lazarevzubov.medium.com](https://lazarevzubov.medium.com/compatible-with-objective-c-swift-code-e7c3239d949) 

å¦‚æœä½ å–œæ¬¢é˜…è¯»æˆ‘(å’Œå…¶ä»–ä½œè€…)åœ¨ Medium ä¸Šçš„åšå®¢ï¼Œä½ å¯ä»¥**æˆä¸ºæ­£å¼çš„ Medium æˆå‘˜**(å¦‚æœè¿˜æ²¡æœ‰) [**è¿™é‡Œ**](https://lazarevzubov.medium.com/membership) ã€‚è¿™æ ·åšï¼Œä½ å°±æ”¯æŒäº†æ‰€æœ‰çš„åª’ä½“ä½œè€…ã€‚ğŸ™

â€¦æˆ–è€…ä½ å¯ä»¥ç»™æˆ‘ä¹°ä¸€æ¯å’–å•¡ï¼â˜•