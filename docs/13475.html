<html>
<head>
<title>SwiftUI NavigationStack â€” How to Deep Link and Whatâ€™s New</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SwiftUI NavigationStack â€”æ·±åº¦é“¾æ¥ä¹‹æ—…å’Œæ–°åŠŸèƒ½</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://betterprogramming.pub/swiftui-navigation-stack-how-to-deeplink-and-whats-new-64b1401cb9af?source=collection_archive---------5-----------------------#2022-08-30">https://betterprogramming.pub/swiftui-navigation-stack-how-to-deeplink-and-whats-new-64b1401cb9af?source=collection_archive---------5-----------------------#2022-08-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c97f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">æ·±å±‚é“¾æ¥å’Œå¯¼èˆªå˜å¾—æ›´åŠ å®¹æ˜“</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c36a37d71117d0b5a34aed580166af35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H5fynpK3aqu56Pja"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">Julien Kettmann åœ¨<a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank"> Unsplash </a>ä¸Šæ‹æ‘„çš„ç…§ç‰‡</p></figure><blockquote class="kw kx ky"><p id="1ba2" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">æœ¬æ–‡æ˜¯iOS 16å’ŒMac OS 13ä¸­SwiftUI4æ–°åŠŸèƒ½ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚å…¶ä½™çš„ä½ å¯ä»¥ç›´æ¥åœ¨æˆ‘çš„ä¸ªäººèµ„æ–™é¡µé¢æ‰¾åˆ°ğŸš€ã€‚ç°åœ¨è®©æˆ‘ä»¬ç»§ç»­é˜…è¯»ã€‚</p></blockquote><p id="cb6d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi lz translated">ä½ å¥½ï¼è¿™æ­£æ˜¯æˆ‘åœ¨ä»Šå¹´çš„WWDCä¸Šçœ‹åˆ°æ–°çš„å¯¼èˆªå †æ ˆæ—¶æ‰€è¯´çš„ï¼Œæˆ‘å¯¹æ­¤éå¸¸é«˜å…´ã€‚æˆ‘å¿«ä¹çš„åŸºç¡€æ˜¯æˆ‘ç¡®åˆ‡åœ°çŸ¥é“æˆ‘è¦ç”¨å®ƒåšä»€ä¹ˆï¼</p><p id="40f2" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">å°±åœ¨æˆ‘çš„è„‘æµ·é‡Œï¼Œæˆ‘æœ‰ä¸€ä¸ªæƒ³æ³•:ç»ˆäºæœ‰äº†æ·±åº¦é“¾æ¥å¯¼èˆªï¼ä»é‚£å¤©èµ·ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰æ—¶é—´å»åšå®ƒï¼Œä½†æ—¶é—´æ¥äº†ï¼Œè¿™å°†æ˜¯æˆ‘åœ¨åª’ä½“ä¸Šçš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œå¹¶å¼€å§‹äº†iOS 16ä¸­æ‰€æœ‰æ–°çš„SwiftUIåŠŸèƒ½çš„ç³»åˆ—ã€‚è®©æˆ‘ä»¬å¼€å§‹æ´¾å¯¹å§ï¼</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><h1 id="683e" class="mp mq iq bd mr ms mt mu mv mw mx my mz jw na jx nb jz nc ka nd kc ne kd nf ng bi translated"><strong class="ak">å¥½å§ï¼Œä½†æ˜¯ä»€ä¹ˆå˜äº†ï¼Ÿ</strong></h1><p id="8c0e" class="pw-post-body-paragraph kz la iq lc b ld nh jr lf lg ni ju li lw nj ll lm lx nk lp lq ly nl lt lu lv ij bi translated">å¯¹äºé‚£äº›ä¸ç†Ÿæ‚‰è¿™ä¸ªä¸»é¢˜çš„äººï¼Œæˆ‘å°†å¿«é€Ÿä»‹ç»ä¸€ä¸‹SwiftUIä»¥å‰ç‰ˆæœ¬ä¸­å¯¼èˆªå’Œæ·±åº¦é“¾æ¥çš„å¤–è§‚ã€‚å› æ­¤ï¼Œä¹‹å‰æˆ‘ä»¬ä½œä¸ºå¼€å‘äººå‘˜åªèƒ½ä½¿ç”¨<code class="fe nm nn no np b">NavigationView</code>å’Œ<code class="fe nm nn no np b">NavigationLink</code>ï¼Œè¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨åº”ç”¨ç¨‹åºä¸­å¯¼èˆªç”¨æˆ·ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="b4f3" class="nu mq iq np b gy nv nw l nx ny">struct Feature: Identifiable, Hashable, Decodable {<br/>    var id: String = UUID().uuidString<br/>    let title: String<br/>    let description: String<br/>    let type: FeatureType<br/>}</span><span id="c413" class="nu mq iq np b gy nz nw l nx ny">enum FeatureType: String, Decodable {<br/>    case charts<br/>    case gauge<br/>}</span><span id="68bb" class="nu mq iq np b gy nz nw l nx ny">final class ContentViewModel: ObservableObject {<br/><br/>    @Published var selectedFeature: Feature?<br/>    @Published var showFeatureScreen: Bool = false<br/>    <br/>    @ViewBuilder func showFeature() -&gt; some View {<br/>        if let feature = selectedFeature {<br/>            switch feature.type {<br/>            case .charts:<br/>                ChartsScreen(feature: feature)<br/>            case .gauge:<br/>                GaugeScreen(feature: feature)<br/>            }<br/>        }<br/>    }<br/>}</span><span id="8e0a" class="nu mq iq np b gy nz nw l nx ny">struct ContentView: View {<br/>    @StateObject var viewModel = ContentViewModel()<br/><br/>    var body: some View {<br/>        NavigationView {<br/>            ZStack {<br/>                NavigationLink(isActive: $viewModel.showFeatureScreen) {<br/>                    viewModel.showFeature()<br/>                } label: {}<br/>                <br/>                ScrollView {<br/>                    LazyVStack(spacing: 8) {<br/>                        ForEach(viewModel.features) { feature in<br/>                            FeatureCell(feature: feature) {<br/>                                viewModel.selectedFeature = feature<br/>                                viewModel.showFeatureScreen = true<br/>                            }<br/>                        }<br/>                    }<br/>                }<br/>                .navigationTitle("iOS16 Features ğŸš€")<br/>                .onOpenURL { url in<br/>                    print("ğŸš€ \(url)")<br/>                    <br/>                    guard let components = URLComponents(url: url, resolvingAgainstBaseURL: true) else { return }<br/>                    let query = components.queryItems ?? []<br/>                    let host = components.host<br/>                    let scheme = components.scheme<br/>                    <br/>                    if scheme == "showdownRouting" &amp;&amp; host == "feature" {<br/>                        var jsonQuery = query.map { "\"\($0.name)\":\"\($0.value ?? "")\"" }.joined(separator: ",")<br/>                        jsonQuery = "{\(jsonQuery)}"<br/>                        <br/>                        guard let jsonData = jsonQuery.data(using: .utf8) else {<br/>                            return<br/>                        }<br/>                        <br/>                        do {<br/>                            let feature = try JSONDecoder.shared.decode(Feature.self, from: jsonData)<br/>                            viewModel.selectedFeature = feature<br/>                            viewModel.showFeatureScreen = true<br/>                        } catch {<br/>                            print(error)<br/>                        }<br/>                    }<br/>                }<br/>            }<br/>        }<br/>    }<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/37e79680c438d2a756ab98063c3e8842.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/1*OJ34eI-hQYanyZX0hwGstQ.gif"/></div></figure><p id="94cf" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">è¿™æ˜¯ä½ å¤„ç†ç®€å•æ·±å±‚é“¾æ¥çš„è€æ–¹æ³•ï¼Œä½ å¯ä»¥çœ‹åˆ°è¿™ç§æ–¹æ³•çš„é—®é¢˜æ˜¯æ¯æ¬¡åªèƒ½æ‰“å¼€ä¸€ä¸ªå±å¹•ï¼Œä»é•¿è¿œæ¥çœ‹è¿™å¾ˆéº»çƒ¦ã€‚ç„¶åå½“ä½ æ‰“å¼€æ ‘ä¸­çš„ä¸€äº›å¯¼èˆªæ—¶ï¼Œä½ ä¼šé¢ä¸´ç¼ºå°‘å¼¹å‡ºåˆ°æ ¹æ–¹æ³•çš„é—®é¢˜ã€‚å¹¶ä¸”æ‚¨éœ€è¦ä½¿ä¸å¯¼èˆªæ ‘è¿æ¥çš„æ‰€æœ‰ç»‘å®šæ— æ•ˆã€‚</p><p id="358a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">å¥½å§ï¼Œè¿™æ˜¯æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘ä»¬èƒ½åšä»€ä¹ˆå‘¢ï¼Ÿ<code class="fe nm nn no np b">NavigationStack</code>ï¼</p></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><p id="672d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">æ–°çš„<code class="fe nm nn no np b">NavigationStack</code>å’Œ<code class="fe nm nn no np b">NavigationPath</code>å¯¹äºUIKitå¼€å‘è€…æ¥è¯´ä¼šéå¸¸ç†Ÿæ‚‰ï¼Œä»–ä»¬ä¼šå–œæ¬¢è¿™ä¸ª:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="5509" class="nu mq iq np b gy nv nw l nx ny">enum FeatureType: String, Decodable {<br/>    case charts<br/>    case gauge<br/>}<br/><br/>struct Feature: Identifiable, Hashable, Decodable {<br/>    var id: String = UUID().uuidString<br/>    let title: String<br/>    let description: String<br/>    let type: FeatureType<br/>}<br/><br/>final class ContentViewModel: ObservableObject {<br/>    @Published var navigationPath = NavigationPath()<br/><br/>    var features: [Feature] = [<br/>        Feature(title: "Charts ğŸ“Š",<br/>                      description: "Use a chart to build expressive and dynamic data visualizations inside a SwiftUI view.",<br/>                      type: .charts),<br/>        Feature(title: "Gauge ğŸ”œ",<br/>                description: "SwiftUI introduces a new view called Gauge for displaying progress. In the most basic form, a gauge has a default range from 0 to 1.",<br/>                type: .gauge)<br/>    ]<br/><br/>   <strong class="np ir"> func showFeature(_ feature: Feature) {<br/>        navigationPath.append(feature)<br/>    }</strong><br/>}<br/><br/>struct ContentView: View {<br/>    @StateObject var viewModel = ContentViewModel()<br/><br/>    var body: some View {<br/>        NavigationStack(path: $viewModel.navigationPath) {<br/>            ScrollView {<br/>                LazyVStack(spacing: 8) {<br/>                    ForEach(viewModel.features) { feature in<br/>                        FeatureCell(feature: feature) {<br/>                            viewModel.showFeature(feature)<br/>                        }<br/>                    }<br/>                    <strong class="np ir">.navigationDestination(for: Feature.self) { feature in<br/>                        switch feature.type {<br/>                        case .charts:<br/>                            ChartsScreen(feature: feature)<br/>                        case .gauge:<br/>                            GaugeScreen(feature: feature)<br/>                        }<br/>                    }</strong><br/>                    .navigationTitle("iOS16 Features ğŸš€")<br/>                }<br/>                .onOpenURL { url in<br/>                    print("ğŸš€ \(url)")<br/>                    <br/>                    guard let components = URLComponents(url: url, resolvingAgainstBaseURL: true) else { return }<br/>                    let query = components.queryItems ?? []<br/>                    let host = components.host<br/>                    let scheme = components.scheme<br/>                    <br/>                    if scheme == "showdownRouting" &amp;&amp; host == "feature" {<br/>                        var jsonQuery = query.map { "\"\($0.name)\":\"\($0.value ?? "")\"" }.joined(separator: ",")<br/>                        jsonQuery = "{\(jsonQuery)}"<br/>                        <br/>                        guard let jsonData = jsonQuery.data(using: .utf8) else {<br/>                           return<br/>                        }<br/>                        <br/>                        do {<br/>                            let feature = try JSONDecoder.shared.decode(Feature.self, from: jsonData)<br/>                            viewModel.showFeature(feature)<br/>                        } catch {<br/>                            print(error)<br/>                        }<br/>                    }<br/>                }<br/>            }<br/>        }<br/>    }<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/96a2adc102cbe9f3f08423c6498a06f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/1*MHCluXKxS2-JuFhbmTy2xg.gif"/></div></figure><p id="4e6c" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬å°†<code class="fe nm nn no np b">NavigatonPath</code>å¯¹è±¡ä¿å­˜åœ¨<code class="fe nm nn no np b">ViewModel</code>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†å„ç§æ•°æ®æ¨é€åˆ°å®ƒä¸Šé¢ï¼Œä¾‹å¦‚ç‰¹å¾ï¼Œç„¶åå¯¹å®ƒåšå‡ºååº”ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘åªæ£€æŸ¥å®ƒæ˜¯ä»€ä¹ˆç±»å‹ã€‚è¿™ç§æ–¹æ³•éå¸¸é€‚åˆSwiftUIï¼ŒåŒæ—¶ä¸“æ³¨äºå»ºæ¨¡æ•°æ®å’ŒçŠ¶æ€ã€‚</p><p id="d427" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿå‘å †æ ˆæ·»åŠ æ›´å¤šå†…å®¹ï¼Œå¹¶åƒè¿™æ ·é€šè¿‡å‘ä¸‹ä¼ é€’æˆ‘ä»¬åœ¨NavigationPathä¸Šæ¨é€çš„è§†å›¾<code class="fe nm nn no np b">navigationPath</code>,è½»æ¾å¼¹å‡ºåˆ°å †æ ˆçš„æ ¹:</p><pre class="kg kh ki kj gt nq np nr ns aw nt bi"><span id="c490" class="nu mq iq np b gy nv nw l nx ny">.navigationDestination(for: Feature.self) { feature in<br/>                        switch feature.type {<br/>                        case .charts:<br/>                           <strong class="np ir"> ChartsScreen(feature: feature, navigationPath: $viewModel.navigationPath)</strong><br/>                        case .gauge:<br/>                            GaugeScreen(feature: feature)<br/>                        }<br/>                    }</span><span id="9ed9" class="nu mq iq np b gy nz nw l nx ny">// Charts Screen implementation:<br/>struct ChartsScreen: View {<br/>    var feature: Feature<br/>    @Binding var navigationPath: NavigationPath<br/>    @StateObject var viewModel = ChartsViewModel()<br/><br/>    var body: some View {<br/>        VStack {<br/>            Text(feature.description)<br/>                .font(.footnote)<br/>                .padding()<br/>                .multilineTextAlignment(.center)<br/>                .onTapGesture {<br/>                 <strong class="np ir">   navigationPath.removeLast(navigationPath.count)</strong><br/>                }<br/>            <br/>            Spacer()<br/><br/>            HStack {<br/>                Button {<br/>                    withAnimation {<br/>                        viewModel.team = viewModel.team.sorted { $0.seniority &lt; $1.seniority }<br/>                    }<br/>                } label: {<br/>                    Text("Sort")<br/>                        .foregroundColor(.white)<br/>                        .padding()<br/>                        .background(.green)<br/>                        .cornerRadius(10)<br/>                }<br/><br/>                Button {<br/>                    withAnimation {<br/>                        viewModel.team = viewModel.team.shuffled()<br/>                    }<br/>                } label: {<br/>                    Text("Shuffle")<br/>                        .foregroundColor(.white)<br/>                        .padding()<br/>                        .background(.red)<br/>                        .cornerRadius(10)<br/>                }<br/>            }<br/><br/>            ScrollView {<br/>                barChart<br/>                lineChart<br/>                areaChart<br/>            }<br/>        }<br/>        .navigationTitle(feature.title)<br/>        .navigationBarTitleDisplayMode(.inline)<br/>    }</span></pre><p id="2cb3" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">æ•ˆæœæ˜¯è¿™æ ·çš„:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/aa34ebfc895830aa09481f8bbb4546b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/1*IyP8_wzK8P00342ZrexQ4A.gif"/></div></figure></div><div class="ab cl mi mj hu mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ob"><img src="../Images/cb3c1b6c4cfcaad0851170a91dedce4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q6NwU_8TnSPE7RkyoDD7gQ.jpeg"/></div></div><p class="kr ks gj gh gi kt ku bd b be z dk translated">å…‹é›·æ ¼Â·è´¹å¾·é‡Œå‰â€”â€”ä¿®å¤å¯¼èˆª</p></figure><p id="c885" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå®ç°éå¸¸ç®€å•ï¼Œè¿™è®©æˆ‘éå¸¸é«˜å…´ï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿåœ¨ä¸ä¹…çš„å°†æ¥ä½¿ç”¨å®ƒï¼Œè€Œæ–°çš„iPhonesç°åœ¨å°±è¦å‡ºæ¥äº†ï¼</p><p id="fc08" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">æ‰€æœ‰çš„æºä»£ç éƒ½æ˜¯å…¬å¼€çš„ï¼Œå°†ä¼šåœ¨ä¸‹ä¸€é›†çš„æ–°ç‰¹æ€§ä¸­æ›´æ–°ã€‚</p><div class="oc od gp gr oe of"><a href="https://github.com/LSWarss/iOS-16-MacOS-13-SwiftUI-Showdown" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd ir gy z fp ok fr fs ol fu fw ip bi translated">GitHub-lsw arss/iOS-16-MAC OS-13-swift ui-æ‘Šç‰Œ:æ–°çš„SwiftUI 4ä¸ºiOS16+æä¾›äº†ç¤ºä¾‹åº”ç”¨ç¨‹åº</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">æ–°çš„SwiftUI 4æä¾›äº†ä¸€ä¸ªé€‚ç”¨äºiOS16+çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸ºLSWarss/iOS-16-MAC OS-13-swift ui-æ‘Šç‰Œå¼€å‘åšå‡ºè´¡çŒ®â€¦</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">github.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot kp of"/></div></div></a></div><p id="4a24" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">å¦‚æœä½ æƒ³çŸ¥é“æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆç­‰ç­‰ã€‚åœ¨GitHubä¸Šè·Ÿç€çœ‹å°±è¡Œäº†ã€‚æ„Ÿè°¢é˜…è¯»ã€‚</p></div></div>    
</body>
</html>